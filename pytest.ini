; Timeout ownership: default (30s) set here. E2E override applied only via
; invocation environment (e.g., PYTEST_ADDOPTS=--timeout=45 for make/CI e2e).
; Do not hardcode --timeout flags in multiple places.
[pytest]
addopts = -ra
testpaths = tests
markers =
    e2e: end-to-end tests that may need extra deps or services
    asyncio: Asynchronous tests using asyncio
filterwarnings =
    ignore::DeprecationWarning:transformers.*
    ignore::DeprecationWarning:torch.*
    ignore:'pkgutil.find_loader' is deprecated:DeprecationWarning
    # Suppress httpx deprecation warnings from FastAPI/Starlette TestClient
    # This is an upstream issue in TestClient's usage of httpx.Client(app=...)
    # TODO: Remove when FastAPI/Starlette updates to use transport= parameter
    ignore:The 'app' shortcut is now deprecated.*:DeprecationWarning:httpx._client

# Global timeout defaults (overridable per-job via PYTEST_ADDOPTS)
timeout = 30
timeout_method = thread

# Ensure pytest-asyncio uses modern automatic mode (per-project consistency)
asyncio_mode = auto
