Task: <authoritative source path/URL or “Conversation — YYYY-MM-DD”>
SHA256: <sha256sum <file> | n/a>

**Git:** branch=<feature-branch>, head=<commit>, base=origin/main@<commit>
**Env:** Python <version>; Ruff <version>; mypy <version>; OS=<distro>
**Mode:** Workspace-Only
**Network:** Offline (no model downloads)
**Secrets/CI:** Unchanged

<!-- Local log only; do not commit. When rotating or handing off, copy the snapshot to docs/deliverables/ARCHIVE/PR-<number>-<YYYYMMDD>-<shortsha>.md (tracked). -->

## Executive Summary
- <One-line outcome>
- <Key verification result>

## Log

### 2025-09-21T22:20-05:00 — <Scope>
**Mode:** Workspace-Only
**Network:** Offline (no model downloads)
**Secrets/CI:** Unchanged

- <Action taken>
- Search receipt: `rg "<pattern>" <paths>` → `<path1>`, `<path2>`

<details><summary>Command output (N lines)</summary>

```text
<full command output>
```

</details>

<!-- Append new ISO8601 timestamped sections as work continues. Do not remove prior entries. -->
tests/test_asr_metrics.py::TestASRMetrics::test_summary_generation <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  6%]
tests/test_asr_metrics.py::TestASRMetrics::test_performance_targets <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  7%]
tests/test_asr_metrics.py::TestMetricsIntegration::test_aggregator_with_metrics <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  7%]
tests/test_asr_metrics.py::TestMetricsIntegration::test_aggregator_without_metrics <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  8%]
tests/test_asr_metrics.py::TestMetricsIntegration::test_metrics_in_stats <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  8%]
tests/test_bounded_queue.py::TestDropMetrics::test_initialization <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [  9%]
tests/test_bounded_queue.py::TestDropMetrics::test_record_drop <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [  9%]
tests/test_bounded_queue.py::TestDropMetrics::test_read_and_reset_recent <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 10%]
tests/test_bounded_queue.py::TestBoundedQueue::test_initialization <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 10%]
tests/test_bounded_queue.py::TestBoundedQueue::test_invalid_maxsize <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 10%]
tests/test_bounded_queue.py::TestBoundedQueue::test_put_get_basic <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 11%]
tests/test_bounded_queue.py::TestBoundedQueue::test_capacity_and_drop_oldest <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 11%]
tests/test_bounded_queue.py::TestBoundedQueue::test_peek <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 12%]
tests/test_bounded_queue.py::TestBoundedQueue::test_clear <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 12%]
tests/test_bounded_queue.py::TestBoundedQueue::test_drain <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 13%]
tests/test_bounded_queue.py::TestBoundedQueue::test_telemetry <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 13%]
tests/test_bounded_queue.py::TestBoundedQueue::test_thread_safety_structure <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 13%]
tests/test_bounded_queue.py::TestReplayBuffer::test_initialization <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 14%]
tests/test_bounded_queue.py::TestReplayBuffer::test_add_message_with_seq <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 14%]
tests/test_bounded_queue.py::TestReplayBuffer::test_get_messages_after <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 15%]
tests/test_bounded_queue.py::TestReplayBuffer::test_ttl_cleanup <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 15%]
tests/test_bounded_queue.py::TestReplayBuffer::test_ttl_disabled <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 16%]
tests/test_cli_integration_offline.py::test_wav_to_vtt_offline_with_fake_asr <- ../home/guff/LoquiLex/tests/test_cli_integration_offline.py PASSED [ 16%]
tests/test_cli_integration_offline.py::test_vtt_to_zh_offline_with_fake_mt <- ../home/guff/LoquiLex/tests/test_cli_integration_offline.py PASSED [ 16%]
tests/test_cli_integration_offline.py::test_output_boundary_respected <- ../home/guff/LoquiLex/tests/test_cli_integration_offline.py PASSED [ 17%]
tests/test_cli_smoke.py::test_cli_runs_with_fake_capture_and_translator <- ../home/guff/LoquiLex/tests/test_cli_smoke.py PASSED [ 17%]
tests/test_compat_versions.py::test_starlette_httpx_compat <- ../home/guff/LoquiLex/tests/test_compat_versions.py PASSED [ 18%]
tests/test_config_env.py::test_env_overrides <- ../home/guff/LoquiLex/tests/test_config_env.py PASSED [ 18%]
tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_seconds <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 19%]
tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_milliseconds <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 19%]
tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_minutes <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 20%]
tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_hours <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 20%]
tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_plain_number <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 20%]
tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_invalid_value <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 21%]
tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_no_env_var <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 21%]
tests/test_config_parsing.py::TestConfigurationParsing::test_ws_protocol_config_with_time_suffixes <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 22%]
tests/test_config_parsing.py::TestConfigurationParsing::test_ws_protocol_config_defaults <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 22%]
tests/test_config_parsing.py::TestConfigurationParsing::test_complex_time_formats <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 23%]
tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_resume_flow_no_duplicate_finals <- ../home/guff/LoquiLex/tests/test_e2e_resume_flow.py PASSED [ 23%]
tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_ordering_guarantees_after_resume <- ../home/guff/LoquiLex/tests/test_e2e_resume_flow.py PASSED [ 23%]
tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_resume_with_expired_window <- ../home/guff/LoquiLex/tests/test_e2e_resume_flow.py PASSED [ 24%]
tests/test_live_outputs.py::test_partial_and_final_files <- ../home/guff/LoquiLex/tests/test_live_outputs.py PASSED [ 24%]
tests/test_live_outputs.py::test_append_vtt_and_srt <- ../home/guff/LoquiLex/tests/test_live_outputs.py PASSED [ 25%]
tests/test_mt_integration.py::test_mt_integration_disabled <- ../home/guff/LoquiLex/tests/test_mt_integration.py PASSED [ 25%]
tests/test_mt_integration.py::test_mt_integration_enabled <- ../home/guff/LoquiLex/tests/test_mt_integration.py SKIPPED [ 26%]
tests/test_mt_integration.py::test_mt_integration_translate_and_emit <- ../home/guff/LoquiLex/tests/test_mt_integration.py PASSED [ 26%]
tests/test_mt_integration.py::test_mt_integration_error_handling <- ../home/guff/LoquiLex/tests/test_mt_integration.py PASSED [ 26%]
tests/test_mt_integration.py::test_mt_integration_status <- ../home/guff/LoquiLex/tests/test_mt_integration.py PASSED [ 27%]
tests/test_mt_registry.py::test_registry_operations <- ../home/guff/LoquiLex/tests/test_mt_registry.py PASSED [ 27%]
tests/test_mt_registry.py::test_registry_unknown_provider <- ../home/guff/LoquiLex/tests/test_mt_registry.py PASSED [ 28%]
tests/test_mt_registry.py::test_mt_module_imports_without_heavy_deps <- ../home/guff/LoquiLex/tests/test_mt_registry.py PASSED [ 28%]
tests/test_mt_registry.py::test_ct2_provider_registration <- ../home/guff/LoquiLex/tests/test_mt_registry.py SKIPPED [ 29%]
tests/test_offline_env.py::test_offline_env_vars_set[HF_HUB_OFFLINE] <- ../home/guff/LoquiLex/tests/test_offline_env.py PASSED [ 29%]
tests/test_offline_env.py::test_offline_env_vars_set[TRANSFORMERS_OFFLINE] <- ../home/guff/LoquiLex/tests/test_offline_env.py PASSED [ 30%]
tests/test_offline_env.py::test_offline_env_vars_set[HF_HUB_DISABLE_TELEMETRY] <- ../home/guff/LoquiLex/tests/test_offline_env.py PASSED [ 30%]
tests/test_offline_env.py::test_offline_env_vars_set[LX_OFFLINE] <- ../home/guff/LoquiLex/tests/test_offline_env.py PASSED [ 30%]
tests/test_offline_isolation.py::test_offline_network_guard_blocks_external <- ../home/guff/LoquiLex/tests/test_offline_isolation.py PASSED [ 31%]
tests/test_offline_isolation.py::test_offline_network_guard_allows_localhost <- ../home/guff/LoquiLex/tests/test_offline_isolation.py PASSED [ 31%]
tests/test_offline_isolation.py::test_offline_env_vars_set <- ../home/guff/LoquiLex/tests/test_offline_isolation.py PASSED [ 32%]
tests/test_resilient_comms.py::TestResilientComms::test_session_resume_within_window <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 32%]
tests/test_resilient_comms.py::TestResilientComms::test_session_resume_expired <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 33%]
tests/test_resilient_comms.py::TestResilientComms::test_session_resume_wrong_session_id <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 33%]
tests/test_resilient_comms.py::TestResilientComms::test_session_resume_wrong_epoch <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 33%]
tests/test_resilient_comms.py::TestResilientComms::test_system_heartbeat_telemetry <- ../home/guff/LoquiLex/tests/test_resilient_comms.py SKIPPED [ 34%]
tests/test_resilient_comms.py::TestResilientComms::test_bounded_replay_buffer_integration <- ../home/guff/LoquiLex/tests/test_resilient_comms.py SKIPPED [ 34%]
tests/test_resilient_comms.py::TestResilientComms::test_telemetry_summary <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 35%]
tests/test_resilient_comms.py::TestResilientComms::test_queue_drop_notification <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 35%]
tests/test_resilient_comms.py::TestResilientComms::test_environment_configuration <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 36%]
tests/test_resource_management.py::TestStreamingSessionResourceManagement::test_context_manager_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 36%]
tests/test_resource_management.py::TestStreamingSessionResourceManagement::test_destructor_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 36%]
tests/test_resource_management.py::TestSessionResourceManagement::test_context_manager_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 37%]
tests/test_resource_management.py::TestSessionResourceManagement::test_destructor_handles_subprocess_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 37%]
tests/test_resource_management.py::TestSessionManagerResourceManagement::test_shutdown_cleans_all_resources <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 38%]
tests/test_resource_management.py::TestSessionManagerResourceManagement::test_destructor_sets_stop_flag <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 38%]
tests/test_resource_management.py::TestBoundedQueueResourceManagement::test_cleanup_method_clears_resources <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 39%]
tests/test_resource_management.py::TestBoundedQueueResourceManagement::test_destructor_clears_queue <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 39%]
tests/test_resource_management.py::TestRollingTextFileResourceManagement::test_context_manager_support <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 40%]
tests/test_resource_management.py::TestResourceLeakDetection::test_memory_usage_bounded <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 40%]
tests/test_resource_management.py::TestResourceLeakDetection::test_thread_cleanup_after_operations <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 40%]
tests/test_resource_management.py::TestWSProtocolManagerResourceCleanup::test_context_manager_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 41%]
tests/test_resource_management.py::TestWSProtocolManagerResourceCleanup::test_close_method_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 41%]
tests/test_resource_management.py::TestAbruptShutdownScenarios::test_session_cleanup_during_exception <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 42%]
tests/test_resource_management.py::TestAbruptShutdownScenarios::test_manager_cleanup_with_active_sessions <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 42%]
tests/test_safe_broadcast.py::test_safe_broadcast_no_loop_does_not_raise <- ../home/guff/LoquiLex/tests/test_safe_broadcast.py PASSED [ 43%]
tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_initialization <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 43%]
tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_with_env_config <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 43%]
tests/test_session_state_integration.py::TestSessionStateIntegration::test_add_session_commit <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 44%]
tests/test_session_state_integration.py::TestSessionStateIntegration::test_get_session_snapshot <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 44%]
tests/test_session_state_integration.py::TestSessionStateIntegration::test_get_session_storage_stats <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 45%]
tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_with_sequence_tracking <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 45%]
tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_capping <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 46%]
tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_without_storage <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 46%]
tests/test_session_storage.py::TestStorageConfig::test_default_values <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 46%]
tests/test_session_storage.py::TestStorageConfig::test_validation_success <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 47%]
tests/test_session_storage.py::TestStorageConfig::test_validation_negative_commits <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 47%]
tests/test_session_storage.py::TestStorageConfig::test_validation_negative_size <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 48%]
tests/test_session_storage.py::TestStorageConfig::test_validation_negative_age <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 48%]
tests/test_session_storage.py::TestSessionCommit::test_default_values <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 49%]
tests/test_session_storage.py::TestSessionCommit::test_custom_values <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 49%]
tests/test_session_storage.py::TestSessionCommit::test_size_calculation <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 50%]
tests/test_session_storage.py::TestSessionStorage::test_initialization <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 50%]
tests/test_session_storage.py::TestSessionStorage::test_initialization_with_config <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 50%]
tests/test_session_storage.py::TestSessionStorage::test_add_commit_basic <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 51%]
tests/test_session_storage.py::TestSessionStorage::test_add_multiple_commits <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 51%]
tests/test_session_storage.py::TestSessionStorage::test_get_commits_all <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 52%]
tests/test_session_storage.py::TestSessionStorage::test_get_commits_with_limit <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 52%]
tests/test_session_storage.py::TestSessionStorage::test_get_commits_by_type <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 53%]
tests/test_session_storage.py::TestSessionStorage::test_get_commits_since_timestamp <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 53%]
tests/test_session_storage.py::TestSessionStorage::test_count_based_capping <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 53%]
tests/test_session_storage.py::TestSessionStorage::test_time_based_capping <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 54%]
tests/test_session_storage.py::TestSessionStorage::test_size_based_capping <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 54%]
tests/test_session_storage.py::TestSessionStorage::test_get_snapshot <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 55%]
tests/test_session_storage.py::TestSessionStorage::test_get_snapshot_with_limit <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 55%]
tests/test_session_storage.py::TestSessionStorage::test_clear_storage <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 56%]
tests/test_session_storage.py::TestSessionStorage::test_thread_safety <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 56%]
tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_snapshot_with_finalized_transcript <- ../home/guff/LoquiLex/tests/test_snapshot_rehydrate.py PASSED [ 56%]
tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_resume_metrics_tracking <- ../home/guff/LoquiLex/tests/test_snapshot_rehydrate.py PASSED [ 57%]
tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_resume_miss_tracking <- ../home/guff/LoquiLex/tests/test_snapshot_rehydrate.py PASSED [ 57%]
tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_monotonic_timing_in_envelopes <- ../home/guff/LoquiLex/tests/test_snapshot_rehydrate.py PASSED [ 58%]
tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_final_seq_range_in_snapshot <- ../home/guff/LoquiLex/tests/test_snapshot_rehydrate.py PASSED [ 58%]
tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partial_event_processing <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 59%]
tests/test_streaming_asr.py::TestPartialFinalAggregator::test_final_event_processing <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 59%]
tests/test_streaming_asr.py::TestPartialFinalAggregator::test_duplicate_final_prevention <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 60%]
tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partials_after_final_ignored <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 60%]
tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partial_backpressure <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 60%]
tests/test_streaming_asr.py::TestPartialFinalAggregator::test_snapshot_generation <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 61%]
tests/test_streaming_asr.py::TestPartialFinalAggregator::test_stats_tracking <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 61%]
tests/test_streaming_asr.py::TestFakeStreamingASR::test_deterministic_behavior <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 62%]
tests/test_streaming_asr.py::TestFakeStreamingASR::test_snapshot_functionality <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 62%]
tests/test_streaming_asr.py::TestFakeStreamingASR::test_force_finalize <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 63%]
tests/test_streaming_asr.py::TestIntegration::test_streaming_asr_with_aggregator <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 63%]
tests/test_streaming_asr.py::TestAsyncBridge::test_async_bridge_with_event_loop <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 63%]
tests/test_streaming_asr.py::TestAsyncBridge::test_async_bridge_no_event_loop <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 64%]
tests/test_streaming_integration.py::TestStreamingIntegration::test_create_streaming_session <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 64%]
tests/test_streaming_integration.py::TestStreamingIntegration::test_asr_snapshot_endpoint <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 65%]
tests/test_streaming_integration.py::TestStreamingIntegration::test_regular_session_no_asr_snapshot <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 65%]
tests/test_streaming_integration.py::TestStreamingIntegration::test_websocket_streaming_events[asyncio] <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 66%]
tests/test_streaming_integration.py::TestStreamingIntegration::test_websocket_streaming_events[trio] <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 66%]
tests/test_streaming_integration.py::TestStreamingConfiguration::test_streaming_config_validation <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 66%]
tests/test_streaming_integration.py::TestStreamingConfiguration::test_model_id_validation <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 67%]
tests/test_streaming_integration.py::TestStreamingConfiguration::test_device_selection <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 67%]
tests/test_streaming_integration.py::TestSnapshotStatus::test_streaming_session_status_running <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 68%]
tests/test_streaming_integration.py::TestSnapshotStatus::test_streaming_session_status_stopped <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 68%]
tests/test_streaming_integration.py::TestErrorHygiene::test_metrics_error_no_exception_leak <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 69%]
tests/test_streaming_integration.py::TestErrorHygiene::test_snapshot_error_no_exception_leak <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 69%]
tests/test_structured_logging.py::TestDataRedactor::test_redact_file_paths <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 70%]
tests/test_structured_logging.py::TestDataRedactor::test_redact_sensitive_fields <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 70%]
tests/test_structured_logging.py::TestDataRedactor::test_nested_redaction <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 70%]
tests/test_structured_logging.py::TestStructuredLogger::test_basic_logging <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 71%]
tests/test_structured_logging.py::TestStructuredLogger::test_data_redaction <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 71%]
tests/test_structured_logging.py::TestStructuredLogger::test_create_logger_factory <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 72%]
tests/test_structured_logging.py::TestPerformanceMetrics::test_latency_recording <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 72%]
tests/test_structured_logging.py::TestPerformanceMetrics::test_throughput_recording <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 73%]
tests/test_structured_logging.py::TestPerformanceMetrics::test_counters_and_gauges <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 73%]
tests/test_structured_logging.py::TestPerformanceMetrics::test_timer_functionality <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 73%]
tests/test_structured_logging.py::TestPerformanceMetrics::test_timer_error_handling <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 74%]
tests/test_structured_logging.py::TestPerformanceMetrics::test_threshold_monitoring <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 74%]
tests/test_structured_logging.py::TestPerformanceMetrics::test_metrics_reset <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 75%]
tests/test_structured_logging.py::TestLogRetention::test_log_rotation_by_size <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 75%]
tests/test_structured_logging.py::TestLogRetention::test_log_rotation_keeps_max_files <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 76%]
tests/test_structured_logging.py::TestLogRetention::test_ci_logger_defaults <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 76%]
tests/test_structured_logging.py::TestLogRetention::test_cleanup_old_logs <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 76%]
tests/test_structured_logging.py::TestLogRetention::test_log_retention_env_vars <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 77%]
tests/test_text_io.py::test_rewrite_keeps_single_last_line <- ../home/guff/LoquiLex/tests/test_text_io.py PASSED [ 77%]
tests/test_text_io.py::test_append_enforces_max_lines <- ../home/guff/LoquiLex/tests/test_text_io.py PASSED [ 78%]
tests/test_text_io.py::test_utf8_and_trailing_newline <- ../home/guff/LoquiLex/tests/test_text_io.py PASSED [ 78%]
tests/test_text_io_concurrency.py::test_rolling_text_concurrent_appends_and_rewrites <- ../home/guff/LoquiLex/tests/test_text_io_concurrency.py PASSED [ 79%]
tests/test_timed_outputs.py::test_vtt_srt_append_order <- ../home/guff/LoquiLex/tests/test_timed_outputs.py PASSED [ 79%]
tests/test_units_extra.py::test_timestamp_formatting_helpers <- ../home/guff/LoquiLex/tests/test_units_extra.py PASSED [ 80%]
tests/test_units_extra.py::test_dtype_kwargs_version_switch <- ../home/guff/LoquiLex/tests/test_units_extra.py PASSED [ 80%]
tests/test_units_extra.py::test_pick_device_cpu <- ../home/guff/LoquiLex/tests/test_units_extra.py PASSED [ 80%]
tests/test_units_extra.py::test_post_processing <- ../home/guff/LoquiLex/tests/test_units_extra.py PASSED [ 81%]
tests/test_vtt_and_mt.py::test_vtt_monotonic <- ../home/guff/LoquiLex/tests/test_vtt_and_mt.py PASSED [ 81%]
tests/test_vtt_and_mt.py::test_translator_bos_handling <- ../home/guff/LoquiLex/tests/test_vtt_and_mt.py PASSED [ 82%]
tests/test_ws_integration.py::test_legacy_message_type_mapping <- ../home/guff/LoquiLex/tests/test_ws_integration.py PASSED [ 82%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_context_manager_cleanup <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 83%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_destructor_cancels_tasks <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 83%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_initialization <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 83%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_custom_configuration <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 84%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_add_connection_sends_welcome <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 84%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_remove_connection <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 85%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_client_hello_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 85%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_client_ack_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 86%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_domain_event_sending <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 86%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_flow_control_prevents_sending <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 86%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_request_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 87%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_expired_error <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 87%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_heartbeat_sending <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 88%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_invalid_message_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 88%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_unknown_message_type_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 89%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_connection_failure_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 89%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_session_cleanup_on_all_connections_failed <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 90%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_graceful_close <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 90%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_ack_spoof_protection <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 90%]
tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_with_gaps <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 91%]
tests/test_ws_types.py::TestWSEnvelope::test_minimal_envelope <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 91%]
tests/test_ws_types.py::TestWSEnvelope::test_full_envelope <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 92%]
tests/test_ws_types.py::TestWSEnvelope::test_auto_message_id_generation <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 92%]
tests/test_ws_types.py::TestWSEnvelope::test_no_auto_id_without_sid <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 93%]
tests/test_ws_types.py::TestWSEnvelope::test_json_serialization <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 93%]
tests/test_ws_types.py::TestDomainEventData::test_asr_partial_data <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 93%]
tests/test_ws_types.py::TestDomainEventData::test_asr_final_data <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 94%]
tests/test_ws_types.py::TestDomainEventData::test_mt_final_data <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 94%]
tests/test_ws_types.py::TestDomainEventData::test_status_data <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 95%]
tests/test_ws_types.py::TestControlMessages::test_client_hello <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 95%]
tests/test_ws_types.py::TestControlMessages::test_client_hello_with_resume <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 96%]
tests/test_ws_types.py::TestControlMessages::test_server_welcome <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 96%]
tests/test_ws_types.py::TestSessionState::test_session_initialization <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 96%]
tests/test_ws_types.py::TestSessionState::test_sequence_generation <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 97%]
tests/test_ws_types.py::TestSessionState::test_monotonic_time_calculation <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 97%]
tests/test_ws_types.py::TestSessionState::test_flow_control_limits <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 98%]
tests/test_ws_types.py::TestSessionState::test_replay_buffer_management <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 98%]
tests/test_ws_types.py::TestSessionState::test_replay_message_retrieval <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 99%]
tests/test_ws_types.py::TestSessionState::test_cumulative_ack_processing <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 99%]
tests/test_ws_types.py::TestSessionState::test_per_message_ack_processing <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [100%]

==================================== PASSES ====================================
__________________ test_create_and_stop_minimal_session_http ___________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527382.416037,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"session_manager","session_id":"eba6ad59-e031-47b6-82cd-9e9365b0fcd3","session_time":0.9298815727233887,"message":"Starting session","config":{"name":"session","asr_model_id":"fake-small","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=eba6ad59-e031-47b6-82cd-9e9365b0fcd3
{"timestamp":1758527382.418741,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"asr_metrics","session_id":"eba6ad59-e031-47b6-82cd-9e9365b0fcd3","session_time":0.00064849853515625,"message":"ASR metrics initialized","stream_id":"eba6ad59-e031-47b6-82cd-9e9365b0fcd3"}
{"timestamp":1758527382.4209712,"iso_timestamp":"2025-09-22T07:49:42Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.9348304271697998,"message":"Metric recorded: session_startup_eba6ad59-e031-47b6-82cd-9e9365b0fcd3","metric_type":"latency","metric_name":"session_startup_eba6ad59-e031-47b6-82cd-9e9365b0fcd3","metric_value":3.2978057861328125}
{"timestamp":1758527382.4219985,"iso_timestamp":"2025-09-22T07:49:42Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.9358334541320801,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":1.0,"increment":1.0}
{"timestamp":1758527382.4232113,"iso_timestamp":"2025-09-22T07:49:42Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.9370460510253906,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527382.424374,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"session_manager","session_id":"eba6ad59-e031-47b6-82cd-9e9365b0fcd3","session_time":0.9382436275482178,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.2978057861328125,"total_sessions":1,"run_dir":"loquilex/out/eba6ad59-e031-47b6-82cd-9e9365b0fcd3"}
{"timestamp":1758527382.441887,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"asr_metrics","session_id":"eba6ad59-e031-47b6-82cd-9e9365b0fcd3","session_time":0.023730993270874023,"message":"ASR event: partial","event_type":"partial","stream_id":"eba6ad59-e031-47b6-82cd-9e9365b0fcd3","session_duration":0.02382681900053285,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg09655292"}{"timestamp":1758527382.4461184,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"session_manager","session_id":"eba6ad59-e031-47b6-82cd-9e9365b0fcd3","session_time":0.9599428176879883,"message":"Stopping session"}

{"timestamp":1758527382.5477931,"iso_timestamp":"2025-09-22T07:49:42Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":1.0616390705108643,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":1.0,"increment":1.0}
{"timestamp":1758527382.5487373,"iso_timestamp":"2025-09-22T07:49:42Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":1.0625684261322021,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527382.549463,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"session_manager","session_id":"eba6ad59-e031-47b6-82cd-9e9365b0fcd3","session_time":1.0632851123809814,"message":"Session stopped successfully","total_sessions":0}
________________________ test_minimal_session_lifecycle ________________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527382.7074752,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.000476837158203125,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
{"timestamp":1758527382.7108796,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"session_manager","session_id":"bd6cf5bd-9ebb-4a34-a25f-50d36a38a818","session_time":0.003838062286376953,"message":"Starting session","config":{"name":"test","asr_model_id":"fake-small","mt_enabled":false,"dest_lang":"zh","device":"cpu","vad":false,"beams":1,"pause_flush_sec":0.2,"segment_max_sec":2.0,"partial_word_cap":10,"save_audio":"no","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=bd6cf5bd-9ebb-4a34-a25f-50d36a38a818
{"timestamp":1758527382.7129085,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"asr_metrics","session_id":"bd6cf5bd-9ebb-4a34-a25f-50d36a38a818","session_time":0.0005886554718017578,"message":"ASR metrics initialized","stream_id":"bd6cf5bd-9ebb-4a34-a25f-50d36a38a818"}
{"timestamp":1758527382.714995,"iso_timestamp":"2025-09-22T07:49:42Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.00796818733215332,"message":"Metric recorded: session_startup_bd6cf5bd-9ebb-4a34-a25f-50d36a38a818","metric_type":"latency","metric_name":"session_startup_bd6cf5bd-9ebb-4a34-a25f-50d36a38a818","metric_value":3.1321048736572266}
{"timestamp":1758527382.715681,"iso_timestamp":"2025-09-22T07:49:42Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.008643627166748047,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":1.0,"increment":1.0}
{"timestamp":1758527382.7163756,"iso_timestamp":"2025-09-22T07:49:42Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.009371757507324219,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527382.717146,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"session_manager","session_id":"bd6cf5bd-9ebb-4a34-a25f-50d36a38a818","session_time":0.010113716125488281,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.1321048736572266,"total_sessions":1,"run_dir":"loquilex/out/bd6cf5bd-9ebb-4a34-a25f-50d36a38a818"}
{"timestamp":1758527382.7178102,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"session_manager","session_id":"bd6cf5bd-9ebb-4a34-a25f-50d36a38a818","session_time":0.010771036148071289,"message":"Stopping session"}
{"timestamp":1758527382.915282,"iso_timestamp":"2025-09-22T07:49:42Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.20832085609436035,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":1.0,"increment":1.0}
{"timestamp":1758527382.9161,"iso_timestamp":"2025-09-22T07:49:42Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.2090606689453125,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527382.9167275,"iso_timestamp":"2025-09-22T07:49:42Z","level":"info","component":"session_manager","session_id":"bd6cf5bd-9ebb-4a34-a25f-50d36a38a818","session_time":0.20969080924987793,"message":"Session stopped successfully","total_sessions":0}
______________________ TestASRMetrics.test_basic_metrics _______________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527383.1477299,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.00047898292541503906,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527383.1485646,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.001308441162109375,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.001174590001028264,"text_length":5,"word_count":0,"seq":null,"segment_id":"seg1"}
{"timestamp":1758527383.149485,"iso_timestamp":"2025-09-22T07:49:43Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.002231597900390625,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":0.8655450001242571,"segment_id":"seg1","eou_reason":"silence"}
{"timestamp":1758527383.1503115,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0030596256256103516,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.002911895000579534,"text_length":11,"word_count":0,"eou_reason":"silence","segment_duration_ms":0.8655450001242571,"segment_id":"seg1"}
______________________ TestASRMetrics.test_initialization ______________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527383.2524297,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0006229877471923828,"message":"ASR metrics initialized","stream_id":"test_stream"}
__________________ TestASRMetrics.test_partial_event_tracking __________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527383.2957098,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004961490631103516,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":-1758526383.2953,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.05115743300120812,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg1"}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":-1758526383.2953,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":99.99999999854481,"segment_id":"seg1","text_length":11}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":-1758526383.2953,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.1511574330033909,"text_length":11,"word_count":1,"seq":2,"segment_id":"seg1"}
___________________ TestASRMetrics.test_final_event_tracking ___________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527383.3440359,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004532337188720703,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":-1758526383.3436704,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.051204546998633305,"text_length":5,"word_count":0,"seq":1,"segment_id":"seg1"}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":-1758526383.3436704,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":99.99999999854481,"segment_id":"seg1","eou_reason":"punctuation"}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":-1758526383.3436704,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.1512045470008161,"text_length":12,"word_count":1,"eou_reason":"punctuation","segment_duration_ms":99.99999999854481,"segment_id":"seg1"}
___________________ TestASRMetrics.test_eou_reason_counting ____________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527383.391126,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004456043243408203,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527383.392005,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0013184547424316406,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0011344519989506807,"text_length":6,"word_count":0,"eou_reason":"punctuation","segment_duration_ms":null,"segment_id":"seg0"}
{"timestamp":1758527383.3929644,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0022783279418945312,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.002136907998647075,"text_length":6,"word_count":0,"eou_reason":"silence","segment_duration_ms":null,"segment_id":"seg1"}
{"timestamp":1758527383.3941615,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0034956932067871094,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.003229673999157967,"text_length":6,"word_count":0,"eou_reason":"timeout","segment_duration_ms":null,"segment_id":"seg2"}
{"timestamp":1758527383.3951478,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.004462480545043945,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0042868079981417395,"text_length":6,"word_count":0,"eou_reason":"punctuation","segment_duration_ms":null,"segment_id":"seg3"}
____________________ TestASRMetrics.test_summary_generation ____________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527383.430783,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.00046133995056152344,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527383.431544,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0012364387512207031,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0011136089997307863,"text_length":5,"word_count":0,"seq":1,"segment_id":"seg1"}
{"timestamp":1758527383.4325418,"iso_timestamp":"2025-09-22T07:49:43Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0022177696228027344,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":0.8723890023247804,"segment_id":"seg1","eou_reason":"punctuation"}
{"timestamp":1758527383.4334028,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0030794143676757812,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0029076899991196115,"text_length":12,"word_count":0,"eou_reason":"punctuation","segment_duration_ms":0.8723890023247804,"segment_id":"seg1"}
___________________ TestASRMetrics.test_performance_targets ____________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.20000000000004547,"text_length":5,"word_count":0,"seq":1,"segment_id":"seg1"}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":199.9999999999318,"segment_id":"seg1","text_length":11}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.39999999999997726,"text_length":11,"word_count":0,"seq":2,"segment_id":"seg1"}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":200.00000000004547,"segment_id":"seg1","eou_reason":"punctuation"}
{"timestamp":1000.0,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.6000000000000227,"text_length":12,"word_count":0,"eou_reason":"punctuation","segment_duration_ms":399.99999999997726,"segment_id":"seg1"}
_____________ TestMetricsIntegration.test_aggregator_with_metrics ______________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527383.5239325,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004737377166748047,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527383.5249224,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.001474142074584961,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0013489320008375216,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg1"}
{"timestamp":1758527383.5261052,"iso_timestamp":"2025-09-22T07:49:43Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.002652883529663086,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":1.0252089996356517,"segment_id":"seg1","eou_reason":"punctuation"}
{"timestamp":1758527383.5271137,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0036695003509521484,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.003412160000152653,"text_length":12,"word_count":1,"eou_reason":"punctuation","segment_duration_ms":1.0252089996356517,"segment_id":"seg1"}
_________________ TestMetricsIntegration.test_metrics_in_stats _________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527383.5888505,"iso_timestamp":"2025-09-22T07:49:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0005166530609130859,"message":"ASR metrics initialized","stream_id":"test_stream"}
____________________ test_wav_to_vtt_offline_with_fake_asr _____________________
----------------------------- Captured stdout call -----------------------------
[asr] device=cpu model=small.en compute=int8_float32
[cli] wrote /tmp/pytest-of-root/pytest-0/test_wav_to_vtt_offline_with_f0/a.vtt (2 cues)
_____________________ test_vtt_to_zh_offline_with_fake_mt ______________________
----------------------------- Captured stdout call -----------------------------
[cli] wrote /tmp/pytest-of-root/pytest-0/test_vtt_to_zh_offline_with_fa0/zh.txt and /tmp/pytest-of-root/pytest-0/test_vtt_to_zh_offline_with_fa0/zh.srt (2 cues)
________________ test_cli_runs_with_fake_capture_and_translator ________________
----------------------------- Captured stdout call -----------------------------
EN ≫ Starting service
ZH* ≫ [zh-draft]Starting service
[asr] device=cpu dtype=float32 model=small.en compute=int8_float32
VU 0.0000 0.0000 0.0000
EN ≫ hello world
ZH* ≫ [zh-draft]hello world
[cli] Ready — start speaking now (capturing mic)… for 1s (timer starts now; Ctrl+C to stop early)
[cli] run complete
___ TestSessionManagerResourceManagement.test_shutdown_cleans_all_resources ____
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527390.3780057,"iso_timestamp":"2025-09-22T07:49:50Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.0004630088806152344,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
{"timestamp":1758527390.3924832,"iso_timestamp":"2025-09-22T07:49:50Z","level":"info","component":"session_manager","session_id":"test_session","session_time":0.014937400817871094,"message":"Stopping session"}
{"timestamp":1758527390.3991854,"iso_timestamp":"2025-09-22T07:49:50Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.0216519832611084,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":1.0,"increment":1.0}
{"timestamp":1758527390.4001024,"iso_timestamp":"2025-09-22T07:49:50Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.02254176139831543,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527390.4008584,"iso_timestamp":"2025-09-22T07:49:50Z","level":"info","component":"session_manager","session_id":"test_session","session_time":0.023300886154174805,"message":"Session stopped successfully","total_sessions":0}
_____ TestSessionManagerResourceManagement.test_destructor_sets_stop_flag ______
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527390.4836538,"iso_timestamp":"2025-09-22T07:49:50Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.00038433074951171875,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
____ TestAbruptShutdownScenarios.test_manager_cleanup_with_active_sessions _____
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527391.0671973,"iso_timestamp":"2025-09-22T07:49:51Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.00044608116149902344,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
{"timestamp":1758527391.0815656,"iso_timestamp":"2025-09-22T07:49:51Z","level":"info","component":"session_manager","session_id":"session1","session_time":0.0148162841796875,"message":"Stopping session"}
{"timestamp":1758527391.088135,"iso_timestamp":"2025-09-22T07:49:51Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.021376848220825195,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":1.0,"increment":1.0}
{"timestamp":1758527391.089025,"iso_timestamp":"2025-09-22T07:49:51Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.02225804328918457,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527391.089683,"iso_timestamp":"2025-09-22T07:49:51Z","level":"info","component":"session_manager","session_id":"session1","session_time":0.022920846939086914,"message":"Session stopped successfully","total_sessions":1}
{"timestamp":1758527391.0903635,"iso_timestamp":"2025-09-22T07:49:51Z","level":"info","component":"session_manager","session_id":"session2","session_time":0.02359628677368164,"message":"Stopping session"}
{"timestamp":1758527391.0967455,"iso_timestamp":"2025-09-22T07:49:51Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.029980897903442383,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":2.0,"increment":1.0}
{"timestamp":1758527391.0975773,"iso_timestamp":"2025-09-22T07:49:51Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.030811071395874023,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527391.0983572,"iso_timestamp":"2025-09-22T07:49:51Z","level":"info","component":"session_manager","session_id":"session2","session_time":0.03159594535827637,"message":"Session stopped successfully","total_sessions":0}
__________________ test_safe_broadcast_no_loop_does_not_raise __________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527391.183769,"iso_timestamp":"2025-09-22T07:49:51Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.00045609474182128906,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
___________ TestPartialFinalAggregator.test_partial_event_processing ___________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527392.7764525,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.00047469139099121094,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527392.777511,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0015454292297363281,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.001304195997363422,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg1"}
____________ TestPartialFinalAggregator.test_final_event_processing ____________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527392.821198,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.00047969818115234375,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527392.8222334,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0015265941619873047,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0013007060006202664,"text_length":12,"word_count":2,"eou_reason":"punctuation","segment_duration_ms":null,"segment_id":"seg1"}
__________ TestPartialFinalAggregator.test_duplicate_final_prevention __________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527392.8617084,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004699230194091797,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527392.862811,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.001554727554321289,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.001334852000582032,"text_length":12,"word_count":1,"eou_reason":"punctuation","segment_duration_ms":null,"segment_id":"seg1"}
_________ TestPartialFinalAggregator.test_partials_after_final_ignored _________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527392.903332,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004980564117431641,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527392.9043524,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0015187263488769531,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0013497039981302805,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg1"}
{"timestamp":1758527392.905668,"iso_timestamp":"2025-09-22T07:49:52Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0028460025787353516,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":1.223851999384351,"segment_id":"seg1","eou_reason":"punctuation"}
{"timestamp":1758527392.9066553,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0038268566131591797,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.00364391000039177,"text_length":12,"word_count":1,"eou_reason":"punctuation","segment_duration_ms":1.223851999384351,"segment_id":"seg1"}
_____________ TestPartialFinalAggregator.test_partial_backpressure _____________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527392.9484444,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.00043320655822753906,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527392.949465,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0014662742614746094,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0013196990003052633,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg0"}
{"timestamp":1758527392.9506478,"iso_timestamp":"2025-09-22T07:49:52Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.002643585205078125,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":1.147447997936979,"segment_id":"seg1","text_length":5}
{"timestamp":1758527392.9515162,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0035142898559570312,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.003411477999179624,"text_length":5,"word_count":1,"seq":2,"segment_id":"seg1"}
{"timestamp":1758527392.952644,"iso_timestamp":"2025-09-22T07:49:52Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.004640817642211914,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":2.037459002167452,"segment_id":"seg2","text_length":5}
{"timestamp":1758527392.9535735,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.005572319030761719,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.005438954998680856,"text_length":5,"word_count":1,"seq":3,"segment_id":"seg2"}
_____________ TestPartialFinalAggregator.test_snapshot_generation ______________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527392.9943297,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.00045609474182128906,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527392.9954422,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0015819072723388672,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0013162690011085942,"text_length":12,"word_count":1,"eou_reason":"silence","segment_duration_ms":null,"segment_id":"final_seg0"}
{"timestamp":1758527392.996653,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.002786397933959961,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0025559030000295024,"text_length":12,"word_count":1,"eou_reason":"silence","segment_duration_ms":null,"segment_id":"final_seg1"}
{"timestamp":1758527392.9977584,"iso_timestamp":"2025-09-22T07:49:52Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0038924217224121094,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0037337370013119653,"text_length":15,"word_count":1,"seq":3,"segment_id":"live_seg"}
________________ TestPartialFinalAggregator.test_stats_tracking ________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527393.0443976,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004951953887939453,"message":"ASR metrics initialized","stream_id":"test_stream"}
{"timestamp":1758527393.0455184,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0016281604766845703,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0014567920006811619,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg1"}
{"timestamp":1758527393.0467675,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0028696060180664062,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":1.1805960020865314,"segment_id":"seg2","eou_reason":"punctuation"}
{"timestamp":1758527393.0478206,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.003931283950805664,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.003689945999212796,"text_length":6,"word_count":1,"eou_reason":"punctuation","segment_duration_ms":1.1805960020865314,"segment_id":"seg2"}
_______________ TestFakeStreamingASR.test_deterministic_behavior _______________
----------------------------- Captured stdout call -----------------------------
[FakeStreamingASR] Initialized: stream_id=test_stream
_______________ TestFakeStreamingASR.test_snapshot_functionality _______________
----------------------------- Captured stdout call -----------------------------
[FakeStreamingASR] Initialized: stream_id=test_stream
___________________ TestFakeStreamingASR.test_force_finalize ___________________
----------------------------- Captured stdout call -----------------------------
[FakeStreamingASR] Initialized: stream_id=test_stream
______________ TestIntegration.test_streaming_asr_with_aggregator ______________
----------------------------- Captured stdout call -----------------------------
[FakeStreamingASR] Initialized: stream_id=integration_test
{"timestamp":1758527393.2147965,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"integration_test","session_time":0.0005502700805664062,"message":"ASR metrics initialized","stream_id":"integration_test"}
{"timestamp":1758527393.2164145,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"integration_test","session_time":0.0021615028381347656,"message":"ASR event: partial","event_type":"partial","stream_id":"integration_test","session_duration":0.0018134019992430694,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg147321a8"}
{"timestamp":1758527393.2178268,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"asr_metrics","session_id":"integration_test","session_time":0.003545045852661133,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":1.4771030000702012,"segment_id":"seg147321a8","text_length":16}
{"timestamp":1758527393.2187583,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"integration_test","session_time":0.004473447799682617,"message":"ASR event: partial","event_type":"partial","stream_id":"integration_test","session_duration":0.004284111000742996,"text_length":16,"word_count":3,"seq":2,"segment_id":"seg147321a8"}
{"timestamp":1758527393.219924,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"asr_metrics","session_id":"integration_test","session_time":0.0056400299072265625,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":2.1738020004704595,"segment_id":"seg147321a8","text_length":19}
{"timestamp":1758527393.2208622,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"integration_test","session_time":0.006578207015991211,"message":"ASR event: partial","event_type":"partial","stream_id":"integration_test","session_duration":0.006378238002071157,"text_length":19,"word_count":4,"seq":3,"segment_id":"seg147321a8"}
{"timestamp":1758527393.2223506,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"asr_metrics","session_id":"integration_test","session_time":0.008072137832641602,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":2.2537959994224366,"segment_id":"seg147321a8","eou_reason":"punctuation"}
{"timestamp":1758527393.2236166,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"integration_test","session_time":0.009342670440673828,"message":"ASR event: final","event_type":"final","stream_id":"integration_test","session_duration":0.00899476500126184,"text_length":27,"word_count":6,"eou_reason":"punctuation","segment_duration_ms":5.904700999963097,"segment_id":"seg147321a8"}
____________ TestStreamingIntegration.test_create_streaming_session ____________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527393.36413,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"session_manager","session_id":"3f56040b-58e2-4769-86dd-cd3ef9ea5d49","session_time":11.877975463867188,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=3f56040b-58e2-4769-86dd-cd3ef9ea5d49
{"timestamp":1758527393.3667452,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"3f56040b-58e2-4769-86dd-cd3ef9ea5d49","session_time":0.0006122589111328125,"message":"ASR metrics initialized","stream_id":"3f56040b-58e2-4769-86dd-cd3ef9ea5d49"}
{"timestamp":1758527393.3687615,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":11.882605791091919,"message":"Metric recorded: session_startup_3f56040b-58e2-4769-86dd-cd3ef9ea5d49","metric_type":"latency","metric_name":"session_startup_3f56040b-58e2-4769-86dd-cd3ef9ea5d49","metric_value":3.273487091064453}
{"timestamp":1758527393.3697264,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":11.883557319641113,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":2.0,"increment":1.0}
{"timestamp":1758527393.3706274,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":11.884461164474487,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527393.3715975,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"session_manager","session_id":"3f56040b-58e2-4769-86dd-cd3ef9ea5d49","session_time":11.885427951812744,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.273487091064453,"total_sessions":1,"run_dir":"loquilex/out/3f56040b-58e2-4769-86dd-cd3ef9ea5d49"}
{"timestamp":1758527393.3770533,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"3f56040b-58e2-4769-86dd-cd3ef9ea5d49","session_time":0.010852575302124023,"message":"ASR event: partial","event_type":"partial","stream_id":"3f56040b-58e2-4769-86dd-cd3ef9ea5d49","session_duration":0.010982174997479888,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg09a91f1a"}
{"timestamp":1758527393.392638,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"session_manager","session_id":"3f56040b-58e2-4769-86dd-cd3ef9ea5d49","session_time":11.906458139419556,"message":"Stopping session"}
{"timestamp":1758527393.5784748,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.09229850769043,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":2.0,"increment":1.0}
{"timestamp":1758527393.5792975,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.093114137649536,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527393.5799465,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"session_manager","session_id":"3f56040b-58e2-4769-86dd-cd3ef9ea5d49","session_time":12.093764305114746,"message":"Session stopped successfully","total_sessions":0}
_____________ TestStreamingIntegration.test_asr_snapshot_endpoint ______________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527393.6482854,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"session_manager","session_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f","session_time":12.162120819091797,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=f33f55a3-18f0-4003-9d81-24ed2a00f24f
{"timestamp":1758527393.6508853,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f","session_time":0.0006368160247802734,"message":"ASR metrics initialized","stream_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f"}
{"timestamp":1758527393.6527755,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.166605949401855,"message":"Metric recorded: session_startup_f33f55a3-18f0-4003-9d81-24ed2a00f24f","metric_type":"latency","metric_name":"session_startup_f33f55a3-18f0-4003-9d81-24ed2a00f24f","metric_value":3.1387805938720703}
{"timestamp":1758527393.6537018,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.167524576187134,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":3.0,"increment":1.0}
{"timestamp":1758527393.6546462,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.168474197387695,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527393.6556711,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"session_manager","session_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f","session_time":12.169496297836304,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.1387805938720703,"total_sessions":1,"run_dir":"loquilex/out/f33f55a3-18f0-4003-9d81-24ed2a00f24f"}
{"timestamp":1758527393.661609,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f","session_time":0.011303424835205078,"message":"ASR event: partial","event_type":"partial","stream_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f","session_duration":0.011388718001398956,"text_length":11,"word_count":2,"seq":1,"segment_id":"sege285ef4c"}
{"timestamp":1758527393.7628057,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"asr_metrics","session_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f","session_time":0.11251950263977051,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":101.10464700119337,"segment_id":"sege285ef4c","text_length":16}
{"timestamp":1758527393.7635036,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"asr_metrics","session_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f","session_time":0.11319160461425781,"message":"ASR event: partial","event_type":"partial","stream_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f","session_duration":0.11329315000330098,"text_length":16,"word_count":3,"seq":2,"segment_id":"sege285ef4c"}
{"timestamp":1758527393.7991116,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"session_manager","session_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f","session_time":12.312963247299194,"message":"Stopping session"}
{"timestamp":1758527393.9648888,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.47876501083374,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":3.0,"increment":1.0}
{"timestamp":1758527393.9659853,"iso_timestamp":"2025-09-22T07:49:53Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.479841709136963,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527393.9668353,"iso_timestamp":"2025-09-22T07:49:53Z","level":"info","component":"session_manager","session_id":"f33f55a3-18f0-4003-9d81-24ed2a00f24f","session_time":12.480677604675293,"message":"Session stopped successfully","total_sessions":0}
________ TestStreamingIntegration.test_regular_session_no_asr_snapshot _________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527394.050547,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"efb33b73-ad8e-46f5-973d-72d0f750e44f","session_time":12.564384460449219,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":false}}
{"timestamp":1758527394.0584455,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.572285413742065,"message":"Metric recorded: session_startup_efb33b73-ad8e-46f5-973d-72d0f750e44f","metric_type":"latency","metric_name":"session_startup_efb33b73-ad8e-46f5-973d-72d0f750e44f","metric_value":6.586551666259766}
{"timestamp":1758527394.0593607,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.573195934295654,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":4.0,"increment":1.0}
{"timestamp":1758527394.0602632,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.574089288711548,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527394.0614033,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"efb33b73-ad8e-46f5-973d-72d0f750e44f","session_time":12.57522988319397,"message":"Session started successfully","session_type":"subprocess","startup_time_ms":6.586551666259766,"total_sessions":1,"run_dir":"loquilex/out/efb33b73-ad8e-46f5-973d-72d0f750e44f"}
{"timestamp":1758527394.0997205,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"efb33b73-ad8e-46f5-973d-72d0f750e44f","session_time":12.613540887832642,"message":"Stopping session"}
{"timestamp":1758527394.1523247,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.666177034378052,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":4.0,"increment":1.0}
{"timestamp":1758527394.1537702,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.66793179512024,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527394.155317,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"efb33b73-ad8e-46f5-973d-72d0f750e44f","session_time":12.66921353340149,"message":"Session stopped successfully","total_sessions":0}
______ TestStreamingIntegration.test_websocket_streaming_events[asyncio] _______
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527394.2388258,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0","session_time":12.75265908241272,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=fa4db50f-48f7-49c9-92b4-24ce45910ae0
{"timestamp":1758527394.2414694,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"asr_metrics","session_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0","session_time":0.0006546974182128906,"message":"ASR metrics initialized","stream_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0"}
{"timestamp":1758527394.2434103,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.757251262664795,"message":"Metric recorded: session_startup_fa4db50f-48f7-49c9-92b4-24ce45910ae0","metric_type":"latency","metric_name":"session_startup_fa4db50f-48f7-49c9-92b4-24ce45910ae0","metric_value":3.2901763916015625}
{"timestamp":1758527394.2443326,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.758154153823853,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":5.0,"increment":1.0}
{"timestamp":1758527394.2454045,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":12.759252309799194,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527394.2464232,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0","session_time":12.76025104522705,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.2901763916015625,"total_sessions":1,"run_dir":"loquilex/out/fa4db50f-48f7-49c9-92b4-24ce45910ae0"}
{"timestamp":1758527394.357549,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"asr_metrics","session_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0","session_time":0.11673927307128906,"message":"ASR event: partial","event_type":"partial","stream_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0","session_duration":0.11662924300253508,"text_length":11,"word_count":2,"seq":1,"segment_id":"test_seg"}
{"timestamp":1758527394.359106,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"asr_metrics","session_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0","session_time":0.11829185485839844,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":1.4155439966998529,"segment_id":"test_seg","eou_reason":"punctuation"}
{"timestamp":1758527394.3603747,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"asr_metrics","session_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0","session_time":0.11955595016479492,"message":"ASR event: final","event_type":"final","stream_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0","session_duration":0.11936089600203559,"text_length":12,"word_count":2,"eou_reason":"punctuation","segment_duration_ms":1.4155439966998529,"segment_id":"test_seg"}
{"timestamp":1758527394.4738011,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0","session_time":12.987621545791626,"message":"Stopping session"}
{"timestamp":1758527394.5435636,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.057390451431274,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":5.0,"increment":1.0}
{"timestamp":1758527394.544421,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.058237552642822,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527394.5452461,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"fa4db50f-48f7-49c9-92b4-24ce45910ae0","session_time":13.059076309204102,"message":"Session stopped successfully","total_sessions":0}
________ TestStreamingIntegration.test_websocket_streaming_events[trio] ________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527394.6370683,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","session_time":13.150916814804077,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=6d00ea4c-d107-4584-9f57-f6ee12bbc1e6
{"timestamp":1758527394.6396482,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"asr_metrics","session_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","session_time":0.00067138671875,"message":"ASR metrics initialized","stream_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6"}
{"timestamp":1758527394.6414654,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.155295372009277,"message":"Metric recorded: session_startup_6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","metric_type":"latency","metric_name":"session_startup_6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","metric_value":3.1425952911376953}
{"timestamp":1758527394.642408,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.15625,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":6.0,"increment":1.0}
{"timestamp":1758527394.6434014,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.1572265625,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527394.6443534,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","session_time":13.15817379951477,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.1425952911376953,"total_sessions":1,"run_dir":"loquilex/out/6d00ea4c-d107-4584-9f57-f6ee12bbc1e6"}
{"timestamp":1758527394.7556415,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"asr_metrics","session_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","session_time":0.11666345596313477,"message":"ASR event: partial","event_type":"partial","stream_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","session_duration":0.11651119900125195,"text_length":11,"word_count":2,"seq":1,"segment_id":"test_seg"}
{"timestamp":1758527394.7571924,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"asr_metrics","session_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","session_time":0.11820650100708008,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":1.4815809990977868,"segment_id":"test_seg","eou_reason":"punctuation"}
{"timestamp":1758527394.7584748,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"asr_metrics","session_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","session_time":0.11949491500854492,"message":"ASR event: final","event_type":"final","stream_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","session_duration":0.11916682300216053,"text_length":12,"word_count":2,"eou_reason":"punctuation","segment_duration_ms":1.4815809990977868,"segment_id":"test_seg"}
{"timestamp":1758527394.8719316,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","session_time":13.385753154754639,"message":"Stopping session"}
{"timestamp":1758527394.9418716,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.455716133117676,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":6.0,"increment":1.0}
{"timestamp":1758527394.9427285,"iso_timestamp":"2025-09-22T07:49:54Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.456539630889893,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527394.943411,"iso_timestamp":"2025-09-22T07:49:54Z","level":"info","component":"session_manager","session_id":"6d00ea4c-d107-4584-9f57-f6ee12bbc1e6","session_time":13.457227230072021,"message":"Session stopped successfully","total_sessions":0}
_________ TestStreamingConfiguration.test_streaming_config_validation __________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527395.0274463,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"fbc303bb-bae5-4ae0-8863-c62e8ff0f17c","session_time":13.541301250457764,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.5,"segment_max_sec":8.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=fbc303bb-bae5-4ae0-8863-c62e8ff0f17c
{"timestamp":1758527395.0300035,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"asr_metrics","session_id":"fbc303bb-bae5-4ae0-8863-c62e8ff0f17c","session_time":0.0006432533264160156,"message":"ASR metrics initialized","stream_id":"fbc303bb-bae5-4ae0-8863-c62e8ff0f17c"}
{"timestamp":1758527395.0320268,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.545862436294556,"message":"Metric recorded: session_startup_fbc303bb-bae5-4ae0-8863-c62e8ff0f17c","metric_type":"latency","metric_name":"session_startup_fbc303bb-bae5-4ae0-8863-c62e8ff0f17c","metric_value":3.255128860473633}{"timestamp":1758527395.0333223,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"asr_metrics","session_id":"fbc303bb-bae5-4ae0-8863-c62e8ff0f17c","session_time":0.0038995742797851562,"message":"ASR event: partial","event_type":"partial","stream_id":"fbc303bb-bae5-4ae0-8863-c62e8ff0f17c","session_duration":0.003963226001360454,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg2428616c"}

{"timestamp":1758527395.034241,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.548068284988403,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":7.0,"increment":1.0}
{"timestamp":1758527395.0351942,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.549023628234863,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527395.0364513,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"fbc303bb-bae5-4ae0-8863-c62e8ff0f17c","session_time":13.550282001495361,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.255128860473633,"total_sessions":1,"run_dir":"loquilex/out/fbc303bb-bae5-4ae0-8863-c62e8ff0f17c"}
{"timestamp":1758527395.0571878,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"fbc303bb-bae5-4ae0-8863-c62e8ff0f17c","session_time":13.571026802062988,"message":"Stopping session"}
{"timestamp":1758527395.2346816,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.748560428619385,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":7.0,"increment":1.0}
{"timestamp":1758527395.2357597,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.749600172042847,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527395.2366323,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"fbc303bb-bae5-4ae0-8863-c62e8ff0f17c","session_time":13.75047254562378,"message":"Session stopped successfully","total_sessions":0}
_____________ TestStreamingConfiguration.test_model_id_validation ______________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527395.31688,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"a6084910-b44a-44ff-95b9-50ef2e97d651","session_time":13.830754280090332,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=a6084910-b44a-44ff-95b9-50ef2e97d651
{"timestamp":1758527395.3194828,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"asr_metrics","session_id":"a6084910-b44a-44ff-95b9-50ef2e97d651","session_time":0.000640869140625,"message":"ASR metrics initialized","stream_id":"a6084910-b44a-44ff-95b9-50ef2e97d651"}
{"timestamp":1758527395.3216796,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.83551573753357,"message":"Metric recorded: session_startup_a6084910-b44a-44ff-95b9-50ef2e97d651","metric_type":"latency","metric_name":"session_startup_a6084910-b44a-44ff-95b9-50ef2e97d651","metric_value":3.4351348876953125}
{"timestamp":1758527395.32272,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.836547613143921,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":8.0,"increment":1.0}
{"timestamp":1758527395.323652,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":13.837480545043945,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527395.324765,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"a6084910-b44a-44ff-95b9-50ef2e97d651","session_time":13.8385910987854,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.4351348876953125,"total_sessions":1,"run_dir":"loquilex/out/a6084910-b44a-44ff-95b9-50ef2e97d651"}
{"timestamp":1758527395.3309307,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"asr_metrics","session_id":"a6084910-b44a-44ff-95b9-50ef2e97d651","session_time":0.012017965316772461,"message":"ASR event: partial","event_type":"partial","stream_id":"a6084910-b44a-44ff-95b9-50ef2e97d651","session_duration":0.012141311999585014,"text_length":11,"word_count":2,"seq":1,"segment_id":"segfd2106af"}
{"timestamp":1758527395.3463018,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"a6084910-b44a-44ff-95b9-50ef2e97d651","session_time":13.860125303268433,"message":"Stopping session"}
{"timestamp":1758527395.53233,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.046181678771973,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":8.0,"increment":1.0}
{"timestamp":1758527395.5333066,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.047125101089478,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527395.5339599,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"a6084910-b44a-44ff-95b9-50ef2e97d651","session_time":14.047775268554688,"message":"Session stopped successfully","total_sessions":0}
{"timestamp":1758527395.5582197,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d","session_time":14.07206654548645,"message":"Starting session","config":{"name":"session","asr_model_id":"small.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d
{"timestamp":1758527395.5606835,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"asr_metrics","session_id":"6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d","session_time":0.0006346702575683594,"message":"ASR metrics initialized","stream_id":"6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d"}
{"timestamp":1758527395.562815,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"asr_metrics","session_id":"6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d","session_time":0.0027060508728027344,"message":"ASR event: partial","event_type":"partial","stream_id":"6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d","session_duration":0.002766703000816051,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg611c4b03"}
{"timestamp":1758527395.5643585,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.078214645385742,"message":"Metric recorded: session_startup_6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d","metric_type":"latency","metric_name":"session_startup_6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d","metric_value":4.822492599487305}
{"timestamp":1758527395.5653973,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.07925033569336,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":9.0,"increment":1.0}
{"timestamp":1758527395.5662904,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.080115795135498,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527395.5672362,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d","session_time":14.081061124801636,"message":"Session started successfully","session_type":"streaming","startup_time_ms":4.822492599487305,"total_sessions":1,"run_dir":"loquilex/out/6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d"}
{"timestamp":1758527395.5859082,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d","session_time":14.099737644195557,"message":"Stopping session"}
{"timestamp":1758527395.6645155,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.178449869155884,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":9.0,"increment":1.0}
{"timestamp":1758527395.6655352,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.179350137710571,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527395.6661763,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"6b39d00e-e7e5-4b11-a4d3-0da38d4cab3d","session_time":14.179992914199829,"message":"Session stopped successfully","total_sessions":0}
{"timestamp":1758527395.6925902,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"c9e2daaf-a102-4057-8964-78383c4c8957","session_time":14.20644235610962,"message":"Starting session","config":{"name":"session","asr_model_id":"base.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=c9e2daaf-a102-4057-8964-78383c4c8957
{"timestamp":1758527395.6950872,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"asr_metrics","session_id":"c9e2daaf-a102-4057-8964-78383c4c8957","session_time":0.0006496906280517578,"message":"ASR metrics initialized","stream_id":"c9e2daaf-a102-4057-8964-78383c4c8957"}
{"timestamp":1758527395.6976466,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"asr_metrics","session_id":"c9e2daaf-a102-4057-8964-78383c4c8957","session_time":0.003165721893310547,"message":"ASR event: partial","event_type":"partial","stream_id":"c9e2daaf-a102-4057-8964-78383c4c8957","session_duration":0.003208251000614837,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg4a22a919"}
{"timestamp":1758527395.6986578,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.212495565414429,"message":"Metric recorded: session_startup_c9e2daaf-a102-4057-8964-78383c4c8957","metric_type":"latency","metric_name":"session_startup_c9e2daaf-a102-4057-8964-78383c4c8957","metric_value":4.8198699951171875}
{"timestamp":1758527395.6996129,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.213462114334106,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":10.0,"increment":1.0}
{"timestamp":1758527395.7006001,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.214445352554321,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527395.701667,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"c9e2daaf-a102-4057-8964-78383c4c8957","session_time":14.215494394302368,"message":"Session started successfully","session_type":"streaming","startup_time_ms":4.8198699951171875,"total_sessions":1,"run_dir":"loquilex/out/c9e2daaf-a102-4057-8964-78383c4c8957"}
{"timestamp":1758527395.7211154,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"c9e2daaf-a102-4057-8964-78383c4c8957","session_time":14.234949111938477,"message":"Stopping session"}
{"timestamp":1758527395.8989658,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.412816047668457,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":10.0,"increment":1.0}
{"timestamp":1758527395.900016,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.413833379745483,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527395.9007382,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"c9e2daaf-a102-4057-8964-78383c4c8957","session_time":14.414557933807373,"message":"Session stopped successfully","total_sessions":0}
{"timestamp":1758527395.9247696,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"2af43dab-9418-436a-97bc-6d519079d9ea","session_time":14.438596725463867,"message":"Starting session","config":{"name":"session","asr_model_id":"medium.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=2af43dab-9418-436a-97bc-6d519079d9ea
{"timestamp":1758527395.9271824,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"asr_metrics","session_id":"2af43dab-9418-436a-97bc-6d519079d9ea","session_time":0.0006492137908935547,"message":"ASR metrics initialized","stream_id":"2af43dab-9418-436a-97bc-6d519079d9ea"}
{"timestamp":1758527395.929123,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.442952156066895,"message":"Metric recorded: session_startup_2af43dab-9418-436a-97bc-6d519079d9ea","metric_type":"latency","metric_name":"session_startup_2af43dab-9418-436a-97bc-6d519079d9ea","metric_value":3.12042236328125}{"timestamp":1758527395.9303906,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"asr_metrics","session_id":"2af43dab-9418-436a-97bc-6d519079d9ea","session_time":0.0037975311279296875,"message":"ASR event: partial","event_type":"partial","stream_id":"2af43dab-9418-436a-97bc-6d519079d9ea","session_duration":0.0037894159977440722,"text_length":11,"word_count":2,"seq":1,"segment_id":"segc59c630e"}

{"timestamp":1758527395.9313624,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.445188283920288,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":11.0,"increment":1.0}
{"timestamp":1758527395.9322746,"iso_timestamp":"2025-09-22T07:49:55Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.446095943450928,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527395.933346,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"2af43dab-9418-436a-97bc-6d519079d9ea","session_time":14.4471755027771,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.12042236328125,"total_sessions":1,"run_dir":"loquilex/out/2af43dab-9418-436a-97bc-6d519079d9ea"}
{"timestamp":1758527395.9526155,"iso_timestamp":"2025-09-22T07:49:55Z","level":"info","component":"session_manager","session_id":"2af43dab-9418-436a-97bc-6d519079d9ea","session_time":14.466442584991455,"message":"Stopping session"}
{"timestamp":1758527396.1319058,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.645756006240845,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":11.0,"increment":1.0}
{"timestamp":1758527396.1329532,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.646769285202026,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527396.1336772,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"2af43dab-9418-436a-97bc-6d519079d9ea","session_time":14.647495746612549,"message":"Session stopped successfully","total_sessions":0}
_______________ TestStreamingConfiguration.test_device_selection _______________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527396.2072816,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"ec71a5c2-9015-4eba-86f5-b1e1d0144a79","session_time":14.721118450164795,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=ec71a5c2-9015-4eba-86f5-b1e1d0144a79
{"timestamp":1758527396.209961,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"asr_metrics","session_id":"ec71a5c2-9015-4eba-86f5-b1e1d0144a79","session_time":0.0006899833679199219,"message":"ASR metrics initialized","stream_id":"ec71a5c2-9015-4eba-86f5-b1e1d0144a79"}
{"timestamp":1758527396.212051,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.725885391235352,"message":"Metric recorded: session_startup_ec71a5c2-9015-4eba-86f5-b1e1d0144a79","metric_type":"latency","metric_name":"session_startup_ec71a5c2-9015-4eba-86f5-b1e1d0144a79","metric_value":3.459930419921875}
{"timestamp":1758527396.2130525,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.72688102722168,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":12.0,"increment":1.0}
{"timestamp":1758527396.2140815,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.7279212474823,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527396.21514,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"ec71a5c2-9015-4eba-86f5-b1e1d0144a79","session_time":14.728968620300293,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.459930419921875,"total_sessions":1,"run_dir":"loquilex/out/ec71a5c2-9015-4eba-86f5-b1e1d0144a79"}
{"timestamp":1758527396.220734,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"asr_metrics","session_id":"ec71a5c2-9015-4eba-86f5-b1e1d0144a79","session_time":0.011391878128051758,"message":"ASR event: partial","event_type":"partial","stream_id":"ec71a5c2-9015-4eba-86f5-b1e1d0144a79","session_duration":0.011525804999109823,"text_length":11,"word_count":2,"seq":1,"segment_id":"segc87456e0"}
{"timestamp":1758527396.2369063,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"ec71a5c2-9015-4eba-86f5-b1e1d0144a79","session_time":14.75073528289795,"message":"Stopping session"}
{"timestamp":1758527396.4239306,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.937777042388916,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":12.0,"increment":1.0}
{"timestamp":1758527396.4249141,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.938730716705322,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527396.4255917,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"ec71a5c2-9015-4eba-86f5-b1e1d0144a79","session_time":14.939408302307129,"message":"Session stopped successfully","total_sessions":0}
{"timestamp":1758527396.4497333,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f","session_time":14.96356987953186,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"auto","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f
{"timestamp":1758527396.4521163,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"asr_metrics","session_id":"0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f","session_time":0.0005939006805419922,"message":"ASR metrics initialized","stream_id":"0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f"}
{"timestamp":1758527396.45414,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.967978239059448,"message":"Metric recorded: session_startup_0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f","metric_type":"latency","metric_name":"session_startup_0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f","metric_value":3.139972686767578}
{"timestamp":1758527396.455139,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.968965530395508,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":13.0,"increment":1.0}
{"timestamp":1758527396.4560747,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":14.96989917755127,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527396.4571865,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f","session_time":14.971014499664307,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.139972686767578,"total_sessions":1,"run_dir":"loquilex/out/0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f"}
{"timestamp":1758527396.4631124,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"asr_metrics","session_id":"0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f","session_time":0.011519432067871094,"message":"ASR event: partial","event_type":"partial","stream_id":"0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f","session_duration":0.011568482997972751,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg6a0afc1a"}
{"timestamp":1758527396.4783986,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f","session_time":14.99221658706665,"message":"Stopping session"}
{"timestamp":1758527396.6646469,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.178477048873901,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":13.0,"increment":1.0}
{"timestamp":1758527396.6654954,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.179310083389282,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527396.6661692,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"0ea82aab-cbdb-4305-ad8e-1d2203ec4b4f","session_time":15.17998743057251,"message":"Session stopped successfully","total_sessions":0}
___________ TestSnapshotStatus.test_streaming_session_status_running ___________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527396.7349193,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"36c6189c-8b93-412e-af68-e33002e3156a","session_time":15.24877142906189,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=36c6189c-8b93-412e-af68-e33002e3156a
{"timestamp":1758527396.7374198,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"asr_metrics","session_id":"36c6189c-8b93-412e-af68-e33002e3156a","session_time":0.0006742477416992188,"message":"ASR metrics initialized","stream_id":"36c6189c-8b93-412e-af68-e33002e3156a"}
{"timestamp":1758527396.7401216,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"asr_metrics","session_id":"36c6189c-8b93-412e-af68-e33002e3156a","session_time":0.0033121109008789062,"message":"ASR event: partial","event_type":"partial","stream_id":"36c6189c-8b93-412e-af68-e33002e3156a","session_duration":0.0033019799993780907,"text_length":11,"word_count":2,"seq":1,"segment_id":"segf3e6d8d8"}{"timestamp":1758527396.741339,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.255182266235352,"message":"Metric recorded: session_startup_36c6189c-8b93-412e-af68-e33002e3156a","metric_type":"latency","metric_name":"session_startup_36c6189c-8b93-412e-af68-e33002e3156a","metric_value":5.093097686767578}
{"timestamp":1758527396.742353,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.256179332733154,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":14.0,"increment":1.0}
{"timestamp":1758527396.7433286,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.257158041000366,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527396.7443984,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"36c6189c-8b93-412e-af68-e33002e3156a","session_time":15.258241415023804,"message":"Session started successfully","session_type":"streaming","startup_time_ms":5.093097686767578,"total_sessions":1,"run_dir":"loquilex/out/36c6189c-8b93-412e-af68-e33002e3156a"}

{"timestamp":1758527396.7864778,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"36c6189c-8b93-412e-af68-e33002e3156a","session_time":15.300302028656006,"message":"Stopping session"}
{"timestamp":1758527396.858847,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.372707843780518,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":14.0,"increment":1.0}
{"timestamp":1758527396.859747,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.373563051223755,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527396.860422,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"36c6189c-8b93-412e-af68-e33002e3156a","session_time":15.374236345291138,"message":"Session stopped successfully","total_sessions":0}
___________ TestSnapshotStatus.test_streaming_session_status_stopped ___________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527396.927499,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"85f5187f-4ebf-4f38-8642-384579012bb5","session_time":15.44133448600769,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=85f5187f-4ebf-4f38-8642-384579012bb5
{"timestamp":1758527396.9299588,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"asr_metrics","session_id":"85f5187f-4ebf-4f38-8642-384579012bb5","session_time":0.0005860328674316406,"message":"ASR metrics initialized","stream_id":"85f5187f-4ebf-4f38-8642-384579012bb5"}
{"timestamp":1758527396.9319828,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.44591236114502,"message":"Metric recorded: session_startup_85f5187f-4ebf-4f38-8642-384579012bb5","metric_type":"latency","metric_name":"session_startup_85f5187f-4ebf-4f38-8642-384579012bb5","metric_value":3.1402111053466797}
{"timestamp":1758527396.9333277,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.447169780731201,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":15.0,"increment":1.0}
{"timestamp":1758527396.934266,"iso_timestamp":"2025-09-22T07:49:56Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.448091983795166,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527396.935303,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"85f5187f-4ebf-4f38-8642-384579012bb5","session_time":15.449126958847046,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.1402111053466797,"total_sessions":1,"run_dir":"loquilex/out/85f5187f-4ebf-4f38-8642-384579012bb5"}
{"timestamp":1758527396.9407537,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"asr_metrics","session_id":"85f5187f-4ebf-4f38-8642-384579012bb5","session_time":0.011323213577270508,"message":"ASR event: partial","event_type":"partial","stream_id":"85f5187f-4ebf-4f38-8642-384579012bb5","session_duration":0.011396827998396475,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg4bcf1a2c"}
{"timestamp":1758527396.9576838,"iso_timestamp":"2025-09-22T07:49:56Z","level":"info","component":"session_manager","session_id":"85f5187f-4ebf-4f38-8642-384579012bb5","session_time":15.47156572341919,"message":"Stopping session"}
{"timestamp":1758527397.1429617,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.65688180923462,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":15.0,"increment":1.0}
{"timestamp":1758527397.1443286,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.65816354751587,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}

## Steps Taken — PR #103 (copilot/fix-103)
Mon Sep 22 08:26:40 UTC 2025

### Summary
- Selected: PR branch `copilot/fix-103`.
- Merge: Clean merge of `origin/main` into feature (combine-first) with ephemeral union rules in `.git/MERGE_ATTRS` for docs/yml/env.
- Formatting: Ran Black to fix CI formatting on 4 files:
  - `loquilex/hardware/__init__.py`
  - `loquilex/hardware/detection.py`
  - `tests/test_api_hardware.py`
  - `tests/test_hardware_detection.py`
- CI: Docker CI parity passed end-to-end.
  - Ruff OK, Black OK, MyPy OK
  - Pytest: 238 passed, 4 skipped (unit/integration); E2E: 10 passed
- Commit/Push: Recorded merge success commit and pushed branch.
  - "style: format hardware modules and tests (Black)"
  - "merge: sync copilot/fix-103 with origin/main (combine-first); Docker CI green"
- PR Update: PR body update pending (gh lookup for PR number did not return in this session).

### Follow-up: MyPy fix (psutil stubs)
Mon Sep 22 08:41:12 UTC 2025
- Symptom: CI mypy flagged missing stubs for `psutil` after hardware snapshot changes.
- Fix: Added `types-psutil` to `requirements-ci.txt` and `requirements-dev.txt`.
- Code tweak: Annotated optional `psutil` import as `Any` in `loquilex/hardware/detection.py` to avoid Module→None assignment error in minimal profiles.
- Result: `make typecheck` → Success: no issues found.

## Steps Taken — PR #123 (copilot/fix-107)
Mon Sep 22 09:10:31 UTC 2025

### Summary
- Selected: PR #123 `copilot/fix-107` — Model indexing + defaults.
- Merge: Clean merge of `origin/main` into feature using combine-first; ephemeral `.git/MERGE_ATTRS` with union for docs/yml/env.
- CI: Docker CI parity passed (ruff/black/mypy/pytest). Unit+integration count expanded (model defaults/indexing now covered).
- Commit/Push: Added empty commit noting merge+CI; pushed branch.
- PR Update: Edited PR body with merge+CI details and conflict strategy.

### Notes
- First CI attempt interrupted (exit 130). Reran via task and terminal; all checks green on retry.

{"timestamp":1758527397.1451836,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"session_manager","session_id":"85f5187f-4ebf-4f38-8642-384579012bb5","session_time":15.659018754959106,"message":"Session stopped successfully","total_sessions":0}
____________ TestErrorHygiene.test_metrics_error_no_exception_leak _____________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527397.2829056,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"session_manager","session_id":"78b666d8-c493-4026-b3b0-7f23dd87de39","session_time":15.796759128570557,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":false}}
{"timestamp":1758527397.292432,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.806276559829712,"message":"Metric recorded: session_startup_78b666d8-c493-4026-b3b0-7f23dd87de39","metric_type":"latency","metric_name":"session_startup_78b666d8-c493-4026-b3b0-7f23dd87de39","metric_value":8.010387420654297}
{"timestamp":1758527397.2936206,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.80746340751648,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":16.0,"increment":1.0}
{"timestamp":1758527397.29456,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.80839729309082,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527397.2957716,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"session_manager","session_id":"78b666d8-c493-4026-b3b0-7f23dd87de39","session_time":15.809709310531616,"message":"Session started successfully","session_type":"subprocess","startup_time_ms":8.010387420654297,"total_sessions":1,"run_dir":"loquilex/out/78b666d8-c493-4026-b3b0-7f23dd87de39"}
{"timestamp":1758527397.3205633,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"session_manager","session_id":"78b666d8-c493-4026-b3b0-7f23dd87de39","session_time":15.834441661834717,"message":"Stopping session"}
{"timestamp":1758527397.373661,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.887563228607178,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":16.0,"increment":1.0}
{"timestamp":1758527397.3748112,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.888650178909302,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527397.3756685,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"session_manager","session_id":"78b666d8-c493-4026-b3b0-7f23dd87de39","session_time":15.889495849609375,"message":"Session stopped successfully","total_sessions":0}
____________ TestErrorHygiene.test_snapshot_error_no_exception_leak ____________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527397.4788544,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"session_manager","session_id":"821d72f7-1bf3-4dfc-911e-442e895901c1","session_time":15.992807865142822,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[FakeStreamingASR] Initialized: stream_id=821d72f7-1bf3-4dfc-911e-442e895901c1
{"timestamp":1758527397.48267,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"asr_metrics","session_id":"821d72f7-1bf3-4dfc-911e-442e895901c1","session_time":0.0008692741394042969,"message":"ASR metrics initialized","stream_id":"821d72f7-1bf3-4dfc-911e-442e895901c1"}
{"timestamp":1758527397.4853196,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":15.999178886413574,"message":"Metric recorded: session_startup_821d72f7-1bf3-4dfc-911e-442e895901c1","metric_type":"latency","metric_name":"session_startup_821d72f7-1bf3-4dfc-911e-442e895901c1","metric_value":4.470348358154297}{"timestamp":1758527397.4870903,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"asr_metrics","session_id":"821d72f7-1bf3-4dfc-911e-442e895901c1","session_time":0.005166292190551758,"message":"ASR event: partial","event_type":"partial","stream_id":"821d72f7-1bf3-4dfc-911e-442e895901c1","session_duration":0.005378622001444455,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg0841e4c2"}

{"timestamp":1758527397.488146,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.002001762390137,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":17.0,"increment":1.0}
{"timestamp":1758527397.489325,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.003157138824463,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
{"timestamp":1758527397.490475,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"session_manager","session_id":"821d72f7-1bf3-4dfc-911e-442e895901c1","session_time":16.00433611869812,"message":"Session started successfully","session_type":"streaming","startup_time_ms":4.470348358154297,"total_sessions":1,"run_dir":"loquilex/out/821d72f7-1bf3-4dfc-911e-442e895901c1"}
{"timestamp":1758527397.533362,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"session_manager","session_id":"821d72f7-1bf3-4dfc-911e-442e895901c1","session_time":16.047186136245728,"message":"Stopping session"}
{"timestamp":1758527397.5882618,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.102107524871826,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":17.0,"increment":1.0}
{"timestamp":1758527397.5891504,"iso_timestamp":"2025-09-22T07:49:57Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.102969646453857,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
{"timestamp":1758527397.5898106,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"session_manager","session_id":"821d72f7-1bf3-4dfc-911e-442e895901c1","session_time":16.103626012802124,"message":"Session stopped successfully","total_sessions":0}
_______________ TestStructuredLogger.test_create_logger_factory ________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527397.836724,"iso_timestamp":"2025-09-22T07:49:57Z","level":"info","component":"factory_test","session_id":"factory_session","session_time":0.0015211105346679688,"message":"Factory test message"}
_______________________ test_legacy_message_type_mapping _______________________
----------------------------- Captured stdout call -----------------------------
{"timestamp":1758527399.9471543,"iso_timestamp":"2025-09-22T07:49:59Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.0003933906555175781,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
___________ TestWSProtocolManager.test_flow_control_prevents_sending ___________
------------------------------ Captured log call -------------------------------
WARNING  loquilex.api.ws_protocol:ws_protocol.py:447 Flow control prevents sending MessageType.ASR_PARTIAL
_________________ TestWSProtocolManager.test_heartbeat_sending _________________
------------------------------ Captured log call -------------------------------
ERROR    loquilex.api.ws_protocol:ws_protocol.py:670 System heartbeat loop error:
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/unittest/mock.py", line 2294, in _execute_mock_call
    result = next(effect)
             ^^^^^^^^^^^^
StopIteration

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/loquilex/api/ws_protocol.py", line 633, in _system_heartbeat_loop
    await asyncio.sleep(self.hb_config.interval_ms / 1000.0)
  File "/usr/local/lib/python3.12/unittest/mock.py", line 2298, in _execute_mock_call
    raise StopAsyncIteration
StopAsyncIteration
_____________ TestWSProtocolManager.test_invalid_message_handling ______________
------------------------------ Captured log call -------------------------------
ERROR    loquilex.api.ws_protocol:ws_protocol.py:219 Error handling WebSocket message: Expecting value: line 1 column 1 (char 0)
Traceback (most recent call last):
  File "/app/loquilex/api/ws_protocol.py", line 201, in handle_message
    data = json.loads(message)
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/json/decoder.py", line 338, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/json/decoder.py", line 356, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
___________ TestWSProtocolManager.test_unknown_message_type_handling ___________
------------------------------ Captured log call -------------------------------
ERROR    loquilex.api.ws_protocol:ws_protocol.py:219 Error handling WebSocket message: 1 validation error for WSEnvelope
t
  Input should be 'client.hello', 'server.welcome', 'server.error', 'client.hb', 'server.hb', 'client.ack', 'server.ack', 'client.flow', 'asr.partial', 'asr.final', 'mt.partial', 'mt.final', 'status', 'session.resume', 'session.snapshot', 'session.new', 'session.ack', 'system.heartbeat', 'queue.drop' or 'system.metrics' [type=enum, input_value='unknown.type', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/enum
Traceback (most recent call last):
  File "/app/loquilex/api/ws_protocol.py", line 202, in handle_message
    envelope = WSEnvelope.model_validate(data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for WSEnvelope
t
  Input should be 'client.hello', 'server.welcome', 'server.error', 'client.hb', 'server.hb', 'client.ack', 'server.ack', 'client.flow', 'asr.partial', 'asr.final', 'mt.partial', 'mt.final', 'status', 'session.resume', 'session.snapshot', 'session.new', 'session.ack', 'system.heartbeat', 'queue.drop' or 'system.metrics' [type=enum, input_value='unknown.type', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/enum
____________ TestWSProtocolManager.test_connection_failure_handling ____________
------------------------------ Captured log call -------------------------------
WARNING  loquilex.api.ws_protocol:ws_protocol.py:501 Failed to send to connection: Connection failed
_____ TestWSProtocolManager.test_session_cleanup_on_all_connections_failed _____
------------------------------ Captured log call -------------------------------
WARNING  loquilex.api.ws_protocol:ws_protocol.py:501 Failed to send to connection: Connection failed
_______________ TestWSProtocolManager.test_ack_spoof_protection ________________
------------------------------ Captured log call -------------------------------
WARNING  loquilex.api.ws_protocol:ws_protocol.py:399 Client ack beyond latest seq: 99 > 2
=========================== short test summary info ============================
PASSED tests/test_aggregator.py::test_aggregator_partial_debounce
PASSED tests/test_aggregator.py::test_aggregator_force_finalize
PASSED tests/test_api_minimal_http.py::test_create_and_stop_minimal_session_http
PASSED tests/test_api_minimal_session.py::test_minimal_session_lifecycle
PASSED tests/test_api_modules_import.py::test_import_api_modules_for_coverage
PASSED tests/test_asr_metrics.py::TestLatencyMetrics::test_empty_metrics
PASSED tests/test_asr_metrics.py::TestLatencyMetrics::test_single_measurement
PASSED tests/test_asr_metrics.py::TestLatencyMetrics::test_multiple_measurements
PASSED tests/test_asr_metrics.py::TestLatencyMetrics::test_bounded_recent_values
PASSED tests/test_asr_metrics.py::TestASRMetrics::test_basic_metrics
PASSED tests/test_asr_metrics.py::TestASRMetrics::test_asr_metrics_with_structured_logging
PASSED tests/test_asr_metrics.py::TestASRMetrics::test_initialization
PASSED tests/test_asr_metrics.py::TestASRMetrics::test_partial_event_tracking
PASSED tests/test_asr_metrics.py::TestASRMetrics::test_final_event_tracking
PASSED tests/test_asr_metrics.py::TestASRMetrics::test_eou_reason_counting
PASSED tests/test_asr_metrics.py::TestASRMetrics::test_summary_generation
PASSED tests/test_asr_metrics.py::TestASRMetrics::test_performance_targets
PASSED tests/test_asr_metrics.py::TestMetricsIntegration::test_aggregator_with_metrics
PASSED tests/test_asr_metrics.py::TestMetricsIntegration::test_aggregator_without_metrics
PASSED tests/test_asr_metrics.py::TestMetricsIntegration::test_metrics_in_stats
PASSED tests/test_bounded_queue.py::TestDropMetrics::test_initialization
PASSED tests/test_bounded_queue.py::TestDropMetrics::test_record_drop
PASSED tests/test_bounded_queue.py::TestDropMetrics::test_read_and_reset_recent
PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_initialization
PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_invalid_maxsize
PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_put_get_basic
PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_capacity_and_drop_oldest
PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_peek
PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_clear
PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_drain
PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_telemetry
PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_thread_safety_structure
PASSED tests/test_bounded_queue.py::TestReplayBuffer::test_initialization
PASSED tests/test_bounded_queue.py::TestReplayBuffer::test_add_message_with_seq
PASSED tests/test_bounded_queue.py::TestReplayBuffer::test_get_messages_after
PASSED tests/test_bounded_queue.py::TestReplayBuffer::test_ttl_cleanup
PASSED tests/test_bounded_queue.py::TestReplayBuffer::test_ttl_disabled
PASSED tests/test_cli_integration_offline.py::test_wav_to_vtt_offline_with_fake_asr
PASSED tests/test_cli_integration_offline.py::test_vtt_to_zh_offline_with_fake_mt
PASSED tests/test_cli_integration_offline.py::test_output_boundary_respected
PASSED tests/test_cli_smoke.py::test_cli_runs_with_fake_capture_and_translator
PASSED tests/test_compat_versions.py::test_starlette_httpx_compat
PASSED tests/test_config_env.py::test_env_overrides
PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_seconds
PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_milliseconds
PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_minutes
PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_hours
PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_plain_number
PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_invalid_value
PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_no_env_var
PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_ws_protocol_config_with_time_suffixes
PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_ws_protocol_config_defaults
PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_complex_time_formats
PASSED tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_resume_flow_no_duplicate_finals
PASSED tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_ordering_guarantees_after_resume
PASSED tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_resume_with_expired_window
PASSED tests/test_live_outputs.py::test_partial_and_final_files
PASSED tests/test_live_outputs.py::test_append_vtt_and_srt
PASSED tests/test_mt_integration.py::test_mt_integration_disabled
PASSED tests/test_mt_integration.py::test_mt_integration_translate_and_emit
PASSED tests/test_mt_integration.py::test_mt_integration_error_handling
PASSED tests/test_mt_integration.py::test_mt_integration_status
PASSED tests/test_mt_registry.py::test_registry_operations
PASSED tests/test_mt_registry.py::test_registry_unknown_provider
PASSED tests/test_mt_registry.py::test_mt_module_imports_without_heavy_deps
PASSED tests/test_offline_env.py::test_offline_env_vars_set[HF_HUB_OFFLINE]
PASSED tests/test_offline_env.py::test_offline_env_vars_set[TRANSFORMERS_OFFLINE]
PASSED tests/test_offline_env.py::test_offline_env_vars_set[HF_HUB_DISABLE_TELEMETRY]
PASSED tests/test_offline_env.py::test_offline_env_vars_set[LX_OFFLINE]
PASSED tests/test_offline_isolation.py::test_offline_network_guard_blocks_external
PASSED tests/test_offline_isolation.py::test_offline_network_guard_allows_localhost
PASSED tests/test_offline_isolation.py::test_offline_env_vars_set
PASSED tests/test_resilient_comms.py::TestResilientComms::test_session_resume_within_window
PASSED tests/test_resilient_comms.py::TestResilientComms::test_session_resume_expired
PASSED tests/test_resilient_comms.py::TestResilientComms::test_session_resume_wrong_session_id
PASSED tests/test_resilient_comms.py::TestResilientComms::test_session_resume_wrong_epoch
PASSED tests/test_resilient_comms.py::TestResilientComms::test_telemetry_summary
PASSED tests/test_resilient_comms.py::TestResilientComms::test_queue_drop_notification
PASSED tests/test_resilient_comms.py::TestResilientComms::test_environment_configuration
PASSED tests/test_resource_management.py::TestStreamingSessionResourceManagement::test_context_manager_cleanup
PASSED tests/test_resource_management.py::TestStreamingSessionResourceManagement::test_destructor_cleanup
PASSED tests/test_resource_management.py::TestSessionResourceManagement::test_context_manager_cleanup
PASSED tests/test_resource_management.py::TestSessionResourceManagement::test_destructor_handles_subprocess_cleanup
PASSED tests/test_resource_management.py::TestSessionManagerResourceManagement::test_shutdown_cleans_all_resources
PASSED tests/test_resource_management.py::TestSessionManagerResourceManagement::test_destructor_sets_stop_flag
PASSED tests/test_resource_management.py::TestBoundedQueueResourceManagement::test_cleanup_method_clears_resources
PASSED tests/test_resource_management.py::TestBoundedQueueResourceManagement::test_destructor_clears_queue
PASSED tests/test_resource_management.py::TestRollingTextFileResourceManagement::test_context_manager_support
PASSED tests/test_resource_management.py::TestResourceLeakDetection::test_memory_usage_bounded
PASSED tests/test_resource_management.py::TestResourceLeakDetection::test_thread_cleanup_after_operations
PASSED tests/test_resource_management.py::TestWSProtocolManagerResourceCleanup::test_context_manager_cleanup
PASSED tests/test_resource_management.py::TestWSProtocolManagerResourceCleanup::test_close_method_cleanup
PASSED tests/test_resource_management.py::TestAbruptShutdownScenarios::test_session_cleanup_during_exception
PASSED tests/test_resource_management.py::TestAbruptShutdownScenarios::test_manager_cleanup_with_active_sessions
PASSED tests/test_safe_broadcast.py::test_safe_broadcast_no_loop_does_not_raise
PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_initialization
PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_with_env_config
PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_add_session_commit
PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_get_session_snapshot
PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_get_session_storage_stats
PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_with_sequence_tracking
PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_capping
PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_without_storage
PASSED tests/test_session_storage.py::TestStorageConfig::test_default_values
PASSED tests/test_session_storage.py::TestStorageConfig::test_validation_success
PASSED tests/test_session_storage.py::TestStorageConfig::test_validation_negative_commits
PASSED tests/test_session_storage.py::TestStorageConfig::test_validation_negative_size
PASSED tests/test_session_storage.py::TestStorageConfig::test_validation_negative_age
PASSED tests/test_session_storage.py::TestSessionCommit::test_default_values
PASSED tests/test_session_storage.py::TestSessionCommit::test_custom_values
PASSED tests/test_session_storage.py::TestSessionCommit::test_size_calculation
PASSED tests/test_session_storage.py::TestSessionStorage::test_initialization
PASSED tests/test_session_storage.py::TestSessionStorage::test_initialization_with_config
PASSED tests/test_session_storage.py::TestSessionStorage::test_add_commit_basic
PASSED tests/test_session_storage.py::TestSessionStorage::test_add_multiple_commits
PASSED tests/test_session_storage.py::TestSessionStorage::test_get_commits_all
PASSED tests/test_session_storage.py::TestSessionStorage::test_get_commits_with_limit
PASSED tests/test_session_storage.py::TestSessionStorage::test_get_commits_by_type
PASSED tests/test_session_storage.py::TestSessionStorage::test_get_commits_since_timestamp
PASSED tests/test_session_storage.py::TestSessionStorage::test_count_based_capping
PASSED tests/test_session_storage.py::TestSessionStorage::test_time_based_capping
PASSED tests/test_session_storage.py::TestSessionStorage::test_size_based_capping
PASSED tests/test_session_storage.py::TestSessionStorage::test_get_snapshot
PASSED tests/test_session_storage.py::TestSessionStorage::test_get_snapshot_with_limit
PASSED tests/test_session_storage.py::TestSessionStorage::test_clear_storage
PASSED tests/test_session_storage.py::TestSessionStorage::test_thread_safety
PASSED tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_snapshot_with_finalized_transcript
PASSED tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_resume_metrics_tracking
PASSED tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_resume_miss_tracking
PASSED tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_monotonic_timing_in_envelopes
PASSED tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_final_seq_range_in_snapshot
PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partial_event_processing
PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_final_event_processing
PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_duplicate_final_prevention
PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partials_after_final_ignored
PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partial_backpressure
PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_snapshot_generation
PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_stats_tracking
PASSED tests/test_streaming_asr.py::TestFakeStreamingASR::test_deterministic_behavior
PASSED tests/test_streaming_asr.py::TestFakeStreamingASR::test_snapshot_functionality
PASSED tests/test_streaming_asr.py::TestFakeStreamingASR::test_force_finalize
PASSED tests/test_streaming_asr.py::TestIntegration::test_streaming_asr_with_aggregator
PASSED tests/test_streaming_asr.py::TestAsyncBridge::test_async_bridge_with_event_loop
PASSED tests/test_streaming_asr.py::TestAsyncBridge::test_async_bridge_no_event_loop
PASSED tests/test_streaming_integration.py::TestStreamingIntegration::test_create_streaming_session
PASSED tests/test_streaming_integration.py::TestStreamingIntegration::test_asr_snapshot_endpoint
PASSED tests/test_streaming_integration.py::TestStreamingIntegration::test_regular_session_no_asr_snapshot
PASSED tests/test_streaming_integration.py::TestStreamingIntegration::test_websocket_streaming_events[asyncio]
PASSED tests/test_streaming_integration.py::TestStreamingIntegration::test_websocket_streaming_events[trio]
PASSED tests/test_streaming_integration.py::TestStreamingConfiguration::test_streaming_config_validation
PASSED tests/test_streaming_integration.py::TestStreamingConfiguration::test_model_id_validation
PASSED tests/test_streaming_integration.py::TestStreamingConfiguration::test_device_selection
PASSED tests/test_streaming_integration.py::TestSnapshotStatus::test_streaming_session_status_running
PASSED tests/test_streaming_integration.py::TestSnapshotStatus::test_streaming_session_status_stopped
PASSED tests/test_streaming_integration.py::TestErrorHygiene::test_metrics_error_no_exception_leak
PASSED tests/test_streaming_integration.py::TestErrorHygiene::test_snapshot_error_no_exception_leak
PASSED tests/test_structured_logging.py::TestDataRedactor::test_redact_file_paths
PASSED tests/test_structured_logging.py::TestDataRedactor::test_redact_sensitive_fields
PASSED tests/test_structured_logging.py::TestDataRedactor::test_nested_redaction
PASSED tests/test_structured_logging.py::TestStructuredLogger::test_basic_logging
PASSED tests/test_structured_logging.py::TestStructuredLogger::test_data_redaction
PASSED tests/test_structured_logging.py::TestStructuredLogger::test_create_logger_factory
PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_latency_recording
PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_throughput_recording
PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_counters_and_gauges
PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_timer_functionality
PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_timer_error_handling
PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_threshold_monitoring
PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_metrics_reset
PASSED tests/test_structured_logging.py::TestLogRetention::test_log_rotation_by_size
PASSED tests/test_structured_logging.py::TestLogRetention::test_log_rotation_keeps_max_files
PASSED tests/test_structured_logging.py::TestLogRetention::test_ci_logger_defaults
PASSED tests/test_structured_logging.py::TestLogRetention::test_cleanup_old_logs
PASSED tests/test_structured_logging.py::TestLogRetention::test_log_retention_env_vars
PASSED tests/test_text_io.py::test_rewrite_keeps_single_last_line
PASSED tests/test_text_io.py::test_append_enforces_max_lines
PASSED tests/test_text_io.py::test_utf8_and_trailing_newline
PASSED tests/test_text_io_concurrency.py::test_rolling_text_concurrent_appends_and_rewrites
PASSED tests/test_timed_outputs.py::test_vtt_srt_append_order
PASSED tests/test_units_extra.py::test_timestamp_formatting_helpers
PASSED tests/test_units_extra.py::test_dtype_kwargs_version_switch
PASSED tests/test_units_extra.py::test_pick_device_cpu
PASSED tests/test_units_extra.py::test_post_processing
PASSED tests/test_vtt_and_mt.py::test_vtt_monotonic
PASSED tests/test_vtt_and_mt.py::test_translator_bos_handling
PASSED tests/test_ws_integration.py::test_legacy_message_type_mapping
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_context_manager_cleanup
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_destructor_cancels_tasks
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_initialization
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_custom_configuration
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_add_connection_sends_welcome
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_remove_connection
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_client_hello_handling
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_client_ack_handling
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_domain_event_sending
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_flow_control_prevents_sending
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_request_handling
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_expired_error
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_heartbeat_sending
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_invalid_message_handling
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_unknown_message_type_handling
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_connection_failure_handling
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_session_cleanup_on_all_connections_failed
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_graceful_close
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_ack_spoof_protection
PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_with_gaps
PASSED tests/test_ws_types.py::TestWSEnvelope::test_minimal_envelope
PASSED tests/test_ws_types.py::TestWSEnvelope::test_full_envelope
PASSED tests/test_ws_types.py::TestWSEnvelope::test_auto_message_id_generation
PASSED tests/test_ws_types.py::TestWSEnvelope::test_no_auto_id_without_sid
PASSED tests/test_ws_types.py::TestWSEnvelope::test_json_serialization
PASSED tests/test_ws_types.py::TestDomainEventData::test_asr_partial_data
PASSED tests/test_ws_types.py::TestDomainEventData::test_asr_final_data
PASSED tests/test_ws_types.py::TestDomainEventData::test_mt_final_data
PASSED tests/test_ws_types.py::TestDomainEventData::test_status_data
PASSED tests/test_ws_types.py::TestControlMessages::test_client_hello
PASSED tests/test_ws_types.py::TestControlMessages::test_client_hello_with_resume
PASSED tests/test_ws_types.py::TestControlMessages::test_server_welcome
PASSED tests/test_ws_types.py::TestSessionState::test_session_initialization
PASSED tests/test_ws_types.py::TestSessionState::test_sequence_generation
PASSED tests/test_ws_types.py::TestSessionState::test_monotonic_time_calculation
PASSED tests/test_ws_types.py::TestSessionState::test_flow_control_limits
PASSED tests/test_ws_types.py::TestSessionState::test_replay_buffer_management
PASSED tests/test_ws_types.py::TestSessionState::test_replay_message_retrieval
PASSED tests/test_ws_types.py::TestSessionState::test_cumulative_ack_processing
PASSED tests/test_ws_types.py::TestSessionState::test_per_message_ack_processing
SKIPPED [1] ../home/guff/LoquiLex/tests/test_mt_integration.py:25: Skip MT integration tests in offline mode
SKIPPED [1] ../home/guff/LoquiLex/tests/test_mt_registry.py:82: Skip MT provider tests in offline mode
SKIPPED [1] ../home/guff/LoquiLex/tests/test_resilient_comms.py:169: System heartbeat causes infinite loop in tests
SKIPPED [1] ../home/guff/LoquiLex/tests/test_resilient_comms.py:215: Need to fix ReplayBuffer TTL setup
================ 226 passed, 4 skipped, 10 deselected in 21.08s ================
=== Pytest (e2e) ===
..........                                                               [100%]
10 passed, 230 deselected in 2.76s
=== DONE: CI-parity run completed successfully ===
`

Mon Sep 22 07:50:06 UTC 2025

## Conflict Resolution Report

- Result: No conflicts (merge reported up-to-date).
- Strategy: combine-first with ephemeral union attrs.
- Attrs cleanup: .git/MERGE_ATTRS removed

## Evidence & Verification

### Tool Versions


### Docker CI Path
- Used Make targets: docker-ci-build, docker-ci-run
- Image tag: loquilex-ci

## Final Results

- Status: READY — Docker CI parity succeeded (unit+e2e).
- Push: No changes to push (branch up-to-date).
- PR Update: Skipped gh PR edit due to API rate limit.

## Files Changed

- None (only gitignored deliverables updated).


### 2025-09-22T03:08-05:00 — Next PR runner (merge + CI)
**Mode:** Workspace-Only
**Network:** Offline (no model downloads)
**Secrets/CI:** Unchanged

- Configured git helpers: `rerere.enabled=true`, `rerere.autoUpdate=true`, `merge.conflictStyle=zdiff3`.
- Selected PR: #114 `copilot/fix-95` (oldest by updatedAt) via `gh pr list`.
- Prepared branch: `git fetch --all --prune && git checkout copilot/fix-95` (clean index).
- Ephemeral attributes: wrote `.git/MERGE_ATTRS` with union rules for docs/ignores/env/yml.
- Merge: `git -c core.attributesFile=.git/MERGE_ATTRS merge origin/main` → completed by `ort` without conflicts.

Conflict Resolution Report
- combine: docs/ignores/env/yml via union attributes (ephemeral).
- ours: default for code/logic changes.
- theirs: not needed; no workflow/meta conflicts.
- note: merge completed automatically; no manual edits required.

Docker CI parity
- Ran: `make docker-ci-test` (build + run).
- Build: succeeded; cached layers used; exit 0.
- Tests: Ruff/Black/mypy clean; unit/integration passed; e2e subset passed; overall success.

Finalize
- Committed note: `merge: sync with origin/main (combine-first); pass Docker CI`.
- Pushed: `git push origin HEAD`.
- PR updated with summary and CI results via `gh pr edit 114`.

- Resolved conflicts in loquilex/api/server.py (combined model defaults + hardware snapshot)
- NEW HEAD: 2261a76
[docker-ci] === Running CI in Docker (Dockerfile.ci) ===
[docker-ci] docker build -f Dockerfile.ci -t loquilex-ci .
[docker-ci] #0 building with "default" instance using docker driver
[docker-ci]
[docker-ci] #1 [internal] load build definition from Dockerfile.ci
[docker-ci] #1 transferring dockerfile: 838B done
[docker-ci] #1 DONE 0.0s
[docker-ci]
[docker-ci] #2 [internal] load metadata for docker.io/library/python:3.12-slim
[docker-ci] #2 DONE 0.0s
[docker-ci]
[docker-ci] #3 [internal] load .dockerignore
[docker-ci] #3 transferring context: 328B done
[docker-ci] #3 DONE 0.0s
[docker-ci]
[docker-ci] #4 [1/8] FROM docker.io/library/python:3.12-slim@sha256:abc799c7ee22b0d66f46c367643088a35e048bbabd81212d73c2323aed38c64f
[docker-ci] #4 resolve docker.io/library/python:3.12-slim@sha256:abc799c7ee22b0d66f46c367643088a35e048bbabd81212d73c2323aed38c64f 0.0s done
[docker-ci] #4 DONE 0.0s
[docker-ci]
[docker-ci] #5 [internal] load build context
[docker-ci] #5 ...
[docker-ci]
[docker-ci] #4 [1/8] FROM docker.io/library/python:3.12-slim@sha256:abc799c7ee22b0d66f46c367643088a35e048bbabd81212d73c2323aed38c64f
[docker-ci] #4 DONE 0.0s
[docker-ci]
[docker-ci] #5 [internal] load build context
[docker-ci] #5 transferring context: 2.79MB 1.2s done
[docker-ci] #5 DONE 1.3s
[docker-ci]
[docker-ci] #6 [5/8] COPY requirements.txt requirements-ci.txt requirements-dev.txt ./
[docker-ci] #6 CACHED
[docker-ci]
[docker-ci] #7 [6/8] RUN if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
[docker-ci] #7 CACHED
[docker-ci]
[docker-ci] #8 [2/8] RUN apt-get update && apt-get install -y --no-install-recommends     git build-essential &&     rm -rf /var/lib/apt/lists/*
[docker-ci] #8 CACHED
[docker-ci]
[docker-ci] #9 [3/8] RUN python -m venv /opt/venv
[docker-ci] #9 CACHED
[docker-ci]
[docker-ci] #10 [4/8] WORKDIR /app
[docker-ci] #10 CACHED
[docker-ci]
[docker-ci] #11 [7/8] RUN pip install --upgrade pip &&     pip install ruff black mypy pytest
[docker-ci] #11 CACHED
[docker-ci]
[docker-ci] #12 [8/8] COPY . .
[docker-ci] #12 DONE 6.2s
[docker-ci]
[docker-ci] #13 exporting to image
[docker-ci] #13 exporting layers
[docker-ci] #13 exporting layers 13.5s done
[docker-ci] #13 exporting manifest sha256:5434c36a3d3999d89a12c38e81a0c6d470e5b2cd7abb59ba3a43efd7b0b09c13
[docker-ci] #13 exporting manifest sha256:5434c36a3d3999d89a12c38e81a0c6d470e5b2cd7abb59ba3a43efd7b0b09c13 0.0s done
[docker-ci] #13 exporting config sha256:ee24448efe634a565c4511507ba5905b068bba52a067a24a972b3802db2358c3 done
[docker-ci] #13 exporting attestation manifest sha256:084b84932c300c6982788e5f0c42c5ade08b8560d0ebc86c20f834d012e19219 0.0s done
[docker-ci] #13 exporting manifest list sha256:f090e7b19b87673fadfe325641111dbc61218ac7a4927352dfb12e567393daca done
[docker-ci] #13 naming to docker.io/library/loquilex-ci:latest done
[docker-ci] #13 unpacking to docker.io/library/loquilex-ci:latest
[docker-ci] #13 unpacking to docker.io/library/loquilex-ci:latest 8.1s done
[docker-ci] #13 DONE 21.7s
[docker-ci] docker run --rm -v "/home/guff/LoquiLex":/app loquilex-ci ./scripts/ci-entrypoint.sh
[docker-ci] === Environment (offline flags) ===
[docker-ci] TRANSFORMERS_OFFLINE=1
[docker-ci] HF_HUB_DISABLE_TELEMETRY=1
[docker-ci] LX_OFFLINE=1
[docker-ci] HF_HUB_OFFLINE=1
[docker-ci] === Ruff ===
[docker-ci] All checks passed!
[docker-ci] === Black --check ===
[docker-ci] would reformat /app/loquilex/api/server.py
[docker-ci]
[docker-ci] Oh no! 💥 💔 💥
[docker-ci] 1 file would be reformatted, 110 files would be left unchanged.
[docker-ci] make: *** [Makefile:491: docker-ci] Error 1
EXIT:2
[docker-ci] === Running CI in Docker (Dockerfile.ci) ===
[docker-ci] docker build -f Dockerfile.ci -t loquilex-ci .
[docker-ci] #0 building with "default" instance using docker driver
[docker-ci]
[docker-ci] #1 [internal] load build definition from Dockerfile.ci
[docker-ci] #1 transferring dockerfile: 838B done
[docker-ci] #1 DONE 0.0s
[docker-ci]
[docker-ci] #2 [internal] load metadata for docker.io/library/python:3.12-slim
[docker-ci] #2 DONE 0.0s
[docker-ci]
[docker-ci] #3 [internal] load .dockerignore
[docker-ci] #3 transferring context: 328B done
[docker-ci] #3 DONE 0.0s
[docker-ci]
[docker-ci] #4 [1/8] FROM docker.io/library/python:3.12-slim@sha256:abc799c7ee22b0d66f46c367643088a35e048bbabd81212d73c2323aed38c64f
[docker-ci] #4 resolve docker.io/library/python:3.12-slim@sha256:abc799c7ee22b0d66f46c367643088a35e048bbabd81212d73c2323aed38c64f 0.0s done
[docker-ci] #4 DONE 0.0s
[docker-ci]
[docker-ci] #5 [internal] load build context
[docker-ci] #5 transferring context: 2.23MB 1.3s done
[docker-ci] #5 DONE 1.3s
[docker-ci]
[docker-ci] #6 [3/8] RUN python -m venv /opt/venv
[docker-ci] #6 CACHED
[docker-ci]
[docker-ci] #7 [2/8] RUN apt-get update && apt-get install -y --no-install-recommends     git build-essential &&     rm -rf /var/lib/apt/lists/*
[docker-ci] #7 CACHED
[docker-ci]
[docker-ci] #8 [4/8] WORKDIR /app
[docker-ci] #8 CACHED
[docker-ci]
[docker-ci] #9 [5/8] COPY requirements.txt requirements-ci.txt requirements-dev.txt ./
[docker-ci] #9 CACHED
[docker-ci]
[docker-ci] #10 [6/8] RUN if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
[docker-ci] #10 CACHED
[docker-ci]
[docker-ci] #11 [7/8] RUN pip install --upgrade pip &&     pip install ruff black mypy pytest
[docker-ci] #11 CACHED
[docker-ci]
[docker-ci] #12 [8/8] COPY . .
[docker-ci] #12 CACHED
[docker-ci]
[docker-ci] #13 exporting to image
[docker-ci] #13 exporting layers
[docker-ci] #13 exporting layers 13.5s done
[docker-ci] #13 exporting manifest sha256:8ad826276a54aa3ba357276884d36b3c426dffc243a11a738d30c7c5f1680ec3 0.0s done
[docker-ci] #13 exporting config sha256:83a196bc328c4e072d885dddf3bd2ae24298aea6911bcb5aed2bea5d1814f43e 0.0s done
[docker-ci] #13 exporting attestation manifest sha256:29cbcb00e18d4f9acb0ff012111e24d9f4f0a4b204d86e02d965952f69262071 0.0s done
[docker-ci] #13 exporting manifest list sha256:7d49cf249ca517b75f8b70400cb54e7ba3dd447d378cc42be780a590500006b4 0.0s done
[docker-ci] #13 naming to docker.io/library/loquilex-ci:latest done
[docker-ci] #13 unpacking to docker.io/library/loquilex-ci:latest
[docker-ci] #13 unpacking to docker.io/library/loquilex-ci:latest 8.1s done
[docker-ci] #13 DONE 21.7s
[docker-ci] docker run --rm -v "/home/guff/LoquiLex":/app loquilex-ci ./scripts/ci-entrypoint.sh
[docker-ci] === Environment (offline flags) ===
[docker-ci] TRANSFORMERS_OFFLINE=1
[docker-ci] HF_HUB_DISABLE_TELEMETRY=1
[docker-ci] LX_OFFLINE=1
[docker-ci] HF_HUB_OFFLINE=1
[docker-ci] === Ruff ===
[docker-ci] All checks passed!
[docker-ci] === Black --check ===
[docker-ci] All done! ✨ 🍰 ✨
[docker-ci] 111 files would be left unchanged.
[docker-ci] === MyPy (non-blocking) ===
[docker-ci] loquilex/cli/live_en_to_zh.py:424: note: By default the bodies of untyped functions are not checked, consider using --check-untyped-defs  [annotation-unchecked]
[docker-ci] Success: no issues found in 55 source files
[docker-ci] === Pytest (unit/integration, not e2e) ===
[docker-ci] ============================= test session starts ==============================
[docker-ci] platform linux -- Python 3.12.11, pytest-8.4.2, pluggy-1.6.0 -- /opt/venv/bin/python
[docker-ci] cachedir: .pytest_cache
[docker-ci] rootdir: /app
[docker-ci] configfile: pytest.ini
[docker-ci] testpaths: tests
[docker-ci] plugins: timeout-2.4.0, mock-3.15.0, anyio-4.10.0, deadfixtures-2.2.1, asyncio-1.2.0, cov-7.0.0
[docker-ci] timeout: 30.0s
[docker-ci] timeout method: thread
[docker-ci] timeout func_only: False
[docker-ci] asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
[docker-ci] collecting ... collected 275 items / 10 deselected / 265 selected
[docker-ci]
[docker-ci] tests/test_admin_cache.py::test_clear_cache_no_auth_client <- ../home/guff/LoquiLex/tests/test_admin_cache.py PASSED [  0%]
[docker-ci] tests/test_admin_cache.py::test_clear_cache_with_auth <- ../home/guff/LoquiLex/tests/test_admin_cache.py PASSED [  0%]
[docker-ci] tests/test_aggregator.py::test_aggregator_partial_debounce <- ../home/guff/LoquiLex/tests/test_aggregator.py PASSED [  1%]
[docker-ci] tests/test_aggregator.py::test_aggregator_force_finalize <- ../home/guff/LoquiLex/tests/test_aggregator.py PASSED [  1%]
[docker-ci] tests/test_api_hardware.py::TestHardwareEndpoint::test_hardware_snapshot_endpoint_success <- ../home/guff/LoquiLex/tests/test_api_hardware.py PASSED [  1%]
[docker-ci] tests/test_api_hardware.py::TestHardwareEndpoint::test_hardware_snapshot_endpoint_contains_threshold_info <- ../home/guff/LoquiLex/tests/test_api_hardware.py PASSED [  2%]
[docker-ci] tests/test_api_minimal_http.py::test_create_and_stop_minimal_session_http <- ../home/guff/LoquiLex/tests/test_api_minimal_http.py PASSED [  2%]
[docker-ci] tests/test_api_minimal_session.py::test_minimal_session_lifecycle <- ../home/guff/LoquiLex/tests/test_api_minimal_session.py PASSED [  3%]
[docker-ci] tests/test_api_model_endpoints.py::test_get_asr_models <- ../home/guff/LoquiLex/tests/test_api_model_endpoints.py PASSED [  3%]
[docker-ci] tests/test_api_model_endpoints.py::test_get_mt_models <- ../home/guff/LoquiLex/tests/test_api_model_endpoints.py PASSED [  3%]
[docker-ci] tests/test_api_model_endpoints.py::test_get_model_defaults <- ../home/guff/LoquiLex/tests/test_api_model_endpoints.py PASSED [  4%]
[docker-ci] tests/test_api_model_endpoints.py::test_update_model_defaults <- ../home/guff/LoquiLex/tests/test_api_model_endpoints.py PASSED [  4%]
[docker-ci] tests/test_api_model_endpoints.py::test_partial_update_model_defaults <- ../home/guff/LoquiLex/tests/test_api_model_endpoints.py PASSED [  4%]
[docker-ci] tests/test_api_model_endpoints.py::test_update_model_defaults_with_nulls <- ../home/guff/LoquiLex/tests/test_api_model_endpoints.py PASSED [  5%]
[docker-ci] tests/test_api_model_endpoints.py::test_mt_languages_endpoint <- ../home/guff/LoquiLex/tests/test_api_model_endpoints.py PASSED [  5%]
[docker-ci] tests/test_api_modules_import.py::test_import_api_modules_for_coverage <- ../home/guff/LoquiLex/tests/test_api_modules_import.py PASSED [  6%]
[docker-ci] tests/test_asr_metrics.py::TestLatencyMetrics::test_empty_metrics <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  6%]
[docker-ci] tests/test_asr_metrics.py::TestLatencyMetrics::test_single_measurement <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  6%]
[docker-ci] tests/test_asr_metrics.py::TestLatencyMetrics::test_multiple_measurements <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  7%]
[docker-ci] tests/test_asr_metrics.py::TestLatencyMetrics::test_bounded_recent_values <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  7%]
[docker-ci] tests/test_asr_metrics.py::TestASRMetrics::test_basic_metrics <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  7%]
[docker-ci] tests/test_asr_metrics.py::TestASRMetrics::test_asr_metrics_with_structured_logging <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  8%]
[docker-ci] tests/test_asr_metrics.py::TestASRMetrics::test_initialization <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  8%]
[docker-ci] tests/test_asr_metrics.py::TestASRMetrics::test_partial_event_tracking <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  9%]
[docker-ci] tests/test_asr_metrics.py::TestASRMetrics::test_final_event_tracking <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  9%]
[docker-ci] tests/test_asr_metrics.py::TestASRMetrics::test_eou_reason_counting <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [  9%]
[docker-ci] tests/test_asr_metrics.py::TestASRMetrics::test_summary_generation <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [ 10%]
[docker-ci] tests/test_asr_metrics.py::TestASRMetrics::test_performance_targets <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [ 10%]
[docker-ci] tests/test_asr_metrics.py::TestMetricsIntegration::test_aggregator_with_metrics <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [ 10%]
[docker-ci] tests/test_asr_metrics.py::TestMetricsIntegration::test_aggregator_without_metrics <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [ 11%]
[docker-ci] tests/test_asr_metrics.py::TestMetricsIntegration::test_metrics_in_stats <- ../home/guff/LoquiLex/tests/test_asr_metrics.py PASSED [ 11%]
[docker-ci] tests/test_bounded_queue.py::TestDropMetrics::test_initialization <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 12%]
[docker-ci] tests/test_bounded_queue.py::TestDropMetrics::test_record_drop <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 12%]
[docker-ci] tests/test_bounded_queue.py::TestDropMetrics::test_read_and_reset_recent <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 12%]
[docker-ci] tests/test_bounded_queue.py::TestBoundedQueue::test_initialization <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 13%]
[docker-ci] tests/test_bounded_queue.py::TestBoundedQueue::test_invalid_maxsize <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 13%]
[docker-ci] tests/test_bounded_queue.py::TestBoundedQueue::test_put_get_basic <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 13%]
[docker-ci] tests/test_bounded_queue.py::TestBoundedQueue::test_capacity_and_drop_oldest <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 14%]
[docker-ci] tests/test_bounded_queue.py::TestBoundedQueue::test_peek <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 14%]
[docker-ci] tests/test_bounded_queue.py::TestBoundedQueue::test_clear <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 15%]
[docker-ci] tests/test_bounded_queue.py::TestBoundedQueue::test_drain <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 15%]
[docker-ci] tests/test_bounded_queue.py::TestBoundedQueue::test_telemetry <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 15%]
[docker-ci] tests/test_bounded_queue.py::TestBoundedQueue::test_thread_safety_structure <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 16%]
[docker-ci] tests/test_bounded_queue.py::TestReplayBuffer::test_initialization <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 16%]
[docker-ci] tests/test_bounded_queue.py::TestReplayBuffer::test_add_message_with_seq <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 16%]
[docker-ci] tests/test_bounded_queue.py::TestReplayBuffer::test_get_messages_after <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 17%]
[docker-ci] tests/test_bounded_queue.py::TestReplayBuffer::test_ttl_cleanup <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 17%]
[docker-ci] tests/test_bounded_queue.py::TestReplayBuffer::test_ttl_disabled <- ../home/guff/LoquiLex/tests/test_bounded_queue.py PASSED [ 18%]
[docker-ci] tests/test_cli_integration_offline.py::test_wav_to_vtt_offline_with_fake_asr <- ../home/guff/LoquiLex/tests/test_cli_integration_offline.py PASSED [ 18%]
[docker-ci] tests/test_cli_integration_offline.py::test_vtt_to_zh_offline_with_fake_mt <- ../home/guff/LoquiLex/tests/test_cli_integration_offline.py PASSED [ 18%]
[docker-ci] tests/test_cli_integration_offline.py::test_output_boundary_respected <- ../home/guff/LoquiLex/tests/test_cli_integration_offline.py PASSED [ 19%]
[docker-ci] tests/test_cli_smoke.py::test_cli_runs_with_fake_capture_and_translator <- ../home/guff/LoquiLex/tests/test_cli_smoke.py PASSED [ 19%]
[docker-ci] tests/test_compat_versions.py::test_starlette_httpx_compat <- ../home/guff/LoquiLex/tests/test_compat_versions.py PASSED [ 20%]
[docker-ci] tests/test_config_env.py::test_env_overrides <- ../home/guff/LoquiLex/tests/test_config_env.py PASSED [ 20%]
[docker-ci] tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_seconds <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 20%]
[docker-ci] tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_milliseconds <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 21%]
[docker-ci] tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_minutes <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 21%]
[docker-ci] tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_hours <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 21%]
[docker-ci] tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_plain_number <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 22%]
[docker-ci] tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_invalid_value <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 22%]
[docker-ci] tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_no_env_var <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 23%]
[docker-ci] tests/test_config_parsing.py::TestConfigurationParsing::test_ws_protocol_config_with_time_suffixes <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 23%]
[docker-ci] tests/test_config_parsing.py::TestConfigurationParsing::test_ws_protocol_config_defaults <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 23%]
[docker-ci] tests/test_config_parsing.py::TestConfigurationParsing::test_complex_time_formats <- ../home/guff/LoquiLex/tests/test_config_parsing.py PASSED [ 24%]
[docker-ci] tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_resume_flow_no_duplicate_finals <- ../home/guff/LoquiLex/tests/test_e2e_resume_flow.py PASSED [ 24%]
[docker-ci] tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_ordering_guarantees_after_resume <- ../home/guff/LoquiLex/tests/test_e2e_resume_flow.py PASSED [ 24%]
[docker-ci] tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_resume_with_expired_window <- ../home/guff/LoquiLex/tests/test_e2e_resume_flow.py PASSED [ 25%]
[docker-ci] tests/test_hardware_detection.py::TestCPUInfo::test_get_cpu_info_basic <- ../home/guff/LoquiLex/tests/test_hardware_detection.py PASSED [ 25%]
[docker-ci] tests/test_hardware_detection.py::TestCPUInfo::test_cpu_threshold_warning <- ../home/guff/LoquiLex/tests/test_hardware_detection.py PASSED [ 26%]
[docker-ci] tests/test_hardware_detection.py::TestGPUInfo::test_get_gpu_info_no_torch <- ../home/guff/LoquiLex/tests/test_hardware_detection.py PASSED [ 26%]
[docker-ci] tests/test_hardware_detection.py::TestGPUInfo::test_get_gpu_info_with_mock_torch <- ../home/guff/LoquiLex/tests/test_hardware_detection.py PASSED [ 26%]
[docker-ci] tests/test_hardware_detection.py::TestAudioDevices::test_get_audio_devices_no_sounddevice <- ../home/guff/LoquiLex/tests/test_hardware_detection.py PASSED [ 27%]
[docker-ci] tests/test_hardware_detection.py::TestAudioDevices::test_get_audio_devices_with_mock_sounddevice <- ../home/guff/LoquiLex/tests/test_hardware_detection.py PASSED [ 27%]
[docker-ci] tests/test_hardware_detection.py::TestOverallScore::test_calculate_overall_score_excellent <- ../home/guff/LoquiLex/tests/test_hardware_detection.py PASSED [ 27%]
[docker-ci] tests/test_hardware_detection.py::TestOverallScore::test_calculate_overall_score_poor <- ../home/guff/LoquiLex/tests/test_hardware_detection.py PASSED [ 28%]
[docker-ci] tests/test_hardware_detection.py::TestHardwareSnapshot::test_get_hardware_snapshot <- ../home/guff/LoquiLex/tests/test_hardware_detection.py PASSED [ 28%]
[docker-ci] tests/test_hardware_detection.py::TestHardwareSnapshot::test_hardware_snapshot_to_dict <- ../home/guff/LoquiLex/tests/test_hardware_detection.py PASSED [ 29%]
[docker-ci] tests/test_live_outputs.py::test_partial_and_final_files <- ../home/guff/LoquiLex/tests/test_live_outputs.py PASSED [ 29%]
[docker-ci] tests/test_live_outputs.py::test_append_vtt_and_srt <- ../home/guff/LoquiLex/tests/test_live_outputs.py PASSED [ 29%]
[docker-ci] tests/test_model_defaults.py::test_model_defaults_serialization <- ../home/guff/LoquiLex/tests/test_model_defaults.py PASSED [ 30%]
[docker-ci] tests/test_model_defaults.py::test_model_defaults_from_dict_filtering <- ../home/guff/LoquiLex/tests/test_model_defaults.py PASSED [ 30%]
[docker-ci] tests/test_model_defaults.py::test_model_defaults_manager_basic <- ../home/guff/LoquiLex/tests/test_model_defaults.py PASSED [ 30%]
[docker-ci] tests/test_model_defaults.py::test_model_defaults_manager_updates <- ../home/guff/LoquiLex/tests/test_model_defaults.py PASSED [ 31%]
[docker-ci] tests/test_model_defaults.py::test_model_defaults_manager_convenience_methods <- ../home/guff/LoquiLex/tests/test_model_defaults.py PASSED [ 31%]
[docker-ci] tests/test_model_defaults.py::test_model_defaults_manager_env_fallback <- ../home/guff/LoquiLex/tests/test_model_defaults.py PASSED [ 32%]
[docker-ci] tests/test_model_defaults.py::test_model_defaults_manager_loading_existing <- ../home/guff/LoquiLex/tests/test_model_defaults.py PASSED [ 32%]
[docker-ci] tests/test_model_defaults.py::test_model_defaults_manager_invalid_updates <- ../home/guff/LoquiLex/tests/test_model_defaults.py PASSED [ 32%]
[docker-ci] tests/test_model_indexing.py::test_model_index_serialization <- ../home/guff/LoquiLex/tests/test_model_indexing.py PASSED [ 33%]
[docker-ci] tests/test_model_indexing.py::test_model_indexer_basic <- ../home/guff/LoquiLex/tests/test_model_indexing.py PASSED [ 33%]
[docker-ci] tests/test_model_indexing.py::test_model_indexer_refresh_logic <- ../home/guff/LoquiLex/tests/test_model_indexing.py PASSED [ 33%]
[docker-ci] tests/test_model_indexing.py::test_model_indexer_convenience_methods <- ../home/guff/LoquiLex/tests/test_model_indexing.py PASSED [ 34%]
[docker-ci] tests/test_model_indexing.py::test_model_indexer_background_worker <- ../home/guff/LoquiLex/tests/test_model_indexing.py PASSED [ 34%]
[docker-ci] tests/test_model_indexing.py::test_model_indexer_cache_loading <- ../home/guff/LoquiLex/tests/test_model_indexing.py PASSED [ 35%]
[docker-ci] tests/test_mt_integration.py::test_mt_integration_disabled <- ../home/guff/LoquiLex/tests/test_mt_integration.py PASSED [ 35%]
[docker-ci] tests/test_mt_integration.py::test_mt_integration_enabled <- ../home/guff/LoquiLex/tests/test_mt_integration.py SKIPPED [ 35%]
[docker-ci] tests/test_mt_integration.py::test_mt_integration_translate_and_emit <- ../home/guff/LoquiLex/tests/test_mt_integration.py PASSED [ 36%]
[docker-ci] tests/test_mt_integration.py::test_mt_integration_error_handling <- ../home/guff/LoquiLex/tests/test_mt_integration.py PASSED [ 36%]
[docker-ci] tests/test_mt_integration.py::test_mt_integration_status <- ../home/guff/LoquiLex/tests/test_mt_integration.py PASSED [ 36%]
[docker-ci] tests/test_mt_registry.py::test_registry_operations <- ../home/guff/LoquiLex/tests/test_mt_registry.py PASSED [ 37%]
[docker-ci] tests/test_mt_registry.py::test_registry_unknown_provider <- ../home/guff/LoquiLex/tests/test_mt_registry.py PASSED [ 37%]
[docker-ci] tests/test_mt_registry.py::test_mt_module_imports_without_heavy_deps <- ../home/guff/LoquiLex/tests/test_mt_registry.py PASSED [ 38%]
[docker-ci] tests/test_mt_registry.py::test_ct2_provider_registration <- ../home/guff/LoquiLex/tests/test_mt_registry.py SKIPPED [ 38%]
[docker-ci] tests/test_offline_env.py::test_offline_env_vars_set[HF_HUB_OFFLINE] <- ../home/guff/LoquiLex/tests/test_offline_env.py PASSED [ 38%]
[docker-ci] tests/test_offline_env.py::test_offline_env_vars_set[TRANSFORMERS_OFFLINE] <- ../home/guff/LoquiLex/tests/test_offline_env.py PASSED [ 39%]
[docker-ci] tests/test_offline_env.py::test_offline_env_vars_set[HF_HUB_DISABLE_TELEMETRY] <- ../home/guff/LoquiLex/tests/test_offline_env.py PASSED [ 39%]
[docker-ci] tests/test_offline_env.py::test_offline_env_vars_set[LX_OFFLINE] <- ../home/guff/LoquiLex/tests/test_offline_env.py PASSED [ 40%]
[docker-ci] tests/test_offline_isolation.py::test_offline_network_guard_blocks_external <- ../home/guff/LoquiLex/tests/test_offline_isolation.py PASSED [ 40%]
[docker-ci] tests/test_offline_isolation.py::test_offline_network_guard_allows_localhost <- ../home/guff/LoquiLex/tests/test_offline_isolation.py PASSED [ 40%]
[docker-ci] tests/test_offline_isolation.py::test_offline_env_vars_set <- ../home/guff/LoquiLex/tests/test_offline_isolation.py PASSED [ 41%]
[docker-ci] tests/test_resilient_comms.py::TestResilientComms::test_session_resume_within_window <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 41%]
[docker-ci] tests/test_resilient_comms.py::TestResilientComms::test_session_resume_expired <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 41%]
[docker-ci] tests/test_resilient_comms.py::TestResilientComms::test_session_resume_wrong_session_id <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 42%]
[docker-ci] tests/test_resilient_comms.py::TestResilientComms::test_session_resume_wrong_epoch <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 42%]
[docker-ci] tests/test_resilient_comms.py::TestResilientComms::test_system_heartbeat_telemetry <- ../home/guff/LoquiLex/tests/test_resilient_comms.py SKIPPED [ 43%]
[docker-ci] tests/test_resilient_comms.py::TestResilientComms::test_bounded_replay_buffer_integration <- ../home/guff/LoquiLex/tests/test_resilient_comms.py SKIPPED [ 43%]
[docker-ci] tests/test_resilient_comms.py::TestResilientComms::test_telemetry_summary <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 43%]
[docker-ci] tests/test_resilient_comms.py::TestResilientComms::test_queue_drop_notification <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 44%]
[docker-ci] tests/test_resilient_comms.py::TestResilientComms::test_environment_configuration <- ../home/guff/LoquiLex/tests/test_resilient_comms.py PASSED [ 44%]
[docker-ci] tests/test_resource_management.py::TestStreamingSessionResourceManagement::test_context_manager_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 44%]
[docker-ci] tests/test_resource_management.py::TestStreamingSessionResourceManagement::test_destructor_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 45%]
[docker-ci] tests/test_resource_management.py::TestSessionResourceManagement::test_context_manager_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 45%]
[docker-ci] tests/test_resource_management.py::TestSessionResourceManagement::test_destructor_handles_subprocess_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 46%]
[docker-ci] tests/test_resource_management.py::TestSessionManagerResourceManagement::test_shutdown_cleans_all_resources <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 46%]
[docker-ci] tests/test_resource_management.py::TestSessionManagerResourceManagement::test_destructor_sets_stop_flag <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 46%]
[docker-ci] tests/test_resource_management.py::TestBoundedQueueResourceManagement::test_cleanup_method_clears_resources <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 47%]
[docker-ci] tests/test_resource_management.py::TestBoundedQueueResourceManagement::test_destructor_clears_queue <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 47%]
[docker-ci] tests/test_resource_management.py::TestRollingTextFileResourceManagement::test_context_manager_support <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 47%]
[docker-ci] tests/test_resource_management.py::TestResourceLeakDetection::test_memory_usage_bounded <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 48%]
[docker-ci] tests/test_resource_management.py::TestResourceLeakDetection::test_thread_cleanup_after_operations <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 48%]
[docker-ci] tests/test_resource_management.py::TestWSProtocolManagerResourceCleanup::test_context_manager_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 49%]
[docker-ci] tests/test_resource_management.py::TestWSProtocolManagerResourceCleanup::test_close_method_cleanup <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 49%]
[docker-ci] tests/test_resource_management.py::TestAbruptShutdownScenarios::test_session_cleanup_during_exception <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 49%]
[docker-ci] tests/test_resource_management.py::TestAbruptShutdownScenarios::test_manager_cleanup_with_active_sessions <- ../home/guff/LoquiLex/tests/test_resource_management.py PASSED [ 50%]
[docker-ci] tests/test_safe_broadcast.py::test_safe_broadcast_no_loop_does_not_raise <- ../home/guff/LoquiLex/tests/test_safe_broadcast.py PASSED [ 50%]
[docker-ci] tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_initialization <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 50%]
[docker-ci] tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_with_env_config <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 51%]
[docker-ci] tests/test_session_state_integration.py::TestSessionStateIntegration::test_add_session_commit <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 51%]
[docker-ci] tests/test_session_state_integration.py::TestSessionStateIntegration::test_get_session_snapshot <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 52%]
[docker-ci] tests/test_session_state_integration.py::TestSessionStateIntegration::test_get_session_storage_stats <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 52%]
[docker-ci] tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_with_sequence_tracking <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 52%]
[docker-ci] tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_capping <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 53%]
[docker-ci] tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_without_storage <- ../home/guff/LoquiLex/tests/test_session_state_integration.py PASSED [ 53%]
[docker-ci] tests/test_session_storage.py::TestStorageConfig::test_default_values <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 53%]
[docker-ci] tests/test_session_storage.py::TestStorageConfig::test_validation_success <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 54%]
[docker-ci] tests/test_session_storage.py::TestStorageConfig::test_validation_negative_commits <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 54%]
[docker-ci] tests/test_session_storage.py::TestStorageConfig::test_validation_negative_size <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 55%]
[docker-ci] tests/test_session_storage.py::TestStorageConfig::test_validation_negative_age <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 55%]
[docker-ci] tests/test_session_storage.py::TestSessionCommit::test_default_values <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 55%]
[docker-ci] tests/test_session_storage.py::TestSessionCommit::test_custom_values <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 56%]
[docker-ci] tests/test_session_storage.py::TestSessionCommit::test_size_calculation <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 56%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_initialization <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 56%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_initialization_with_config <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 57%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_add_commit_basic <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 57%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_add_multiple_commits <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 58%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_get_commits_all <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 58%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_get_commits_with_limit <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 58%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_get_commits_by_type <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 59%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_get_commits_since_timestamp <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 59%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_count_based_capping <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 60%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_time_based_capping <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 60%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_size_based_capping <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 60%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_get_snapshot <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 61%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_get_snapshot_with_limit <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 61%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_clear_storage <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 61%]
[docker-ci] tests/test_session_storage.py::TestSessionStorage::test_thread_safety <- ../home/guff/LoquiLex/tests/test_session_storage.py PASSED [ 62%]
[docker-ci] tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_snapshot_with_finalized_transcript <- ../home/guff/LoquiLex/tests/test_snapshot_rehydrate.py PASSED [ 62%]
[docker-ci] tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_resume_metrics_tracking <- ../home/guff/LoquiLex/tests/test_snapshot_rehydrate.py PASSED [ 63%]
[docker-ci] tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_resume_miss_tracking <- ../home/guff/LoquiLex/tests/test_snapshot_rehydrate.py PASSED [ 63%]
[docker-ci] tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_monotonic_timing_in_envelopes <- ../home/guff/LoquiLex/tests/test_snapshot_rehydrate.py PASSED [ 63%]
[docker-ci] tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_final_seq_range_in_snapshot <- ../home/guff/LoquiLex/tests/test_snapshot_rehydrate.py PASSED [ 64%]
[docker-ci] tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partial_event_processing <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 64%]
[docker-ci] tests/test_streaming_asr.py::TestPartialFinalAggregator::test_final_event_processing <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 64%]
[docker-ci] tests/test_streaming_asr.py::TestPartialFinalAggregator::test_duplicate_final_prevention <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 65%]
[docker-ci] tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partials_after_final_ignored <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 65%]
[docker-ci] tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partial_backpressure <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 66%]
[docker-ci] tests/test_streaming_asr.py::TestPartialFinalAggregator::test_snapshot_generation <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 66%]
[docker-ci] tests/test_streaming_asr.py::TestPartialFinalAggregator::test_stats_tracking <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 66%]
[docker-ci] tests/test_streaming_asr.py::TestFakeStreamingASR::test_deterministic_behavior <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 67%]
[docker-ci] tests/test_streaming_asr.py::TestFakeStreamingASR::test_snapshot_functionality <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 67%]
[docker-ci] tests/test_streaming_asr.py::TestFakeStreamingASR::test_force_finalize <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 67%]
[docker-ci] tests/test_streaming_asr.py::TestIntegration::test_streaming_asr_with_aggregator <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 68%]
[docker-ci] tests/test_streaming_asr.py::TestAsyncBridge::test_async_bridge_with_event_loop <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 68%]
[docker-ci] tests/test_streaming_asr.py::TestAsyncBridge::test_async_bridge_no_event_loop <- ../home/guff/LoquiLex/tests/test_streaming_asr.py PASSED [ 69%]
[docker-ci] tests/test_streaming_integration.py::TestStreamingIntegration::test_create_streaming_session <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 69%]
[docker-ci] tests/test_streaming_integration.py::TestStreamingIntegration::test_asr_snapshot_endpoint <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 69%]
[docker-ci] tests/test_streaming_integration.py::TestStreamingIntegration::test_regular_session_no_asr_snapshot <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 70%]
[docker-ci] tests/test_streaming_integration.py::TestStreamingIntegration::test_websocket_streaming_events[asyncio] <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 70%]
[docker-ci] tests/test_streaming_integration.py::TestStreamingIntegration::test_websocket_streaming_events[trio] <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 70%]
[docker-ci] tests/test_streaming_integration.py::TestStreamingConfiguration::test_streaming_config_validation <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 71%]
[docker-ci] tests/test_streaming_integration.py::TestStreamingConfiguration::test_model_id_validation <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 71%]
[docker-ci] tests/test_streaming_integration.py::TestStreamingConfiguration::test_device_selection <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 72%]
[docker-ci] tests/test_streaming_integration.py::TestSnapshotStatus::test_streaming_session_status_running <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 72%]
[docker-ci] tests/test_streaming_integration.py::TestSnapshotStatus::test_streaming_session_status_stopped <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 72%]
[docker-ci] tests/test_streaming_integration.py::TestErrorHygiene::test_metrics_error_no_exception_leak <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 73%]
[docker-ci] tests/test_streaming_integration.py::TestErrorHygiene::test_snapshot_error_no_exception_leak <- ../home/guff/LoquiLex/tests/test_streaming_integration.py PASSED [ 73%]
[docker-ci] tests/test_structured_logging.py::TestDataRedactor::test_redact_file_paths <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 73%]
[docker-ci] tests/test_structured_logging.py::TestDataRedactor::test_redact_sensitive_fields <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 74%]
[docker-ci] tests/test_structured_logging.py::TestDataRedactor::test_nested_redaction <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 74%]
[docker-ci] tests/test_structured_logging.py::TestStructuredLogger::test_basic_logging <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 75%]
[docker-ci] tests/test_structured_logging.py::TestStructuredLogger::test_data_redaction <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 75%]
[docker-ci] tests/test_structured_logging.py::TestStructuredLogger::test_create_logger_factory <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 75%]
[docker-ci] tests/test_structured_logging.py::TestPerformanceMetrics::test_latency_recording <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 76%]
[docker-ci] tests/test_structured_logging.py::TestPerformanceMetrics::test_throughput_recording <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 76%]
[docker-ci] tests/test_structured_logging.py::TestPerformanceMetrics::test_counters_and_gauges <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 76%]
[docker-ci] tests/test_structured_logging.py::TestPerformanceMetrics::test_timer_functionality <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 77%]
[docker-ci] tests/test_structured_logging.py::TestPerformanceMetrics::test_timer_error_handling <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 77%]
[docker-ci] tests/test_structured_logging.py::TestPerformanceMetrics::test_threshold_monitoring <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 78%]
[docker-ci] tests/test_structured_logging.py::TestPerformanceMetrics::test_metrics_reset <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 78%]
[docker-ci] tests/test_structured_logging.py::TestLogRetention::test_log_rotation_by_size <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 78%]
[docker-ci] tests/test_structured_logging.py::TestLogRetention::test_log_rotation_keeps_max_files <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 79%]
[docker-ci] tests/test_structured_logging.py::TestLogRetention::test_ci_logger_defaults <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 79%]
[docker-ci] tests/test_structured_logging.py::TestLogRetention::test_cleanup_old_logs <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 80%]
[docker-ci] tests/test_structured_logging.py::TestLogRetention::test_log_retention_env_vars <- ../home/guff/LoquiLex/tests/test_structured_logging.py PASSED [ 80%]
[docker-ci] tests/test_text_io.py::test_rewrite_keeps_single_last_line <- ../home/guff/LoquiLex/tests/test_text_io.py PASSED [ 80%]
[docker-ci] tests/test_text_io.py::test_append_enforces_max_lines <- ../home/guff/LoquiLex/tests/test_text_io.py PASSED [ 81%]
[docker-ci] tests/test_text_io.py::test_utf8_and_trailing_newline <- ../home/guff/LoquiLex/tests/test_text_io.py PASSED [ 81%]
[docker-ci] tests/test_text_io_concurrency.py::test_rolling_text_concurrent_appends_and_rewrites <- ../home/guff/LoquiLex/tests/test_text_io_concurrency.py PASSED [ 81%]
[docker-ci] tests/test_timed_outputs.py::test_vtt_srt_append_order <- ../home/guff/LoquiLex/tests/test_timed_outputs.py PASSED [ 82%]
[docker-ci] tests/test_units_extra.py::test_timestamp_formatting_helpers <- ../home/guff/LoquiLex/tests/test_units_extra.py PASSED [ 82%]
[docker-ci] tests/test_units_extra.py::test_dtype_kwargs_version_switch <- ../home/guff/LoquiLex/tests/test_units_extra.py PASSED [ 83%]
[docker-ci] tests/test_units_extra.py::test_pick_device_cpu <- ../home/guff/LoquiLex/tests/test_units_extra.py PASSED [ 83%]
[docker-ci] tests/test_units_extra.py::test_post_processing <- ../home/guff/LoquiLex/tests/test_units_extra.py PASSED [ 83%]
[docker-ci] tests/test_vtt_and_mt.py::test_vtt_monotonic <- ../home/guff/LoquiLex/tests/test_vtt_and_mt.py PASSED [ 84%]
[docker-ci] tests/test_vtt_and_mt.py::test_translator_bos_handling <- ../home/guff/LoquiLex/tests/test_vtt_and_mt.py PASSED [ 84%]
[docker-ci] tests/test_ws_integration.py::test_legacy_message_type_mapping <- ../home/guff/LoquiLex/tests/test_ws_integration.py PASSED [ 84%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_context_manager_cleanup <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 85%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_destructor_cancels_tasks <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 85%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_initialization <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 86%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_custom_configuration <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 86%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_add_connection_sends_welcome <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 86%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_remove_connection <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 87%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_client_hello_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 87%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_client_ack_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 87%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_domain_event_sending <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 88%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_flow_control_prevents_sending <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 88%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_request_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 89%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_expired_error <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 89%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_heartbeat_sending <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 89%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_invalid_message_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 90%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_unknown_message_type_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 90%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_connection_failure_handling <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 90%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_session_cleanup_on_all_connections_failed <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 91%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_graceful_close <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 91%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_ack_spoof_protection <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 92%]
[docker-ci] tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_with_gaps <- ../home/guff/LoquiLex/tests/test_ws_protocol.py PASSED [ 92%]
[docker-ci] tests/test_ws_types.py::TestWSEnvelope::test_minimal_envelope <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 92%]
[docker-ci] tests/test_ws_types.py::TestWSEnvelope::test_full_envelope <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 93%]
[docker-ci] tests/test_ws_types.py::TestWSEnvelope::test_auto_message_id_generation <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 93%]
[docker-ci] tests/test_ws_types.py::TestWSEnvelope::test_no_auto_id_without_sid <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 93%]
[docker-ci] tests/test_ws_types.py::TestWSEnvelope::test_json_serialization <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 94%]
[docker-ci] tests/test_ws_types.py::TestDomainEventData::test_asr_partial_data <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 94%]
[docker-ci] tests/test_ws_types.py::TestDomainEventData::test_asr_final_data <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 95%]
[docker-ci] tests/test_ws_types.py::TestDomainEventData::test_mt_final_data <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 95%]
[docker-ci] tests/test_ws_types.py::TestDomainEventData::test_status_data <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 95%]
[docker-ci] tests/test_ws_types.py::TestControlMessages::test_client_hello <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 96%]
[docker-ci] tests/test_ws_types.py::TestControlMessages::test_client_hello_with_resume <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 96%]
[docker-ci] tests/test_ws_types.py::TestControlMessages::test_server_welcome <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 96%]
[docker-ci] tests/test_ws_types.py::TestSessionState::test_session_initialization <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 97%]
[docker-ci] tests/test_ws_types.py::TestSessionState::test_sequence_generation <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 97%]
[docker-ci] tests/test_ws_types.py::TestSessionState::test_monotonic_time_calculation <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 98%]
[docker-ci] tests/test_ws_types.py::TestSessionState::test_flow_control_limits <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 98%]
[docker-ci] tests/test_ws_types.py::TestSessionState::test_replay_buffer_management <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 98%]
[docker-ci] tests/test_ws_types.py::TestSessionState::test_replay_message_retrieval <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 99%]
[docker-ci] tests/test_ws_types.py::TestSessionState::test_cumulative_ack_processing <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [ 99%]
[docker-ci] tests/test_ws_types.py::TestSessionState::test_per_message_ack_processing <- ../home/guff/LoquiLex/tests/test_ws_types.py PASSED [100%]
[docker-ci]
[docker-ci] ==================================== PASSES ====================================
[docker-ci] __________________ test_create_and_stop_minimal_session_http ___________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534390.4344962,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"session_manager","session_id":"86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0","session_time":2.3167405128479004,"message":"Starting session","config":{"name":"session","asr_model_id":"fake-small","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0
[docker-ci] {"timestamp":1758534390.4373863,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"asr_metrics","session_id":"86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0","session_time":0.0007679462432861328,"message":"ASR metrics initialized","stream_id":"86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0"}
[docker-ci] {"timestamp":1758534390.439823,"iso_timestamp":"2025-09-22T09:46:30Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":2.322096109390259,"message":"Metric recorded: session_startup_86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0","metric_type":"latency","metric_name":"session_startup_86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0","metric_value":3.847837448120117}
[docker-ci] {"timestamp":1758534390.4408257,"iso_timestamp":"2025-09-22T09:46:30Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":2.3230628967285156,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":1.0,"increment":1.0}
[docker-ci] {"timestamp":1758534390.4418118,"iso_timestamp":"2025-09-22T09:46:30Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":2.324049472808838,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534390.4429064,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"session_manager","session_id":"86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0","session_time":2.3252034187316895,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.847837448120117,"total_sessions":1,"run_dir":"loquilex/out/86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0"}
[docker-ci] {"timestamp":1758534390.4559436,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"asr_metrics","session_id":"86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0","session_time":0.019232749938964844,"message":"ASR event: partial","event_type":"partial","stream_id":"86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0","session_duration":0.019355542997800512,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg170d0bd9"}
[docker-ci] {"timestamp":1758534390.4610207,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"session_manager","session_id":"86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0","session_time":2.343248128890991,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534390.5573077,"iso_timestamp":"2025-09-22T09:46:30Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":2.439549207687378,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":1.0,"increment":1.0}
[docker-ci] {"timestamp":1758534390.5588746,"iso_timestamp":"2025-09-22T09:46:30Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":2.4413490295410156,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534390.5601132,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"session_manager","session_id":"86ab1493-ccc9-4b7c-bfb8-52bbcb0d77b0","session_time":2.4423491954803467,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] ________________________ test_minimal_session_lifecycle ________________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534390.6505055,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.0004496574401855469,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
[docker-ci] {"timestamp":1758534390.6531649,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"session_manager","session_id":"bc43b9d0-89da-4bf0-b5bd-290598bf8961","session_time":0.0030879974365234375,"message":"Starting session","config":{"name":"test","asr_model_id":"fake-small","mt_enabled":false,"dest_lang":"zh","device":"cpu","vad":false,"beams":1,"pause_flush_sec":0.2,"segment_max_sec":2.0,"partial_word_cap":10,"save_audio":"no","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=bc43b9d0-89da-4bf0-b5bd-290598bf8961
[docker-ci] {"timestamp":1758534390.6551006,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"asr_metrics","session_id":"bc43b9d0-89da-4bf0-b5bd-290598bf8961","session_time":0.0005838871002197266,"message":"ASR metrics initialized","stream_id":"bc43b9d0-89da-4bf0-b5bd-290598bf8961"}
[docker-ci] {"timestamp":1758534390.6570072,"iso_timestamp":"2025-09-22T09:46:30Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.006935596466064453,"message":"Metric recorded: session_startup_bc43b9d0-89da-4bf0-b5bd-290598bf8961","metric_type":"latency","metric_name":"session_startup_bc43b9d0-89da-4bf0-b5bd-290598bf8961","metric_value":2.869129180908203}
[docker-ci] {"timestamp":1758534390.6577613,"iso_timestamp":"2025-09-22T09:46:30Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.007710695266723633,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":1.0,"increment":1.0}
[docker-ci] {"timestamp":1758534390.6586537,"iso_timestamp":"2025-09-22T09:46:30Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.008581876754760742,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534390.6595416,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"session_manager","session_id":"bc43b9d0-89da-4bf0-b5bd-290598bf8961","session_time":0.00947117805480957,"message":"Session started successfully","session_type":"streaming","startup_time_ms":2.869129180908203,"total_sessions":1,"run_dir":"loquilex/out/bc43b9d0-89da-4bf0-b5bd-290598bf8961"}
[docker-ci] {"timestamp":1758534390.6602829,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"session_manager","session_id":"bc43b9d0-89da-4bf0-b5bd-290598bf8961","session_time":0.010206937789916992,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534390.7616293,"iso_timestamp":"2025-09-22T09:46:30Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.11158180236816406,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":1.0,"increment":1.0}
[docker-ci] {"timestamp":1758534390.7624516,"iso_timestamp":"2025-09-22T09:46:30Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.11237215995788574,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534390.762976,"iso_timestamp":"2025-09-22T09:46:30Z","level":"info","component":"session_manager","session_id":"bc43b9d0-89da-4bf0-b5bd-290598bf8961","session_time":0.11295032501220703,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] ______________________ TestASRMetrics.test_basic_metrics _______________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534391.7823212,"iso_timestamp":"2025-09-22T09:46:31Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0008387565612792969,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534391.7837768,"iso_timestamp":"2025-09-22T09:46:31Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0023145675659179688,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0020954079991497565,"text_length":5,"word_count":0,"seq":null,"segment_id":"seg1"}
[docker-ci] {"timestamp":1758534391.7858815,"iso_timestamp":"2025-09-22T09:46:31Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.004590034484863281,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":1.5951880013744812,"segment_id":"seg1","eou_reason":"silence"}
[docker-ci] {"timestamp":1758534391.7877042,"iso_timestamp":"2025-09-22T09:46:31Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.006253242492675781,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.005835888998262817,"text_length":11,"word_count":0,"eou_reason":"silence","segment_duration_ms":1.5951880013744812,"segment_id":"seg1"}
[docker-ci] ______________________ TestASRMetrics.test_initialization ______________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534391.9125028,"iso_timestamp":"2025-09-22T09:46:31Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0005097389221191406,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] __________________ TestASRMetrics.test_partial_event_tracking __________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534391.9540932,"iso_timestamp":"2025-09-22T09:46:31Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0007836818695068359,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:31Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":-1758533391.9534543,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0518221429992991,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg1"}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:31Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":-1758533391.9534543,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":99.99999999854481,"segment_id":"seg1","text_length":11}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:31Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":-1758533391.9534543,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.1518221430014819,"text_length":11,"word_count":1,"seq":2,"segment_id":"seg1"}
[docker-ci] ___________________ TestASRMetrics.test_final_event_tracking ___________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534391.9987078,"iso_timestamp":"2025-09-22T09:46:31Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004792213439941406,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":-1758533391.9983225,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.05117584499748773,"text_length":5,"word_count":0,"seq":1,"segment_id":"seg1"}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:32Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":-1758533391.9983225,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":99.99999999854481,"segment_id":"seg1","eou_reason":"punctuation"}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":-1758533391.9983225,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.15117584499967052,"text_length":12,"word_count":1,"eou_reason":"punctuation","segment_duration_ms":99.99999999854481,"segment_id":"seg1"}
[docker-ci] ___________________ TestASRMetrics.test_eou_reason_counting ____________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534392.0468185,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004715919494628906,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534392.0477958,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0014481544494628906,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0012321599970164243,"text_length":6,"word_count":0,"eou_reason":"punctuation","segment_duration_ms":null,"segment_id":"seg0"}
[docker-ci] {"timestamp":1758534392.0488064,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.00244903564453125,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.002285203998326324,"text_length":6,"word_count":0,"eou_reason":"silence","segment_duration_ms":null,"segment_id":"seg1"}
[docker-ci] {"timestamp":1758534392.0497203,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0033631324768066406,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0032158879985217936,"text_length":6,"word_count":0,"eou_reason":"timeout","segment_duration_ms":null,"segment_id":"seg2"}
[docker-ci] {"timestamp":1758534392.0506222,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.004267692565917969,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.004130378998524975,"text_length":6,"word_count":0,"eou_reason":"punctuation","segment_duration_ms":null,"segment_id":"seg3"}
[docker-ci] ____________________ TestASRMetrics.test_summary_generation ____________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534392.0905771,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004363059997558594,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534392.0913906,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0012483596801757812,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.001061918999766931,"text_length":5,"word_count":0,"seq":1,"segment_id":"seg1"}
[docker-ci] {"timestamp":1758534392.0923853,"iso_timestamp":"2025-09-22T09:46:32Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0022437572479248047,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":0.9953230000974145,"segment_id":"seg1","eou_reason":"punctuation"}
[docker-ci] {"timestamp":1758534392.0932162,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.003076791763305664,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0029031800004304387,"text_length":12,"word_count":0,"eou_reason":"punctuation","segment_duration_ms":0.9953230000974145,"segment_id":"seg1"}
[docker-ci] ___________________ TestASRMetrics.test_performance_targets ____________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.20000000000004547,"text_length":5,"word_count":0,"seq":1,"segment_id":"seg1"}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:32Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":199.9999999999318,"segment_id":"seg1","text_length":11}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.39999999999997726,"text_length":11,"word_count":0,"seq":2,"segment_id":"seg1"}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:32Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":200.00000000004547,"segment_id":"seg1","eou_reason":"punctuation"}
[docker-ci] {"timestamp":1000.0,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.6000000000000227,"text_length":12,"word_count":0,"eou_reason":"punctuation","segment_duration_ms":399.99999999997726,"segment_id":"seg1"}
[docker-ci] _____________ TestMetricsIntegration.test_aggregator_with_metrics ______________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534392.2158136,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0011649131774902344,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534392.2189047,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.004294395446777344,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0037746540001535323,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg1"}
[docker-ci] {"timestamp":1758534392.2216482,"iso_timestamp":"2025-09-22T09:46:32Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.006962299346923828,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":2.7230179985053837,"segment_id":"seg1","eou_reason":"punctuation"}
[docker-ci] {"timestamp":1758534392.2238877,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.009215116500854492,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.008431924998149043,"text_length":12,"word_count":1,"eou_reason":"punctuation","segment_duration_ms":2.7230179985053837,"segment_id":"seg1"}
[docker-ci] _________________ TestMetricsIntegration.test_metrics_in_stats _________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534392.3254626,"iso_timestamp":"2025-09-22T09:46:32Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004553794860839844,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] ____________________ test_wav_to_vtt_offline_with_fake_asr _____________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] [asr] device=cpu model=small.en compute=int8_float32
[docker-ci] [cli] wrote /tmp/pytest-of-root/pytest-0/test_wav_to_vtt_offline_with_f0/a.vtt (2 cues)
[docker-ci] _____________________ test_vtt_to_zh_offline_with_fake_mt ______________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] [cli] wrote /tmp/pytest-of-root/pytest-0/test_vtt_to_zh_offline_with_fa0/zh.txt and /tmp/pytest-of-root/pytest-0/test_vtt_to_zh_offline_with_fa0/zh.srt (2 cues)
[docker-ci] ________________ test_cli_runs_with_fake_capture_and_translator ________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] EN ≫ Starting service
[docker-ci] ZH* ≫ [zh-draft]Starting service
[docker-ci] [asr] device=cpu dtype=float32 model=small.en compute=int8_float32
[docker-ci] VU 0.0000 0.0000 0.0000
[docker-ci] EN ≫ hello world
[docker-ci] ZH* ≫ [zh-draft]hello world
[docker-ci] [cli] Ready — start speaking now (capturing mic)… for 1s (timer starts now; Ctrl+C to stop early)
[docker-ci] [cli] run complete
[docker-ci] _________________ test_model_defaults_manager_invalid_updates __________________
[docker-ci] ------------------------------ Captured log call -------------------------------
[docker-ci] WARNING  loquilex.config.model_defaults:model_defaults.py:123 Unknown default field: invalid_field
[docker-ci] ___ TestSessionManagerResourceManagement.test_shutdown_cleans_all_resources ____
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534401.040534,"iso_timestamp":"2025-09-22T09:46:41Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.0004508495330810547,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
[docker-ci] {"timestamp":1758534401.0552597,"iso_timestamp":"2025-09-22T09:46:41Z","level":"info","component":"session_manager","session_id":"test_session","session_time":0.015170812606811523,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534401.0616877,"iso_timestamp":"2025-09-22T09:46:41Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.021592140197753906,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":1.0,"increment":1.0}
[docker-ci] {"timestamp":1758534401.062541,"iso_timestamp":"2025-09-22T09:46:41Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.022450685501098633,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534401.063261,"iso_timestamp":"2025-09-22T09:46:41Z","level":"info","component":"session_manager","session_id":"test_session","session_time":0.023163318634033203,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] _____ TestSessionManagerResourceManagement.test_destructor_sets_stop_flag ______
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534401.1526427,"iso_timestamp":"2025-09-22T09:46:41Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.0004112720489501953,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
[docker-ci] ____ TestAbruptShutdownScenarios.test_manager_cleanup_with_active_sessions _____
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534401.8774555,"iso_timestamp":"2025-09-22T09:46:41Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.0005917549133300781,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
[docker-ci] {"timestamp":1758534401.8918781,"iso_timestamp":"2025-09-22T09:46:41Z","level":"info","component":"session_manager","session_id":"session1","session_time":0.01488351821899414,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534401.898651,"iso_timestamp":"2025-09-22T09:46:41Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.0216522216796875,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":1.0,"increment":1.0}
[docker-ci] {"timestamp":1758534401.8995714,"iso_timestamp":"2025-09-22T09:46:41Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.022576093673706055,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534401.9003453,"iso_timestamp":"2025-09-22T09:46:41Z","level":"info","component":"session_manager","session_id":"session1","session_time":0.023347854614257812,"message":"Session stopped successfully","total_sessions":1}
[docker-ci] {"timestamp":1758534401.9010968,"iso_timestamp":"2025-09-22T09:46:41Z","level":"info","component":"session_manager","session_id":"session2","session_time":0.0240936279296875,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534401.9092884,"iso_timestamp":"2025-09-22T09:46:41Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.032325029373168945,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":2.0,"increment":1.0}
[docker-ci] {"timestamp":1758534401.9102807,"iso_timestamp":"2025-09-22T09:46:41Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":0.03328585624694824,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534401.910952,"iso_timestamp":"2025-09-22T09:46:41Z","level":"info","component":"session_manager","session_id":"session2","session_time":0.03399252891540527,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] __________________ test_safe_broadcast_no_loop_does_not_raise __________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534401.9919097,"iso_timestamp":"2025-09-22T09:46:41Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.0004284381866455078,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
[docker-ci] ___________ TestPartialFinalAggregator.test_partial_event_processing ___________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534403.7482774,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0013720989227294922,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534403.7503579,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0031058788299560547,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0028348259984340984,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg1"}
[docker-ci] ____________ TestPartialFinalAggregator.test_final_event_processing ____________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534403.8251371,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0005483627319335938,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534403.8263078,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0017583370208740234,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0014359630004037172,"text_length":12,"word_count":2,"eou_reason":"punctuation","segment_duration_ms":null,"segment_id":"seg1"}
[docker-ci] __________ TestPartialFinalAggregator.test_duplicate_final_prevention __________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534403.8803487,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004951953887939453,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534403.8814692,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0016493797302246094,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0013520909997168928,"text_length":12,"word_count":1,"eou_reason":"punctuation","segment_duration_ms":null,"segment_id":"seg1"}
[docker-ci] _________ TestPartialFinalAggregator.test_partials_after_final_ignored _________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534403.9248142,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0005505084991455078,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534403.9257739,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0015168190002441406,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0013595809978141915,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg1"}
[docker-ci] {"timestamp":1758534403.927037,"iso_timestamp":"2025-09-22T09:46:43Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0027811527252197266,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":1.1332760004734155,"segment_id":"seg1","eou_reason":"punctuation"}
[docker-ci] {"timestamp":1758534403.9281242,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.003874063491821289,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0035758300000452437,"text_length":12,"word_count":1,"eou_reason":"punctuation","segment_duration_ms":1.1332760004734155,"segment_id":"seg1"}
[docker-ci] _____________ TestPartialFinalAggregator.test_partial_backpressure _____________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534403.9703472,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.00045490264892578125,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534403.9713376,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0014536380767822266,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0012851430001319386,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg0"}
[docker-ci] {"timestamp":1758534403.972485,"iso_timestamp":"2025-09-22T09:46:43Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.002597332000732422,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":1.1388310012989677,"segment_id":"seg1","text_length":5}
[docker-ci] {"timestamp":1758534403.9733496,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0034635066986083984,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.003341088999150088,"text_length":5,"word_count":1,"seq":2,"segment_id":"seg1"}
[docker-ci] {"timestamp":1758534403.974506,"iso_timestamp":"2025-09-22T09:46:43Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0046808719635009766,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":1.977757998247398,"segment_id":"seg2","text_length":5}
[docker-ci] {"timestamp":1758534403.976056,"iso_timestamp":"2025-09-22T09:46:43Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.006234645843505859,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.005823154999234248,"text_length":5,"word_count":1,"seq":3,"segment_id":"seg2"}
[docker-ci] _____________ TestPartialFinalAggregator.test_snapshot_generation ______________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534404.022505,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0004620552062988281,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534404.023615,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0015821456909179688,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0013491979989339598,"text_length":12,"word_count":1,"eou_reason":"silence","segment_duration_ms":null,"segment_id":"final_seg0"}
[docker-ci] {"timestamp":1758534404.0248194,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0027801990509033203,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.00255317699702573,"text_length":12,"word_count":1,"eou_reason":"silence","segment_duration_ms":null,"segment_id":"final_seg1"}
[docker-ci] {"timestamp":1758534404.0259125,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0038743019104003906,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.003724833997694077,"text_length":15,"word_count":1,"seq":3,"segment_id":"live_seg"}
[docker-ci] ________________ TestPartialFinalAggregator.test_stats_tracking ________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534404.070647,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0006015300750732422,"message":"ASR metrics initialized","stream_id":"test_stream"}
[docker-ci] {"timestamp":1758534404.0718398,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.0017893314361572266,"message":"ASR event: partial","event_type":"partial","stream_id":"test_stream","session_duration":0.0016547049999644514,"text_length":5,"word_count":1,"seq":1,"segment_id":"seg1"}
[docker-ci] {"timestamp":1758534404.0732315,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"asr_metrics","session_id":"test_stream","session_time":0.0031883716583251953,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":1.1761249988921918,"segment_id":"seg2","eou_reason":"punctuation"}
[docker-ci] {"timestamp":1758534404.0744112,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"test_stream","session_time":0.004357814788818359,"message":"ASR event: final","event_type":"final","stream_id":"test_stream","session_duration":0.0041133720005746,"text_length":6,"word_count":1,"eou_reason":"punctuation","segment_duration_ms":1.1761249988921918,"segment_id":"seg2"}
[docker-ci] _______________ TestFakeStreamingASR.test_deterministic_behavior _______________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] [FakeStreamingASR] Initialized: stream_id=test_stream
[docker-ci] _______________ TestFakeStreamingASR.test_snapshot_functionality _______________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] [FakeStreamingASR] Initialized: stream_id=test_stream
[docker-ci] ___________________ TestFakeStreamingASR.test_force_finalize ___________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] [FakeStreamingASR] Initialized: stream_id=test_stream
[docker-ci] ______________ TestIntegration.test_streaming_asr_with_aggregator ______________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] [FakeStreamingASR] Initialized: stream_id=integration_test
[docker-ci] {"timestamp":1758534404.274868,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"integration_test","session_time":0.00047588348388671875,"message":"ASR metrics initialized","stream_id":"integration_test"}
[docker-ci] {"timestamp":1758534404.276201,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"integration_test","session_time":0.0018131732940673828,"message":"ASR event: partial","event_type":"partial","stream_id":"integration_test","session_duration":0.001606796999112703,"text_length":11,"word_count":2,"seq":1,"segment_id":"segca148da3"}
[docker-ci] {"timestamp":1758534404.2773607,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"asr_metrics","session_id":"integration_test","session_time":0.002968311309814453,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":1.1675189998641144,"segment_id":"segca148da3","text_length":16}
[docker-ci] {"timestamp":1758534404.2783115,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"integration_test","session_time":0.00391840934753418,"message":"ASR event: partial","event_type":"partial","stream_id":"integration_test","session_duration":0.0037497949997487012,"text_length":16,"word_count":3,"seq":2,"segment_id":"segca148da3"}
[docker-ci] {"timestamp":1758534404.279505,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"asr_metrics","session_id":"integration_test","session_time":0.005120754241943359,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":2.1636509991367348,"segment_id":"segca148da3","text_length":19}
[docker-ci] {"timestamp":1758534404.2805974,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"integration_test","session_time":0.006206512451171875,"message":"ASR event: partial","event_type":"partial","stream_id":"integration_test","session_duration":0.006059444000129588,"text_length":19,"word_count":4,"seq":3,"segment_id":"segca148da3"}
[docker-ci] {"timestamp":1758534404.2819226,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"asr_metrics","session_id":"integration_test","session_time":0.007532835006713867,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":2.3106360022211447,"segment_id":"segca148da3","eou_reason":"punctuation"}
[docker-ci] {"timestamp":1758534404.2829692,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"integration_test","session_time":0.008599281311035156,"message":"ASR event: final","event_type":"final","stream_id":"integration_test","session_duration":0.00833993299966096,"text_length":27,"word_count":6,"eou_reason":"punctuation","segment_duration_ms":5.641806001221994,"segment_id":"segca148da3"}
[docker-ci] ____________ TestStreamingIntegration.test_create_streaming_session ____________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534404.425874,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"session_manager","session_id":"ff19a42c-8f89-4821-a855-6d364aafb2bb","session_time":16.308133125305176,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=ff19a42c-8f89-4821-a855-6d364aafb2bb
[docker-ci] {"timestamp":1758534404.4287498,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"ff19a42c-8f89-4821-a855-6d364aafb2bb","session_time":0.0007412433624267578,"message":"ASR metrics initialized","stream_id":"ff19a42c-8f89-4821-a855-6d364aafb2bb"}
[docker-ci] {"timestamp":1758534404.4313958,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.31371808052063,"message":"Metric recorded: session_startup_ff19a42c-8f89-4821-a855-6d364aafb2bb","metric_type":"latency","metric_name":"session_startup_ff19a42c-8f89-4821-a855-6d364aafb2bb","metric_value":3.8628578186035156}{"timestamp":1758534404.4331465,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"ff19a42c-8f89-4821-a855-6d364aafb2bb","session_time":0.0050678253173828125,"message":"ASR event: partial","event_type":"partial","stream_id":"ff19a42c-8f89-4821-a855-6d364aafb2bb","session_duration":0.005167753999558045,"text_length":11,"word_count":2,"seq":1,"segment_id":"segf294ba64"}
[docker-ci]
[docker-ci] {"timestamp":1758534404.434011,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.316251277923584,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":2.0,"increment":1.0}
[docker-ci] {"timestamp":1758534404.434939,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.31722331047058,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534404.4360101,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"session_manager","session_id":"ff19a42c-8f89-4821-a855-6d364aafb2bb","session_time":16.31825041770935,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.8628578186035156,"total_sessions":1,"run_dir":"loquilex/out/ff19a42c-8f89-4821-a855-6d364aafb2bb"}
[docker-ci] {"timestamp":1758534404.4599738,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"session_manager","session_id":"ff19a42c-8f89-4821-a855-6d364aafb2bb","session_time":16.34221339225769,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534404.6345263,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.51678466796875,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":2.0,"increment":1.0}
[docker-ci] {"timestamp":1758534404.6356094,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.51784038543701,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534404.636337,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"session_manager","session_id":"ff19a42c-8f89-4821-a855-6d364aafb2bb","session_time":16.5185604095459,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] _____________ TestStreamingIntegration.test_asr_snapshot_endpoint ______________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534404.716616,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"session_manager","session_id":"5873663f-4d91-45cd-b8bc-793aa8046a31","session_time":16.599073886871338,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=5873663f-4d91-45cd-b8bc-793aa8046a31
[docker-ci] {"timestamp":1758534404.7198849,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"5873663f-4d91-45cd-b8bc-793aa8046a31","session_time":0.0007250308990478516,"message":"ASR metrics initialized","stream_id":"5873663f-4d91-45cd-b8bc-793aa8046a31"}
[docker-ci] {"timestamp":1758534404.7219384,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.604196310043335,"message":"Metric recorded: session_startup_5873663f-4d91-45cd-b8bc-793aa8046a31","metric_type":"latency","metric_name":"session_startup_5873663f-4d91-45cd-b8bc-793aa8046a31","metric_value":3.4089088439941406}
[docker-ci] {"timestamp":1758534404.7229834,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.6052565574646,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":3.0,"increment":1.0}
[docker-ci] {"timestamp":1758534404.7239795,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.606215953826904,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534404.7250822,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"session_manager","session_id":"5873663f-4d91-45cd-b8bc-793aa8046a31","session_time":16.607317447662354,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.4089088439941406,"total_sessions":1,"run_dir":"loquilex/out/5873663f-4d91-45cd-b8bc-793aa8046a31"}
[docker-ci] {"timestamp":1758534404.730878,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"5873663f-4d91-45cd-b8bc-793aa8046a31","session_time":0.011660575866699219,"message":"ASR event: partial","event_type":"partial","stream_id":"5873663f-4d91-45cd-b8bc-793aa8046a31","session_duration":0.011815622998256003,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg65cb3586"}
[docker-ci] {"timestamp":1758534404.8339157,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"asr_metrics","session_id":"5873663f-4d91-45cd-b8bc-793aa8046a31","session_time":0.11473560333251953,"message":"Metric recorded: partial_interval","metric_type":"latency","metric_name":"partial_interval","metric_value":102.9761320023681,"segment_id":"seg65cb3586","text_length":16}
[docker-ci] {"timestamp":1758534404.8347142,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"asr_metrics","session_id":"5873663f-4d91-45cd-b8bc-793aa8046a31","session_time":0.11548805236816406,"message":"ASR event: partial","event_type":"partial","stream_id":"5873663f-4d91-45cd-b8bc-793aa8046a31","session_duration":0.11559197799942922,"text_length":16,"word_count":3,"seq":2,"segment_id":"seg65cb3586"}
[docker-ci] {"timestamp":1758534404.872309,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"session_manager","session_id":"5873663f-4d91-45cd-b8bc-793aa8046a31","session_time":16.754554986953735,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534404.9359713,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.81820821762085,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":3.0,"increment":1.0}
[docker-ci] {"timestamp":1758534404.9369187,"iso_timestamp":"2025-09-22T09:46:44Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.81916856765747,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534404.9376764,"iso_timestamp":"2025-09-22T09:46:44Z","level":"info","component":"session_manager","session_id":"5873663f-4d91-45cd-b8bc-793aa8046a31","session_time":16.819908380508423,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] ________ TestStreamingIntegration.test_regular_session_no_asr_snapshot _________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534405.0532613,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"35dd547f-8179-4352-ba92-a8ab8a538568","session_time":16.935504913330078,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":false}}
[docker-ci] {"timestamp":1758534405.0614038,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.943662881851196,"message":"Metric recorded: session_startup_35dd547f-8179-4352-ba92-a8ab8a538568","metric_type":"latency","metric_name":"session_startup_35dd547f-8179-4352-ba92-a8ab8a538568","metric_value":6.70170783996582}
[docker-ci] {"timestamp":1758534405.062551,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.944785833358765,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":4.0,"increment":1.0}
[docker-ci] {"timestamp":1758534405.0634785,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":16.945715188980103,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534405.0645425,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"35dd547f-8179-4352-ba92-a8ab8a538568","session_time":16.946778774261475,"message":"Session started successfully","session_type":"subprocess","startup_time_ms":6.70170783996582,"total_sessions":1,"run_dir":"loquilex/out/35dd547f-8179-4352-ba92-a8ab8a538568"}
[docker-ci] {"timestamp":1758534405.1071863,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"35dd547f-8179-4352-ba92-a8ab8a538568","session_time":16.98942232131958,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534405.1601472,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.04238772392273,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":4.0,"increment":1.0}
[docker-ci] {"timestamp":1758534405.1611211,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.04336404800415,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534405.1618457,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"35dd547f-8179-4352-ba92-a8ab8a538568","session_time":17.04407262802124,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] ______ TestStreamingIntegration.test_websocket_streaming_events[asyncio] _______
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534405.2385302,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f","session_time":17.120768785476685,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=ad7941f1-7ecd-4b33-a549-7be413a5b04f
[docker-ci] {"timestamp":1758534405.2417226,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"asr_metrics","session_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f","session_time":0.0009243488311767578,"message":"ASR metrics initialized","stream_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f"}
[docker-ci] {"timestamp":1758534405.2437801,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.126027584075928,"message":"Metric recorded: session_startup_ad7941f1-7ecd-4b33-a549-7be413a5b04f","metric_type":"latency","metric_name":"session_startup_ad7941f1-7ecd-4b33-a549-7be413a5b04f","metric_value":3.9534568786621094}
[docker-ci] {"timestamp":1758534405.244722,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.126953125,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":5.0,"increment":1.0}
[docker-ci] {"timestamp":1758534405.245682,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.127923011779785,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534405.2467308,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f","session_time":17.128965854644775,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.9534568786621094,"total_sessions":1,"run_dir":"loquilex/out/ad7941f1-7ecd-4b33-a549-7be413a5b04f"}
[docker-ci] {"timestamp":1758534405.3598824,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"asr_metrics","session_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f","session_time":0.11921191215515137,"message":"ASR event: partial","event_type":"partial","stream_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f","session_duration":0.11835647499901825,"text_length":11,"word_count":2,"seq":1,"segment_id":"test_seg"}
[docker-ci] {"timestamp":1758534405.3631017,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"asr_metrics","session_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f","session_time":0.122406005859375,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":3.188229999068426,"segment_id":"test_seg","eou_reason":"punctuation"}
[docker-ci] {"timestamp":1758534405.3658195,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"asr_metrics","session_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f","session_time":0.12511944770812988,"message":"ASR event: final","event_type":"final","stream_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f","session_duration":0.12424066799940192,"text_length":12,"word_count":2,"eou_reason":"punctuation","segment_duration_ms":3.188229999068426,"segment_id":"test_seg"}
[docker-ci] {"timestamp":1758534405.4797015,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f","session_time":17.36192488670349,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534405.543986,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.426239728927612,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":5.0,"increment":1.0}
[docker-ci] {"timestamp":1758534405.5449014,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.427124738693237,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534405.545597,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"ad7941f1-7ecd-4b33-a549-7be413a5b04f","session_time":17.427820682525635,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] ________ TestStreamingIntegration.test_websocket_streaming_events[trio] ________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534405.6361709,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"d3161093-15de-4c22-86b7-147b80f95c8a","session_time":17.51851773262024,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=d3161093-15de-4c22-86b7-147b80f95c8a
[docker-ci] {"timestamp":1758534405.6388965,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"asr_metrics","session_id":"d3161093-15de-4c22-86b7-147b80f95c8a","session_time":0.0006573200225830078,"message":"ASR metrics initialized","stream_id":"d3161093-15de-4c22-86b7-147b80f95c8a"}
[docker-ci] {"timestamp":1758534405.6408913,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.523130893707275,"message":"Metric recorded: session_startup_d3161093-15de-4c22-86b7-147b80f95c8a","metric_type":"latency","metric_name":"session_startup_d3161093-15de-4c22-86b7-147b80f95c8a","metric_value":3.3693313598632812}
[docker-ci] {"timestamp":1758534405.641804,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.52405095100403,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":6.0,"increment":1.0}
[docker-ci] {"timestamp":1758534405.6427555,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.525049209594727,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534405.6439588,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"d3161093-15de-4c22-86b7-147b80f95c8a","session_time":17.526193380355835,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.3693313598632812,"total_sessions":1,"run_dir":"loquilex/out/d3161093-15de-4c22-86b7-147b80f95c8a"}
[docker-ci] {"timestamp":1758534405.756622,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"asr_metrics","session_id":"d3161093-15de-4c22-86b7-147b80f95c8a","session_time":0.11847734451293945,"message":"ASR event: partial","event_type":"partial","stream_id":"d3161093-15de-4c22-86b7-147b80f95c8a","session_duration":0.11780175999956555,"text_length":11,"word_count":2,"seq":1,"segment_id":"test_seg"}
[docker-ci] {"timestamp":1758534405.759815,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"asr_metrics","session_id":"d3161093-15de-4c22-86b7-147b80f95c8a","session_time":0.12166476249694824,"message":"Metric recorded: final_latency","metric_type":"latency","metric_name":"final_latency","metric_value":2.7524460019776598,"segment_id":"test_seg","eou_reason":"punctuation"}
[docker-ci] {"timestamp":1758534405.7624779,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"asr_metrics","session_id":"d3161093-15de-4c22-86b7-147b80f95c8a","session_time":0.1243288516998291,"message":"ASR event: final","event_type":"final","stream_id":"d3161093-15de-4c22-86b7-147b80f95c8a","session_duration":0.1231898080004612,"text_length":12,"word_count":2,"eou_reason":"punctuation","segment_duration_ms":2.7524460019776598,"segment_id":"test_seg"}
[docker-ci] {"timestamp":1758534405.8779666,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"d3161093-15de-4c22-86b7-147b80f95c8a","session_time":17.760209321975708,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534405.9476027,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.829842567443848,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":6.0,"increment":1.0}
[docker-ci] {"timestamp":1758534405.9485428,"iso_timestamp":"2025-09-22T09:46:45Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.83076763153076,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534405.9492834,"iso_timestamp":"2025-09-22T09:46:45Z","level":"info","component":"session_manager","session_id":"d3161093-15de-4c22-86b7-147b80f95c8a","session_time":17.831509828567505,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] _________ TestStreamingConfiguration.test_streaming_config_validation __________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534406.0366871,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"95c2ca11-1c2c-46c3-abe5-40246328e2b2","session_time":17.91892671585083,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.5,"segment_max_sec":8.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=95c2ca11-1c2c-46c3-abe5-40246328e2b2
[docker-ci] {"timestamp":1758534406.0396059,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"asr_metrics","session_id":"95c2ca11-1c2c-46c3-abe5-40246328e2b2","session_time":0.0006470680236816406,"message":"ASR metrics initialized","stream_id":"95c2ca11-1c2c-46c3-abe5-40246328e2b2"}
[docker-ci] {"timestamp":1758534406.041747,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.92401099205017,"message":"Metric recorded: session_startup_95c2ca11-1c2c-46c3-abe5-40246328e2b2","metric_type":"latency","metric_name":"session_startup_95c2ca11-1c2c-46c3-abe5-40246328e2b2","metric_value":3.6923885345458984}
[docker-ci] {"timestamp":1758534406.0427573,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.924986124038696,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":7.0,"increment":1.0}
[docker-ci] {"timestamp":1758534406.0436654,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":17.925896883010864,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534406.0446029,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"95c2ca11-1c2c-46c3-abe5-40246328e2b2","session_time":17.926851272583008,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.6923885345458984,"total_sessions":1,"run_dir":"loquilex/out/95c2ca11-1c2c-46c3-abe5-40246328e2b2"}
[docker-ci] {"timestamp":1758534406.0503252,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"asr_metrics","session_id":"95c2ca11-1c2c-46c3-abe5-40246328e2b2","session_time":0.011295318603515625,"message":"ASR event: partial","event_type":"partial","stream_id":"95c2ca11-1c2c-46c3-abe5-40246328e2b2","session_duration":0.011469250999653013,"text_length":11,"word_count":2,"seq":1,"segment_id":"segdb28c2d3"}
[docker-ci] {"timestamp":1758534406.065445,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"95c2ca11-1c2c-46c3-abe5-40246328e2b2","session_time":17.947670936584473,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534406.2538793,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.13611936569214,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":7.0,"increment":1.0}
[docker-ci] {"timestamp":1758534406.2547853,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.13701105117798,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534406.2555606,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"95c2ca11-1c2c-46c3-abe5-40246328e2b2","session_time":18.13778805732727,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] _____________ TestStreamingConfiguration.test_model_id_validation ______________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534406.337575,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"10619588-8272-4bc3-a8a4-950f2970ac27","session_time":18.219863653182983,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=10619588-8272-4bc3-a8a4-950f2970ac27
[docker-ci] {"timestamp":1758534406.3402674,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"asr_metrics","session_id":"10619588-8272-4bc3-a8a4-950f2970ac27","session_time":0.0006401538848876953,"message":"ASR metrics initialized","stream_id":"10619588-8272-4bc3-a8a4-950f2970ac27"}
[docker-ci] {"timestamp":1758534406.3426175,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"asr_metrics","session_id":"10619588-8272-4bc3-a8a4-950f2970ac27","session_time":0.002934694290161133,"message":"ASR event: partial","event_type":"partial","stream_id":"10619588-8272-4bc3-a8a4-950f2970ac27","session_duration":0.002979198001412442,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg844d01bf"}
[docker-ci] {"timestamp":1758534406.3439183,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.226173639297485,"message":"Metric recorded: session_startup_10619588-8272-4bc3-a8a4-950f2970ac27","metric_type":"latency","metric_name":"session_startup_10619588-8272-4bc3-a8a4-950f2970ac27","metric_value":4.913806915283203}
[docker-ci] {"timestamp":1758534406.3450148,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.227249145507812,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":8.0,"increment":1.0}
[docker-ci] {"timestamp":1758534406.3459835,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.228219747543335,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534406.3471332,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"10619588-8272-4bc3-a8a4-950f2970ac27","session_time":18.2293701171875,"message":"Session started successfully","session_type":"streaming","startup_time_ms":4.913806915283203,"total_sessions":1,"run_dir":"loquilex/out/10619588-8272-4bc3-a8a4-950f2970ac27"}
[docker-ci] {"timestamp":1758534406.3684251,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"10619588-8272-4bc3-a8a4-950f2970ac27","session_time":18.25070571899414,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534406.5452757,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.427583694458008,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":8.0,"increment":1.0}
[docker-ci] {"timestamp":1758534406.5467558,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.42905831336975,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534406.548035,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"10619588-8272-4bc3-a8a4-950f2970ac27","session_time":18.430370569229126,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] {"timestamp":1758534406.5988536,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"dacf1aba-818d-4250-9f28-09c5bcb9aae0","session_time":18.48119568824768,"message":"Starting session","config":{"name":"session","asr_model_id":"small.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=dacf1aba-818d-4250-9f28-09c5bcb9aae0
[docker-ci] {"timestamp":1758534406.605165,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"asr_metrics","session_id":"dacf1aba-818d-4250-9f28-09c5bcb9aae0","session_time":0.0011816024780273438,"message":"ASR metrics initialized","stream_id":"dacf1aba-818d-4250-9f28-09c5bcb9aae0"}
[docker-ci] {"timestamp":1758534406.6087475,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.491082668304443,"message":"Metric recorded: session_startup_dacf1aba-818d-4250-9f28-09c5bcb9aae0","metric_type":"latency","metric_name":"session_startup_dacf1aba-818d-4250-9f28-09c5bcb9aae0","metric_value":7.322072982788086}{"timestamp":1758534406.610913,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"asr_metrics","session_id":"dacf1aba-818d-4250-9f28-09c5bcb9aae0","session_time":0.006824493408203125,"message":"ASR event: partial","event_type":"partial","stream_id":"dacf1aba-818d-4250-9f28-09c5bcb9aae0","session_duration":0.007011077999777626,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg34b8a3eb"}
[docker-ci]
[docker-ci] {"timestamp":1758534406.6121964,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.49443507194519,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":9.0,"increment":1.0}
[docker-ci] {"timestamp":1758534406.613238,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.495476245880127,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534406.6143463,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"dacf1aba-818d-4250-9f28-09c5bcb9aae0","session_time":18.496585845947266,"message":"Session started successfully","session_type":"streaming","startup_time_ms":7.322072982788086,"total_sessions":1,"run_dir":"loquilex/out/dacf1aba-818d-4250-9f28-09c5bcb9aae0"}
[docker-ci] {"timestamp":1758534406.635661,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"dacf1aba-818d-4250-9f28-09c5bcb9aae0","session_time":18.517914295196533,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534406.812691,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.694950103759766,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":9.0,"increment":1.0}
[docker-ci] {"timestamp":1758534406.8136256,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.69584584236145,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534406.8143084,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"dacf1aba-818d-4250-9f28-09c5bcb9aae0","session_time":18.696534156799316,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] {"timestamp":1758534406.8397195,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"f6e7d8c9-9d8e-450e-8a75-abd844d5ce09","session_time":18.721953630447388,"message":"Starting session","config":{"name":"session","asr_model_id":"base.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=f6e7d8c9-9d8e-450e-8a75-abd844d5ce09
[docker-ci] {"timestamp":1758534406.8426569,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"asr_metrics","session_id":"f6e7d8c9-9d8e-450e-8a75-abd844d5ce09","session_time":0.0006170272827148438,"message":"ASR metrics initialized","stream_id":"f6e7d8c9-9d8e-450e-8a75-abd844d5ce09"}
[docker-ci] {"timestamp":1758534406.8447406,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.726977109909058,"message":"Metric recorded: session_startup_f6e7d8c9-9d8e-450e-8a75-abd844d5ce09","metric_type":"latency","metric_name":"session_startup_f6e7d8c9-9d8e-450e-8a75-abd844d5ce09","metric_value":3.507852554321289}
[docker-ci] {"timestamp":1758534406.845667,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.727897882461548,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":10.0,"increment":1.0}
[docker-ci] {"timestamp":1758534406.8466327,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.728865385055542,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534406.8477051,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"f6e7d8c9-9d8e-450e-8a75-abd844d5ce09","session_time":18.729934692382812,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.507852554321289,"total_sessions":1,"run_dir":"loquilex/out/f6e7d8c9-9d8e-450e-8a75-abd844d5ce09"}
[docker-ci] {"timestamp":1758534406.8538475,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"asr_metrics","session_id":"f6e7d8c9-9d8e-450e-8a75-abd844d5ce09","session_time":0.011742591857910156,"message":"ASR event: partial","event_type":"partial","stream_id":"f6e7d8c9-9d8e-450e-8a75-abd844d5ce09","session_duration":0.011850445000163745,"text_length":11,"word_count":2,"seq":1,"segment_id":"segc1123fb5"}
[docker-ci] {"timestamp":1758534406.8701525,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"f6e7d8c9-9d8e-450e-8a75-abd844d5ce09","session_time":18.752386331558228,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534406.9572248,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.839544534683228,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":10.0,"increment":1.0}
[docker-ci] {"timestamp":1758534406.9588575,"iso_timestamp":"2025-09-22T09:46:46Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.841180562973022,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534406.960179,"iso_timestamp":"2025-09-22T09:46:46Z","level":"info","component":"session_manager","session_id":"f6e7d8c9-9d8e-450e-8a75-abd844d5ce09","session_time":18.84249210357666,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] {"timestamp":1758534407.012249,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"977f6bd6-2082-40f7-842c-39231a211ffa","session_time":18.894490718841553,"message":"Starting session","config":{"name":"session","asr_model_id":"medium.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=977f6bd6-2082-40f7-842c-39231a211ffa
[docker-ci] {"timestamp":1758534407.014734,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"asr_metrics","session_id":"977f6bd6-2082-40f7-842c-39231a211ffa","session_time":0.0006151199340820312,"message":"ASR metrics initialized","stream_id":"977f6bd6-2082-40f7-842c-39231a211ffa"}
[docker-ci] {"timestamp":1758534407.016919,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.899171590805054,"message":"Metric recorded: session_startup_977f6bd6-2082-40f7-842c-39231a211ffa","metric_type":"latency","metric_name":"session_startup_977f6bd6-2082-40f7-842c-39231a211ffa","metric_value":3.3576488494873047}{"timestamp":1758534407.0182924,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"asr_metrics","session_id":"977f6bd6-2082-40f7-842c-39231a211ffa","session_time":0.004092693328857422,"message":"ASR event: partial","event_type":"partial","stream_id":"977f6bd6-2082-40f7-842c-39231a211ffa","session_duration":0.004160847001912771,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg31e0be59"}
[docker-ci]
[docker-ci] {"timestamp":1758534407.0193014,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.90153980255127,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":11.0,"increment":1.0}
[docker-ci] {"timestamp":1758534407.0203302,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":18.902567386627197,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534407.0214825,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"977f6bd6-2082-40f7-842c-39231a211ffa","session_time":18.903777360916138,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.3576488494873047,"total_sessions":1,"run_dir":"loquilex/out/977f6bd6-2082-40f7-842c-39231a211ffa"}
[docker-ci] {"timestamp":1758534407.0431588,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"977f6bd6-2082-40f7-842c-39231a211ffa","session_time":18.925398588180542,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534407.2198308,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.10212230682373,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":11.0,"increment":1.0}
[docker-ci] {"timestamp":1758534407.2207704,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.10304617881775,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534407.2215745,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"977f6bd6-2082-40f7-842c-39231a211ffa","session_time":19.10380268096924,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] _______________ TestStreamingConfiguration.test_device_selection _______________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534407.3174055,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"189ab382-4f29-4d3c-ab78-6f15040603f5","session_time":19.19964361190796,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=189ab382-4f29-4d3c-ab78-6f15040603f5
[docker-ci] {"timestamp":1758534407.3199022,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"asr_metrics","session_id":"189ab382-4f29-4d3c-ab78-6f15040603f5","session_time":0.0006601810455322266,"message":"ASR metrics initialized","stream_id":"189ab382-4f29-4d3c-ab78-6f15040603f5"}
[docker-ci] {"timestamp":1758534407.32183,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.204068183898926,"message":"Metric recorded: session_startup_189ab382-4f29-4d3c-ab78-6f15040603f5","metric_type":"latency","metric_name":"session_startup_189ab382-4f29-4d3c-ab78-6f15040603f5","metric_value":3.191709518432617}
[docker-ci] {"timestamp":1758534407.3227448,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.204972743988037,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":12.0,"increment":1.0}
[docker-ci] {"timestamp":1758534407.3236818,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.205914974212646,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534407.324753,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"189ab382-4f29-4d3c-ab78-6f15040603f5","session_time":19.206987857818604,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.191709518432617,"total_sessions":1,"run_dir":"loquilex/out/189ab382-4f29-4d3c-ab78-6f15040603f5"}
[docker-ci] {"timestamp":1758534407.3302748,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"asr_metrics","session_id":"189ab382-4f29-4d3c-ab78-6f15040603f5","session_time":0.010948657989501953,"message":"ASR event: partial","event_type":"partial","stream_id":"189ab382-4f29-4d3c-ab78-6f15040603f5","session_duration":0.01112021500011906,"text_length":11,"word_count":2,"seq":1,"segment_id":"sege7a0f8e0"}
[docker-ci] {"timestamp":1758534407.3525922,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"189ab382-4f29-4d3c-ab78-6f15040603f5","session_time":19.234925270080566,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534407.533466,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.415724277496338,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":12.0,"increment":1.0}
[docker-ci] {"timestamp":1758534407.5344653,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.416693449020386,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534407.5352392,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"189ab382-4f29-4d3c-ab78-6f15040603f5","session_time":19.41746711730957,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] {"timestamp":1758534407.5606754,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"d643dcb2-bba6-40ca-bc96-90e673cb9b38","session_time":19.442912340164185,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"auto","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=d643dcb2-bba6-40ca-bc96-90e673cb9b38
[docker-ci] {"timestamp":1758534407.5631099,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"asr_metrics","session_id":"d643dcb2-bba6-40ca-bc96-90e673cb9b38","session_time":0.0006043910980224609,"message":"ASR metrics initialized","stream_id":"d643dcb2-bba6-40ca-bc96-90e673cb9b38"}
[docker-ci] {"timestamp":1758534407.5650027,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.447245836257935,"message":"Metric recorded: session_startup_d643dcb2-bba6-40ca-bc96-90e673cb9b38","metric_type":"latency","metric_name":"session_startup_d643dcb2-bba6-40ca-bc96-90e673cb9b38","metric_value":3.083944320678711}
[docker-ci] {"timestamp":1758534407.56596,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.448192834854126,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":13.0,"increment":1.0}
[docker-ci] {"timestamp":1758534407.5668893,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.449121475219727,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534407.5680382,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"d643dcb2-bba6-40ca-bc96-90e673cb9b38","session_time":19.450275421142578,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.083944320678711,"total_sessions":1,"run_dir":"loquilex/out/d643dcb2-bba6-40ca-bc96-90e673cb9b38"}
[docker-ci] {"timestamp":1758534407.5761178,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"asr_metrics","session_id":"d643dcb2-bba6-40ca-bc96-90e673cb9b38","session_time":0.013593196868896484,"message":"ASR event: partial","event_type":"partial","stream_id":"d643dcb2-bba6-40ca-bc96-90e673cb9b38","session_duration":0.013471763002598891,"text_length":11,"word_count":2,"seq":1,"segment_id":"segdc901fbf"}
[docker-ci] {"timestamp":1758534407.5914314,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"d643dcb2-bba6-40ca-bc96-90e673cb9b38","session_time":19.473668098449707,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534407.6774056,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.559667825698853,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":13.0,"increment":1.0}
[docker-ci] {"timestamp":1758534407.6783204,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.560542345046997,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534407.679088,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"d643dcb2-bba6-40ca-bc96-90e673cb9b38","session_time":19.561360120773315,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] ___________ TestSnapshotStatus.test_streaming_session_status_running ___________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534407.7867467,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"7031c254-d685-41cc-ae15-bb9ee6ab6480","session_time":19.66911482810974,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=7031c254-d685-41cc-ae15-bb9ee6ab6480
[docker-ci] {"timestamp":1758534407.7917478,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"asr_metrics","session_id":"7031c254-d685-41cc-ae15-bb9ee6ab6480","session_time":0.0014603137969970703,"message":"ASR metrics initialized","stream_id":"7031c254-d685-41cc-ae15-bb9ee6ab6480"}
[docker-ci] {"timestamp":1758534407.794939,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.67730188369751,"message":"Metric recorded: session_startup_7031c254-d685-41cc-ae15-bb9ee6ab6480","metric_type":"latency","metric_name":"session_startup_7031c254-d685-41cc-ae15-bb9ee6ab6480","metric_value":5.776405334472656}{"timestamp":1758534407.798183,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"asr_metrics","session_id":"7031c254-d685-41cc-ae15-bb9ee6ab6480","session_time":0.007771968841552734,"message":"ASR event: partial","event_type":"partial","stream_id":"7031c254-d685-41cc-ae15-bb9ee6ab6480","session_duration":0.0073865710000973195,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg3ce29d85"}
[docker-ci]
[docker-ci] {"timestamp":1758534407.8000665,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.682388067245483,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":14.0,"increment":1.0}
[docker-ci] {"timestamp":1758534407.8017666,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.684091329574585,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534407.8039715,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"7031c254-d685-41cc-ae15-bb9ee6ab6480","session_time":19.686304569244385,"message":"Session started successfully","session_type":"streaming","startup_time_ms":5.776405334472656,"total_sessions":1,"run_dir":"loquilex/out/7031c254-d685-41cc-ae15-bb9ee6ab6480"}
[docker-ci] {"timestamp":1758534407.8742812,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"7031c254-d685-41cc-ae15-bb9ee6ab6480","session_time":19.756539344787598,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534407.9236195,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.805877923965454,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":14.0,"increment":1.0}
[docker-ci] {"timestamp":1758534407.9244862,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.80671000480652,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534407.9251673,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"7031c254-d685-41cc-ae15-bb9ee6ab6480","session_time":19.8073890209198,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] ___________ TestSnapshotStatus.test_streaming_session_status_stopped ___________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534407.9976988,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"session_manager","session_id":"4103c340-877f-4a58-84c4-e1bd5c08bab4","session_time":19.87993812561035,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=4103c340-877f-4a58-84c4-e1bd5c08bab4
[docker-ci] {"timestamp":1758534408.0001397,"iso_timestamp":"2025-09-22T09:46:47Z","level":"info","component":"asr_metrics","session_id":"4103c340-877f-4a58-84c4-e1bd5c08bab4","session_time":0.0005965232849121094,"message":"ASR metrics initialized","stream_id":"4103c340-877f-4a58-84c4-e1bd5c08bab4"}
[docker-ci] {"timestamp":1758534408.001948,"iso_timestamp":"2025-09-22T09:46:47Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.884185075759888,"message":"Metric recorded: session_startup_4103c340-877f-4a58-84c4-e1bd5c08bab4","metric_type":"latency","metric_name":"session_startup_4103c340-877f-4a58-84c4-e1bd5c08bab4","metric_value":2.966642379760742}
[docker-ci] {"timestamp":1758534408.0029073,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.88514018058777,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":15.0,"increment":1.0}
[docker-ci] {"timestamp":1758534408.0038626,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":19.886095762252808,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534408.0048957,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"4103c340-877f-4a58-84c4-e1bd5c08bab4","session_time":19.88712739944458,"message":"Session started successfully","session_type":"streaming","startup_time_ms":2.966642379760742,"total_sessions":1,"run_dir":"loquilex/out/4103c340-877f-4a58-84c4-e1bd5c08bab4"}
[docker-ci] {"timestamp":1758534408.0106404,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"asr_metrics","session_id":"4103c340-877f-4a58-84c4-e1bd5c08bab4","session_time":0.011043310165405273,"message":"ASR event: partial","event_type":"partial","stream_id":"4103c340-877f-4a58-84c4-e1bd5c08bab4","session_duration":0.011148470999614801,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg660c0d04"}
[docker-ci] {"timestamp":1758534408.0262651,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"4103c340-877f-4a58-84c4-e1bd5c08bab4","session_time":19.908493995666504,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534408.2138917,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.096222639083862,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":15.0,"increment":1.0}
[docker-ci] {"timestamp":1758534408.2154849,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.097796201705933,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534408.216751,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"4103c340-877f-4a58-84c4-e1bd5c08bab4","session_time":20.09906029701233,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] ____________ TestErrorHygiene.test_metrics_error_no_exception_leak _____________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534408.3326778,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"0995ed11-d294-4f27-9391-5ddf17c33a04","session_time":20.214933156967163,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":false}}
[docker-ci] {"timestamp":1758534408.3407912,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.223042249679565,"message":"Metric recorded: session_startup_0995ed11-d294-4f27-9391-5ddf17c33a04","metric_type":"latency","metric_name":"session_startup_0995ed11-d294-4f27-9391-5ddf17c33a04","metric_value":6.65736198425293}
[docker-ci] {"timestamp":1758534408.3417144,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.223944425582886,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":16.0,"increment":1.0}
[docker-ci] {"timestamp":1758534408.342624,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.2248592376709,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534408.343642,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"0995ed11-d294-4f27-9391-5ddf17c33a04","session_time":20.22587513923645,"message":"Session started successfully","session_type":"subprocess","startup_time_ms":6.65736198425293,"total_sessions":1,"run_dir":"loquilex/out/0995ed11-d294-4f27-9391-5ddf17c33a04"}
[docker-ci] {"timestamp":1758534408.3656795,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"0995ed11-d294-4f27-9391-5ddf17c33a04","session_time":20.247968435287476,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534408.4185555,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.300818920135498,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":16.0,"increment":1.0}
[docker-ci] {"timestamp":1758534408.4194632,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.301690340042114,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534408.4201598,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"0995ed11-d294-4f27-9391-5ddf17c33a04","session_time":20.3023841381073,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] ____________ TestErrorHygiene.test_snapshot_error_no_exception_leak ____________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534408.4992354,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"8e11d3e8-cfc9-48c6-9360-48e9d4b46c42","session_time":20.381478309631348,"message":"Starting session","config":{"name":"session","asr_model_id":"tiny.en","mt_enabled":false,"dest_lang":"zho_Hans","device":"cpu","vad":true,"beams":1,"pause_flush_sec":0.7,"segment_max_sec":7.0,"partial_word_cap":10,"save_audio":"off","mt_model_id":null,"streaming_mode":true}}
[docker-ci] [FakeStreamingASR] Initialized: stream_id=8e11d3e8-cfc9-48c6-9360-48e9d4b46c42
[docker-ci] {"timestamp":1758534408.5021725,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"asr_metrics","session_id":"8e11d3e8-cfc9-48c6-9360-48e9d4b46c42","session_time":0.0006930828094482422,"message":"ASR metrics initialized","stream_id":"8e11d3e8-cfc9-48c6-9360-48e9d4b46c42"}
[docker-ci] {"timestamp":1758534408.504118,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.38635778427124,"message":"Metric recorded: session_startup_8e11d3e8-cfc9-48c6-9360-48e9d4b46c42","metric_type":"latency","metric_name":"session_startup_8e11d3e8-cfc9-48c6-9360-48e9d4b46c42","metric_value":3.509521484375}
[docker-ci] {"timestamp":1758534408.5050497,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.387283325195312,"message":"Counter incremented: sessions_started","metric_type":"counter","metric_name":"sessions_started","counter_value":17.0,"increment":1.0}
[docker-ci] {"timestamp":1758534408.5059922,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.38822889328003,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":1}
[docker-ci] {"timestamp":1758534408.5070453,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"8e11d3e8-cfc9-48c6-9360-48e9d4b46c42","session_time":20.389280319213867,"message":"Session started successfully","session_type":"streaming","startup_time_ms":3.509521484375,"total_sessions":1,"run_dir":"loquilex/out/8e11d3e8-cfc9-48c6-9360-48e9d4b46c42"}
[docker-ci] {"timestamp":1758534408.5152776,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"asr_metrics","session_id":"8e11d3e8-cfc9-48c6-9360-48e9d4b46c42","session_time":0.013744354248046875,"message":"ASR event: partial","event_type":"partial","stream_id":"8e11d3e8-cfc9-48c6-9360-48e9d4b46c42","session_duration":0.01383552499828511,"text_length":11,"word_count":2,"seq":1,"segment_id":"seg7d9698fa"}
[docker-ci] {"timestamp":1758534408.5522852,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"8e11d3e8-cfc9-48c6-9360-48e9d4b46c42","session_time":20.43453860282898,"message":"Stopping session"}
[docker-ci] {"timestamp":1758534408.616794,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.499112129211426,"message":"Counter incremented: sessions_stopped","metric_type":"counter","metric_name":"sessions_stopped","counter_value":17.0,"increment":1.0}
[docker-ci] {"timestamp":1758534408.618326,"iso_timestamp":"2025-09-22T09:46:48Z","level":"debug","component":"session_manager","session_id":"supervisor","session_time":20.500638484954834,"message":"Gauge updated: active_sessions","metric_type":"gauge","metric_name":"active_sessions","gauge_value":0}
[docker-ci] {"timestamp":1758534408.6196134,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"session_manager","session_id":"8e11d3e8-cfc9-48c6-9360-48e9d4b46c42","session_time":20.501932621002197,"message":"Session stopped successfully","total_sessions":0}
[docker-ci] _______________ TestStructuredLogger.test_create_logger_factory ________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534408.9088638,"iso_timestamp":"2025-09-22T09:46:48Z","level":"info","component":"factory_test","session_id":"factory_session","session_time":0.001018524169921875,"message":"Factory test message"}
[docker-ci] _______________________ test_legacy_message_type_mapping _______________________
[docker-ci] ----------------------------- Captured stdout call -----------------------------
[docker-ci] {"timestamp":1758534411.4197893,"iso_timestamp":"2025-09-22T09:46:51Z","level":"info","component":"session_manager","session_id":"supervisor","session_time":0.0008194446563720703,"message":"SessionManager initialized","max_cuda_sessions":1,"websocket_config":{"heartbeat_interval_ms":10000,"heartbeat_timeout_ms":30000,"max_in_flight":64,"max_msg_bytes":131072}}
[docker-ci] ___________ TestWSProtocolManager.test_flow_control_prevents_sending ___________
[docker-ci] ------------------------------ Captured log call -------------------------------
[docker-ci] WARNING  loquilex.api.ws_protocol:ws_protocol.py:447 Flow control prevents sending MessageType.ASR_PARTIAL
[docker-ci] _________________ TestWSProtocolManager.test_heartbeat_sending _________________
[docker-ci] ------------------------------ Captured log call -------------------------------
[docker-ci] ERROR    loquilex.api.ws_protocol:ws_protocol.py:670 System heartbeat loop error:
[docker-ci] Traceback (most recent call last):
[docker-ci]   File "/usr/local/lib/python3.12/unittest/mock.py", line 2294, in _execute_mock_call
[docker-ci]     result = next(effect)
[docker-ci]              ^^^^^^^^^^^^
[docker-ci] StopIteration
[docker-ci]
[docker-ci] During handling of the above exception, another exception occurred:
[docker-ci]
[docker-ci] Traceback (most recent call last):
[docker-ci]   File "/app/loquilex/api/ws_protocol.py", line 633, in _system_heartbeat_loop
[docker-ci]     await asyncio.sleep(self.hb_config.interval_ms / 1000.0)
[docker-ci]   File "/usr/local/lib/python3.12/unittest/mock.py", line 2298, in _execute_mock_call
[docker-ci]     raise StopAsyncIteration
[docker-ci] StopAsyncIteration
[docker-ci] _____________ TestWSProtocolManager.test_invalid_message_handling ______________
[docker-ci] ------------------------------ Captured log call -------------------------------
[docker-ci] ERROR    loquilex.api.ws_protocol:ws_protocol.py:219 Error handling WebSocket message: Expecting value: line 1 column 1 (char 0)
[docker-ci] Traceback (most recent call last):
[docker-ci]   File "/app/loquilex/api/ws_protocol.py", line 201, in handle_message
[docker-ci]     data = json.loads(message)
[docker-ci]            ^^^^^^^^^^^^^^^^^^^
[docker-ci]   File "/usr/local/lib/python3.12/json/__init__.py", line 346, in loads
[docker-ci]     return _default_decoder.decode(s)
[docker-ci]            ^^^^^^^^^^^^^^^^^^^^^^^^^^
[docker-ci]   File "/usr/local/lib/python3.12/json/decoder.py", line 338, in decode
[docker-ci]     obj, end = self.raw_decode(s, idx=_w(s, 0).end())
[docker-ci]                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[docker-ci]   File "/usr/local/lib/python3.12/json/decoder.py", line 356, in raw_decode
[docker-ci]     raise JSONDecodeError("Expecting value", s, err.value) from None
[docker-ci] json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
[docker-ci] ___________ TestWSProtocolManager.test_unknown_message_type_handling ___________
[docker-ci] ------------------------------ Captured log call -------------------------------
[docker-ci] ERROR    loquilex.api.ws_protocol:ws_protocol.py:219 Error handling WebSocket message: 1 validation error for WSEnvelope
[docker-ci] t
[docker-ci]   Input should be 'client.hello', 'server.welcome', 'server.error', 'client.hb', 'server.hb', 'client.ack', 'server.ack', 'client.flow', 'asr.partial', 'asr.final', 'mt.partial', 'mt.final', 'status', 'session.resume', 'session.snapshot', 'session.new', 'session.ack', 'system.heartbeat', 'queue.drop' or 'system.metrics' [type=enum, input_value='unknown.type', input_type=str]
[docker-ci]     For further information visit https://errors.pydantic.dev/2.11/v/enum
[docker-ci] Traceback (most recent call last):
[docker-ci]   File "/app/loquilex/api/ws_protocol.py", line 202, in handle_message
[docker-ci]     envelope = WSEnvelope.model_validate(data)
[docker-ci]                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[docker-ci]   File "/opt/venv/lib/python3.12/site-packages/pydantic/main.py", line 705, in model_validate
[docker-ci]     return cls.__pydantic_validator__.validate_python(
[docker-ci]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[docker-ci] pydantic_core._pydantic_core.ValidationError: 1 validation error for WSEnvelope
[docker-ci] t
[docker-ci]   Input should be 'client.hello', 'server.welcome', 'server.error', 'client.hb', 'server.hb', 'client.ack', 'server.ack', 'client.flow', 'asr.partial', 'asr.final', 'mt.partial', 'mt.final', 'status', 'session.resume', 'session.snapshot', 'session.new', 'session.ack', 'system.heartbeat', 'queue.drop' or 'system.metrics' [type=enum, input_value='unknown.type', input_type=str]
[docker-ci]     For further information visit https://errors.pydantic.dev/2.11/v/enum
[docker-ci] ____________ TestWSProtocolManager.test_connection_failure_handling ____________
[docker-ci] ------------------------------ Captured log call -------------------------------
[docker-ci] WARNING  loquilex.api.ws_protocol:ws_protocol.py:501 Failed to send to connection: Connection failed
[docker-ci] _____ TestWSProtocolManager.test_session_cleanup_on_all_connections_failed _____
[docker-ci] ------------------------------ Captured log call -------------------------------
[docker-ci] WARNING  loquilex.api.ws_protocol:ws_protocol.py:501 Failed to send to connection: Connection failed
[docker-ci] _______________ TestWSProtocolManager.test_ack_spoof_protection ________________
[docker-ci] ------------------------------ Captured log call -------------------------------
[docker-ci] WARNING  loquilex.api.ws_protocol:ws_protocol.py:399 Client ack beyond latest seq: 99 > 2
[docker-ci] =========================== short test summary info ============================
[docker-ci] PASSED tests/test_admin_cache.py::test_clear_cache_no_auth_client
[docker-ci] PASSED tests/test_admin_cache.py::test_clear_cache_with_auth
[docker-ci] PASSED tests/test_aggregator.py::test_aggregator_partial_debounce
[docker-ci] PASSED tests/test_aggregator.py::test_aggregator_force_finalize
[docker-ci] PASSED tests/test_api_hardware.py::TestHardwareEndpoint::test_hardware_snapshot_endpoint_success
[docker-ci] PASSED tests/test_api_hardware.py::TestHardwareEndpoint::test_hardware_snapshot_endpoint_contains_threshold_info
[docker-ci] PASSED tests/test_api_minimal_http.py::test_create_and_stop_minimal_session_http
[docker-ci] PASSED tests/test_api_minimal_session.py::test_minimal_session_lifecycle
[docker-ci] PASSED tests/test_api_model_endpoints.py::test_get_asr_models
[docker-ci] PASSED tests/test_api_model_endpoints.py::test_get_mt_models
[docker-ci] PASSED tests/test_api_model_endpoints.py::test_get_model_defaults
[docker-ci] PASSED tests/test_api_model_endpoints.py::test_update_model_defaults
[docker-ci] PASSED tests/test_api_model_endpoints.py::test_partial_update_model_defaults
[docker-ci] PASSED tests/test_api_model_endpoints.py::test_update_model_defaults_with_nulls
[docker-ci] PASSED tests/test_api_model_endpoints.py::test_mt_languages_endpoint
[docker-ci] PASSED tests/test_api_modules_import.py::test_import_api_modules_for_coverage
[docker-ci] PASSED tests/test_asr_metrics.py::TestLatencyMetrics::test_empty_metrics
[docker-ci] PASSED tests/test_asr_metrics.py::TestLatencyMetrics::test_single_measurement
[docker-ci] PASSED tests/test_asr_metrics.py::TestLatencyMetrics::test_multiple_measurements
[docker-ci] PASSED tests/test_asr_metrics.py::TestLatencyMetrics::test_bounded_recent_values
[docker-ci] PASSED tests/test_asr_metrics.py::TestASRMetrics::test_basic_metrics
[docker-ci] PASSED tests/test_asr_metrics.py::TestASRMetrics::test_asr_metrics_with_structured_logging
[docker-ci] PASSED tests/test_asr_metrics.py::TestASRMetrics::test_initialization
[docker-ci] PASSED tests/test_asr_metrics.py::TestASRMetrics::test_partial_event_tracking
[docker-ci] PASSED tests/test_asr_metrics.py::TestASRMetrics::test_final_event_tracking
[docker-ci] PASSED tests/test_asr_metrics.py::TestASRMetrics::test_eou_reason_counting
[docker-ci] PASSED tests/test_asr_metrics.py::TestASRMetrics::test_summary_generation
[docker-ci] PASSED tests/test_asr_metrics.py::TestASRMetrics::test_performance_targets
[docker-ci] PASSED tests/test_asr_metrics.py::TestMetricsIntegration::test_aggregator_with_metrics
[docker-ci] PASSED tests/test_asr_metrics.py::TestMetricsIntegration::test_aggregator_without_metrics
[docker-ci] PASSED tests/test_asr_metrics.py::TestMetricsIntegration::test_metrics_in_stats
[docker-ci] PASSED tests/test_bounded_queue.py::TestDropMetrics::test_initialization
[docker-ci] PASSED tests/test_bounded_queue.py::TestDropMetrics::test_record_drop
[docker-ci] PASSED tests/test_bounded_queue.py::TestDropMetrics::test_read_and_reset_recent
[docker-ci] PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_initialization
[docker-ci] PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_invalid_maxsize
[docker-ci] PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_put_get_basic
[docker-ci] PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_capacity_and_drop_oldest
[docker-ci] PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_peek
[docker-ci] PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_clear
[docker-ci] PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_drain
[docker-ci] PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_telemetry
[docker-ci] PASSED tests/test_bounded_queue.py::TestBoundedQueue::test_thread_safety_structure
[docker-ci] PASSED tests/test_bounded_queue.py::TestReplayBuffer::test_initialization
[docker-ci] PASSED tests/test_bounded_queue.py::TestReplayBuffer::test_add_message_with_seq
[docker-ci] PASSED tests/test_bounded_queue.py::TestReplayBuffer::test_get_messages_after
[docker-ci] PASSED tests/test_bounded_queue.py::TestReplayBuffer::test_ttl_cleanup
[docker-ci] PASSED tests/test_bounded_queue.py::TestReplayBuffer::test_ttl_disabled
[docker-ci] PASSED tests/test_cli_integration_offline.py::test_wav_to_vtt_offline_with_fake_asr
[docker-ci] PASSED tests/test_cli_integration_offline.py::test_vtt_to_zh_offline_with_fake_mt
[docker-ci] PASSED tests/test_cli_integration_offline.py::test_output_boundary_respected
[docker-ci] PASSED tests/test_cli_smoke.py::test_cli_runs_with_fake_capture_and_translator
[docker-ci] PASSED tests/test_compat_versions.py::test_starlette_httpx_compat
[docker-ci] PASSED tests/test_config_env.py::test_env_overrides
[docker-ci] PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_seconds
[docker-ci] PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_milliseconds
[docker-ci] PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_minutes
[docker-ci] PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_with_hours
[docker-ci] PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_plain_number
[docker-ci] PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_invalid_value
[docker-ci] PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_time_parsing_no_env_var
[docker-ci] PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_ws_protocol_config_with_time_suffixes
[docker-ci] PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_ws_protocol_config_defaults
[docker-ci] PASSED tests/test_config_parsing.py::TestConfigurationParsing::test_complex_time_formats
[docker-ci] PASSED tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_resume_flow_no_duplicate_finals
[docker-ci] PASSED tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_ordering_guarantees_after_resume
[docker-ci] PASSED tests/test_e2e_resume_flow.py::TestE2EResumeFlow::test_resume_with_expired_window
[docker-ci] PASSED tests/test_hardware_detection.py::TestCPUInfo::test_get_cpu_info_basic
[docker-ci] PASSED tests/test_hardware_detection.py::TestCPUInfo::test_cpu_threshold_warning
[docker-ci] PASSED tests/test_hardware_detection.py::TestGPUInfo::test_get_gpu_info_no_torch
[docker-ci] PASSED tests/test_hardware_detection.py::TestGPUInfo::test_get_gpu_info_with_mock_torch
[docker-ci] PASSED tests/test_hardware_detection.py::TestAudioDevices::test_get_audio_devices_no_sounddevice
[docker-ci] PASSED tests/test_hardware_detection.py::TestAudioDevices::test_get_audio_devices_with_mock_sounddevice
[docker-ci] PASSED tests/test_hardware_detection.py::TestOverallScore::test_calculate_overall_score_excellent
[docker-ci] PASSED tests/test_hardware_detection.py::TestOverallScore::test_calculate_overall_score_poor
[docker-ci] PASSED tests/test_hardware_detection.py::TestHardwareSnapshot::test_get_hardware_snapshot
[docker-ci] PASSED tests/test_hardware_detection.py::TestHardwareSnapshot::test_hardware_snapshot_to_dict
[docker-ci] PASSED tests/test_live_outputs.py::test_partial_and_final_files
[docker-ci] PASSED tests/test_live_outputs.py::test_append_vtt_and_srt
[docker-ci] PASSED tests/test_model_defaults.py::test_model_defaults_serialization
[docker-ci] PASSED tests/test_model_defaults.py::test_model_defaults_from_dict_filtering
[docker-ci] PASSED tests/test_model_defaults.py::test_model_defaults_manager_basic
[docker-ci] PASSED tests/test_model_defaults.py::test_model_defaults_manager_updates
[docker-ci] PASSED tests/test_model_defaults.py::test_model_defaults_manager_convenience_methods
[docker-ci] PASSED tests/test_model_defaults.py::test_model_defaults_manager_env_fallback
[docker-ci] PASSED tests/test_model_defaults.py::test_model_defaults_manager_loading_existing
[docker-ci] PASSED tests/test_model_defaults.py::test_model_defaults_manager_invalid_updates
[docker-ci] PASSED tests/test_model_indexing.py::test_model_index_serialization
[docker-ci] PASSED tests/test_model_indexing.py::test_model_indexer_basic
[docker-ci] PASSED tests/test_model_indexing.py::test_model_indexer_refresh_logic
[docker-ci] PASSED tests/test_model_indexing.py::test_model_indexer_convenience_methods
[docker-ci] PASSED tests/test_model_indexing.py::test_model_indexer_background_worker
[docker-ci] PASSED tests/test_model_indexing.py::test_model_indexer_cache_loading
[docker-ci] PASSED tests/test_mt_integration.py::test_mt_integration_disabled
[docker-ci] PASSED tests/test_mt_integration.py::test_mt_integration_translate_and_emit
[docker-ci] PASSED tests/test_mt_integration.py::test_mt_integration_error_handling
[docker-ci] PASSED tests/test_mt_integration.py::test_mt_integration_status
[docker-ci] PASSED tests/test_mt_registry.py::test_registry_operations
[docker-ci] PASSED tests/test_mt_registry.py::test_registry_unknown_provider
[docker-ci] PASSED tests/test_mt_registry.py::test_mt_module_imports_without_heavy_deps
[docker-ci] PASSED tests/test_offline_env.py::test_offline_env_vars_set[HF_HUB_OFFLINE]
[docker-ci] PASSED tests/test_offline_env.py::test_offline_env_vars_set[TRANSFORMERS_OFFLINE]
[docker-ci] PASSED tests/test_offline_env.py::test_offline_env_vars_set[HF_HUB_DISABLE_TELEMETRY]
[docker-ci] PASSED tests/test_offline_env.py::test_offline_env_vars_set[LX_OFFLINE]
[docker-ci] PASSED tests/test_offline_isolation.py::test_offline_network_guard_blocks_external
[docker-ci] PASSED tests/test_offline_isolation.py::test_offline_network_guard_allows_localhost
[docker-ci] PASSED tests/test_offline_isolation.py::test_offline_env_vars_set
[docker-ci] PASSED tests/test_resilient_comms.py::TestResilientComms::test_session_resume_within_window
[docker-ci] PASSED tests/test_resilient_comms.py::TestResilientComms::test_session_resume_expired
[docker-ci] PASSED tests/test_resilient_comms.py::TestResilientComms::test_session_resume_wrong_session_id
[docker-ci] PASSED tests/test_resilient_comms.py::TestResilientComms::test_session_resume_wrong_epoch
[docker-ci] PASSED tests/test_resilient_comms.py::TestResilientComms::test_telemetry_summary
[docker-ci] PASSED tests/test_resilient_comms.py::TestResilientComms::test_queue_drop_notification
[docker-ci] PASSED tests/test_resilient_comms.py::TestResilientComms::test_environment_configuration
[docker-ci] PASSED tests/test_resource_management.py::TestStreamingSessionResourceManagement::test_context_manager_cleanup
[docker-ci] PASSED tests/test_resource_management.py::TestStreamingSessionResourceManagement::test_destructor_cleanup
[docker-ci] PASSED tests/test_resource_management.py::TestSessionResourceManagement::test_context_manager_cleanup
[docker-ci] PASSED tests/test_resource_management.py::TestSessionResourceManagement::test_destructor_handles_subprocess_cleanup
[docker-ci] PASSED tests/test_resource_management.py::TestSessionManagerResourceManagement::test_shutdown_cleans_all_resources
[docker-ci] PASSED tests/test_resource_management.py::TestSessionManagerResourceManagement::test_destructor_sets_stop_flag
[docker-ci] PASSED tests/test_resource_management.py::TestBoundedQueueResourceManagement::test_cleanup_method_clears_resources
[docker-ci] PASSED tests/test_resource_management.py::TestBoundedQueueResourceManagement::test_destructor_clears_queue
[docker-ci] PASSED tests/test_resource_management.py::TestRollingTextFileResourceManagement::test_context_manager_support
[docker-ci] PASSED tests/test_resource_management.py::TestResourceLeakDetection::test_memory_usage_bounded
[docker-ci] PASSED tests/test_resource_management.py::TestResourceLeakDetection::test_thread_cleanup_after_operations
[docker-ci] PASSED tests/test_resource_management.py::TestWSProtocolManagerResourceCleanup::test_context_manager_cleanup
[docker-ci] PASSED tests/test_resource_management.py::TestWSProtocolManagerResourceCleanup::test_close_method_cleanup
[docker-ci] PASSED tests/test_resource_management.py::TestAbruptShutdownScenarios::test_session_cleanup_during_exception
[docker-ci] PASSED tests/test_resource_management.py::TestAbruptShutdownScenarios::test_manager_cleanup_with_active_sessions
[docker-ci] PASSED tests/test_safe_broadcast.py::test_safe_broadcast_no_loop_does_not_raise
[docker-ci] PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_initialization
[docker-ci] PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_with_env_config
[docker-ci] PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_add_session_commit
[docker-ci] PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_get_session_snapshot
[docker-ci] PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_get_session_storage_stats
[docker-ci] PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_with_sequence_tracking
[docker-ci] PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_storage_capping
[docker-ci] PASSED tests/test_session_state_integration.py::TestSessionStateIntegration::test_session_state_without_storage
[docker-ci] PASSED tests/test_session_storage.py::TestStorageConfig::test_default_values
[docker-ci] PASSED tests/test_session_storage.py::TestStorageConfig::test_validation_success
[docker-ci] PASSED tests/test_session_storage.py::TestStorageConfig::test_validation_negative_commits
[docker-ci] PASSED tests/test_session_storage.py::TestStorageConfig::test_validation_negative_size
[docker-ci] PASSED tests/test_session_storage.py::TestStorageConfig::test_validation_negative_age
[docker-ci] PASSED tests/test_session_storage.py::TestSessionCommit::test_default_values
[docker-ci] PASSED tests/test_session_storage.py::TestSessionCommit::test_custom_values
[docker-ci] PASSED tests/test_session_storage.py::TestSessionCommit::test_size_calculation
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_initialization
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_initialization_with_config
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_add_commit_basic
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_add_multiple_commits
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_get_commits_all
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_get_commits_with_limit
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_get_commits_by_type
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_get_commits_since_timestamp
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_count_based_capping
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_time_based_capping
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_size_based_capping
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_get_snapshot
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_get_snapshot_with_limit
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_clear_storage
[docker-ci] PASSED tests/test_session_storage.py::TestSessionStorage::test_thread_safety
[docker-ci] PASSED tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_snapshot_with_finalized_transcript
[docker-ci] PASSED tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_resume_metrics_tracking
[docker-ci] PASSED tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_resume_miss_tracking
[docker-ci] PASSED tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_monotonic_timing_in_envelopes
[docker-ci] PASSED tests/test_snapshot_rehydrate.py::TestSnapshotRehydrate::test_final_seq_range_in_snapshot
[docker-ci] PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partial_event_processing
[docker-ci] PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_final_event_processing
[docker-ci] PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_duplicate_final_prevention
[docker-ci] PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partials_after_final_ignored
[docker-ci] PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_partial_backpressure
[docker-ci] PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_snapshot_generation
[docker-ci] PASSED tests/test_streaming_asr.py::TestPartialFinalAggregator::test_stats_tracking
[docker-ci] PASSED tests/test_streaming_asr.py::TestFakeStreamingASR::test_deterministic_behavior
[docker-ci] PASSED tests/test_streaming_asr.py::TestFakeStreamingASR::test_snapshot_functionality
[docker-ci] PASSED tests/test_streaming_asr.py::TestFakeStreamingASR::test_force_finalize
[docker-ci] PASSED tests/test_streaming_asr.py::TestIntegration::test_streaming_asr_with_aggregator
[docker-ci] PASSED tests/test_streaming_asr.py::TestAsyncBridge::test_async_bridge_with_event_loop
[docker-ci] PASSED tests/test_streaming_asr.py::TestAsyncBridge::test_async_bridge_no_event_loop
[docker-ci] PASSED tests/test_streaming_integration.py::TestStreamingIntegration::test_create_streaming_session
[docker-ci] PASSED tests/test_streaming_integration.py::TestStreamingIntegration::test_asr_snapshot_endpoint
[docker-ci] PASSED tests/test_streaming_integration.py::TestStreamingIntegration::test_regular_session_no_asr_snapshot
[docker-ci] PASSED tests/test_streaming_integration.py::TestStreamingIntegration::test_websocket_streaming_events[asyncio]
[docker-ci] PASSED tests/test_streaming_integration.py::TestStreamingIntegration::test_websocket_streaming_events[trio]
[docker-ci] PASSED tests/test_streaming_integration.py::TestStreamingConfiguration::test_streaming_config_validation
[docker-ci] PASSED tests/test_streaming_integration.py::TestStreamingConfiguration::test_model_id_validation
[docker-ci] PASSED tests/test_streaming_integration.py::TestStreamingConfiguration::test_device_selection
[docker-ci] PASSED tests/test_streaming_integration.py::TestSnapshotStatus::test_streaming_session_status_running
[docker-ci] PASSED tests/test_streaming_integration.py::TestSnapshotStatus::test_streaming_session_status_stopped
[docker-ci] PASSED tests/test_streaming_integration.py::TestErrorHygiene::test_metrics_error_no_exception_leak
[docker-ci] PASSED tests/test_streaming_integration.py::TestErrorHygiene::test_snapshot_error_no_exception_leak
[docker-ci] PASSED tests/test_structured_logging.py::TestDataRedactor::test_redact_file_paths
[docker-ci] PASSED tests/test_structured_logging.py::TestDataRedactor::test_redact_sensitive_fields
[docker-ci] PASSED tests/test_structured_logging.py::TestDataRedactor::test_nested_redaction
[docker-ci] PASSED tests/test_structured_logging.py::TestStructuredLogger::test_basic_logging
[docker-ci] PASSED tests/test_structured_logging.py::TestStructuredLogger::test_data_redaction
[docker-ci] PASSED tests/test_structured_logging.py::TestStructuredLogger::test_create_logger_factory
[docker-ci] PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_latency_recording
[docker-ci] PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_throughput_recording
[docker-ci] PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_counters_and_gauges
[docker-ci] PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_timer_functionality
[docker-ci] PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_timer_error_handling
[docker-ci] PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_threshold_monitoring
[docker-ci] PASSED tests/test_structured_logging.py::TestPerformanceMetrics::test_metrics_reset
[docker-ci] PASSED tests/test_structured_logging.py::TestLogRetention::test_log_rotation_by_size
[docker-ci] PASSED tests/test_structured_logging.py::TestLogRetention::test_log_rotation_keeps_max_files
[docker-ci] PASSED tests/test_structured_logging.py::TestLogRetention::test_ci_logger_defaults
[docker-ci] PASSED tests/test_structured_logging.py::TestLogRetention::test_cleanup_old_logs
[docker-ci] PASSED tests/test_structured_logging.py::TestLogRetention::test_log_retention_env_vars
[docker-ci] PASSED tests/test_text_io.py::test_rewrite_keeps_single_last_line
[docker-ci] PASSED tests/test_text_io.py::test_append_enforces_max_lines
[docker-ci] PASSED tests/test_text_io.py::test_utf8_and_trailing_newline
[docker-ci] PASSED tests/test_text_io_concurrency.py::test_rolling_text_concurrent_appends_and_rewrites
[docker-ci] PASSED tests/test_timed_outputs.py::test_vtt_srt_append_order
[docker-ci] PASSED tests/test_units_extra.py::test_timestamp_formatting_helpers
[docker-ci] PASSED tests/test_units_extra.py::test_dtype_kwargs_version_switch
[docker-ci] PASSED tests/test_units_extra.py::test_pick_device_cpu
[docker-ci] PASSED tests/test_units_extra.py::test_post_processing
[docker-ci] PASSED tests/test_vtt_and_mt.py::test_vtt_monotonic
[docker-ci] PASSED tests/test_vtt_and_mt.py::test_translator_bos_handling
[docker-ci] PASSED tests/test_ws_integration.py::test_legacy_message_type_mapping
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_context_manager_cleanup
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_destructor_cancels_tasks
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_initialization
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_custom_configuration
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_add_connection_sends_welcome
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_remove_connection
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_client_hello_handling
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_client_ack_handling
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_domain_event_sending
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_flow_control_prevents_sending
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_request_handling
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_expired_error
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_heartbeat_sending
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_invalid_message_handling
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_unknown_message_type_handling
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_connection_failure_handling
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_session_cleanup_on_all_connections_failed
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_graceful_close
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_ack_spoof_protection
[docker-ci] PASSED tests/test_ws_protocol.py::TestWSProtocolManager::test_resume_with_gaps
[docker-ci] PASSED tests/test_ws_types.py::TestWSEnvelope::test_minimal_envelope
[docker-ci] PASSED tests/test_ws_types.py::TestWSEnvelope::test_full_envelope
[docker-ci] PASSED tests/test_ws_types.py::TestWSEnvelope::test_auto_message_id_generation
[docker-ci] PASSED tests/test_ws_types.py::TestWSEnvelope::test_no_auto_id_without_sid
[docker-ci] PASSED tests/test_ws_types.py::TestWSEnvelope::test_json_serialization
[docker-ci] PASSED tests/test_ws_types.py::TestDomainEventData::test_asr_partial_data
[docker-ci] PASSED tests/test_ws_types.py::TestDomainEventData::test_asr_final_data
[docker-ci] PASSED tests/test_ws_types.py::TestDomainEventData::test_mt_final_data
[docker-ci] PASSED tests/test_ws_types.py::TestDomainEventData::test_status_data
[docker-ci] PASSED tests/test_ws_types.py::TestControlMessages::test_client_hello
[docker-ci] PASSED tests/test_ws_types.py::TestControlMessages::test_client_hello_with_resume
[docker-ci] PASSED tests/test_ws_types.py::TestControlMessages::test_server_welcome
[docker-ci] PASSED tests/test_ws_types.py::TestSessionState::test_session_initialization
[docker-ci] PASSED tests/test_ws_types.py::TestSessionState::test_sequence_generation
[docker-ci] PASSED tests/test_ws_types.py::TestSessionState::test_monotonic_time_calculation
[docker-ci] PASSED tests/test_ws_types.py::TestSessionState::test_flow_control_limits
[docker-ci] PASSED tests/test_ws_types.py::TestSessionState::test_replay_buffer_management
[docker-ci] PASSED tests/test_ws_types.py::TestSessionState::test_replay_message_retrieval
[docker-ci] PASSED tests/test_ws_types.py::TestSessionState::test_cumulative_ack_processing
[docker-ci] PASSED tests/test_ws_types.py::TestSessionState::test_per_message_ack_processing
[docker-ci] SKIPPED [1] ../home/guff/LoquiLex/tests/test_mt_integration.py:25: Skip MT integration tests in offline mode
[docker-ci] SKIPPED [1] ../home/guff/LoquiLex/tests/test_mt_registry.py:82: Skip MT provider tests in offline mode
[docker-ci] SKIPPED [1] ../home/guff/LoquiLex/tests/test_resilient_comms.py:169: System heartbeat causes infinite loop in tests
[docker-ci] SKIPPED [1] ../home/guff/LoquiLex/tests/test_resilient_comms.py:215: Need to fix ReplayBuffer TTL setup
[docker-ci] ================ 261 passed, 4 skipped, 10 deselected in 26.29s ================
[docker-ci] === Pytest (e2e) ===
[docker-ci] ..........                                                               [100%]
[docker-ci] 10 passed, 265 deselected in 3.82s
EXIT:0
### 2025-09-22T09:47:17Z — Docker CI
**Mode:** Workspace-Only
**Network:** Offline (no model downloads)
**Secrets/CI:** Unchanged

- Docker CI path: make docker-ci
- Result: PASS (unit+e2e)

### 2025-09-22T09:48:10Z — Push & PR Update
**Mode:** Workspace-Only
**Network:** Offline (no model downloads)
**Secrets/CI:** Unchanged

- Pushed branch: copilot/fix-107
- PR updated: https://github.com/Guffawaffle/LoquiLex/pull/123
- Conflict Resolution: Combined model defaults endpoints with hardware snapshot feature.
- Used ephemeral merge attributes (union) for additive files.

n## Executive Summary
- Reconciled PR #123 (copilot/fix-107) with origin/main; resolved conflicts in server.py combining features.
- Docker CI path make docker-ci: PASS (261 passed, 10 deselected; e2e 10 passed).

**Git:** branch=copilot/fix-107, head=2261a76, base=origin/main@0c60489
**Env:** Python Python 3.12.3; Ruff ruff 0.13.0; mypy mypy 1.18.1 (compiled: yes); OS=Linux 6.6.87.2-microsoft-standard-WSL2
