/home/guff/LoquiLex/tests/fakes/fake_mt.py/home/guff/LoquiLex/tests/fakes/home/guff/LoquiLex/tests/home/guff/LoquiLex/home/guff/home//home/guff/LoquiLex/tests/test_e2e_resume_flow.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_offline_env.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/home/guff/LoquiLex/ql-db-py/src/home/guff/home/guff/LoquiLex/ql-db-py/src/home/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/ql-db-py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_bounded_queue.py/home/guff/LoquiLex/loquilex/output/srt.py/home/guff/LoquiLex/loquilex/output/home/guff/LoquiLex/loquilex/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_api_minimal_session.py/home/guff/LoquiLex/tests/__init__.py/home/guff/LoquiLex/tests/test_e2e_websocket_api.py/home/guff/LoquiLex/tests/test_cli_integration_offline.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/fakes/fake_audio.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/fakes/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_snapshot_rehydrate.py/home/guff/LoquiLex/loquilex/output/paths.py/home/guff/LoquiLex/loquilex/security/__init__.py/home/guff/LoquiLex/loquilex/security/home/guff/LoquiLex/loquilex/api/ws_protocol.py/home/guff/LoquiLex/loquilex/api/home/guff/LoquiLex/tests/test_resource_management.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_live_outputs.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/security/test_path_guard.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/security/home/guff/LoquiLex/loquilex/indexing/__init__.py/home/guff/LoquiLex/loquilex/indexing/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_api_minimal_http.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_storage_api.py/home/guff/LoquiLex/loquilex/asr/whisper_engine.py/home/guff/LoquiLex/loquilex/asr/home/guff/LoquiLex/tests/test_structured_logging.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_safe_broadcast.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_e2e_websocket_api.py/home/guff/LoquiLex/loquilex/api/supervisor.py/home/guff/LoquiLex/tests/test_bounded_queue.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_admin_cache.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_ws_integration.py/home/guff/LoquiLex/loquilex/indexing/worker.py/home/guff/LoquiLex/loquilex/config/model_defaults.py/home/guff/LoquiLex/loquilex/config/home/guff/LoquiLex/tests/test_api_model_endpoints.py/home/guff/LoquiLex/tests/test_resilient_comms.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_text_io.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/util/__init__.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/util/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_hardware_detection.py/home/guff/LoquiLex/loquilex/mt/tokenizers/nllb.py/home/guff/LoquiLex/loquilex/mt/tokenizers/home/guff/LoquiLex/loquilex/mt/home/guff/LoquiLex/loquilex/mt/core/registry.py/home/guff/LoquiLex/loquilex/mt/core/home/guff/LoquiLex/loquilex/mt/integration.py/home/guff/LoquiLex/tests/test_api_hardware.py/home/guff/LoquiLex/tests/util/audio.py/home/guff/LoquiLex/tests/util/home/guff/LoquiLex/tests/test_units_extra.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/fakes/__init__.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_mt_registry.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_mt_integration.py/home/guff/LoquiLex/loquilex/logging/metrics.py/home/guff/LoquiLex/loquilex/logging/home/guff/LoquiLex/loquilex/mt/providers/ct2_m2m.py/home/guff/LoquiLex/loquilex/mt/providers/home/guff/LoquiLex/tests/test_ws_protocol.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_offline_isolation.py/home/guff/LoquiLex/loquilex/asr/__init__.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_cli_integration_offline.py/home/guff/LoquiLex/loquilex/hardware/detection.py/home/guff/LoquiLex/loquilex/hardware/home/guff/LoquiLex/tests/test_safe_broadcast.py/home/guff/LoquiLex/tests/test_ws_integration.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/conftest.py/home/guff/LoquiLex/loquilex/asr/aggregator.py/home/guff/LoquiLex/loquilex/output/vtt.py/home/guff/LoquiLex/loquilex/mt/core/util.py/home/guff/LoquiLex/tests/test_streaming_integration.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_resource_management.py/home/guff/LoquiLex/loquilex/hardware/__init__.py/home/guff/LoquiLex/loquilex/mt/providers/ct2_nllb.py/home/guff/LoquiLex/tests/fakes/__init__.py/home/guff/LoquiLex/tests/test_ws_types.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_streaming_integration.py/home/guff/LoquiLex/loquilex/mt/__init__.py/home/guff/LoquiLex/loquilex/mt/providers/__init__.py/home/guff/LoquiLex/loquilex/tests/test_env_prefix.py/home/guff/LoquiLex/loquilex/tests/home/guff/LoquiLex/loquilex/api/server.py/home/guff/LoquiLex/tests/fakes/fake_audio.py/home/guff/LoquiLex/tests/test_session_state_integration.py/home/guff/LoquiLex/scripts/clear_cache.py/home/guff/LoquiLex/scripts/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_e2e_resume_flow.py/home/guff/LoquiLex/loquilex/config/paths.py/home/guff/LoquiLex/loquilex/api/ws_types.py/home/guff/LoquiLex/tests/test_model_defaults.py/home/guff/LoquiLex/tests/util/__init__.py/home/guff/LoquiLex/tests/test_hardware_detection.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_api_hardware.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/util/audio.py/home/guff/LoquiLex/loquilex/mt/translator.py/home/guff/LoquiLex/tests/test_streaming_asr.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/api/test_path_traversal_rejection.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/api/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_config_env.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_timed_outputs.py/home/guff/LoquiLex/loquilex/config/defaults.py/home/guff/LoquiLex/loquilex/asr/metrics.py/home/guff/LoquiLex/tests/test_admin_cache.py/home/guff/LoquiLex/tests/test_text_io.py/home/guff/LoquiLex/tests/test_session_storage.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_units_extra.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_model_indexing.py/home/guff/LoquiLex/loquilex/cli/vtt_to_zh.py/home/guff/LoquiLex/loquilex/cli/home/guff/LoquiLex/loquilex/mt/tokenizers/__init__.py/home/guff/LoquiLex/loquilex/api/model_discovery.py/home/guff/LoquiLex/tests/fakes/fake_streaming_asr.py/home/guff/LoquiLex/tests/test_storage_api.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/fakes/fake_mt.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/__init__.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_compat_versions.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_ws_types.py/home/guff/LoquiLex/loquilex/cli/live_en_to_zh.py/home/guff/LoquiLex/tests/fakes/fake_whisper.py/home/guff/LoquiLex/tests/test_compat_versions.py/home/guff/LoquiLex/tests/test_config_env.py/home/guff/LoquiLex/tests/test_offline_isolation.py/home/guff/LoquiLex/tests/test_config_parsing.py/home/guff/LoquiLex/scripts/vtt_smoke_test.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_cli_smoke.py/home/guff/LoquiLex/loquilex/logging/structured.py/home/guff/LoquiLex/loquilex/logging/redaction.py/home/guff/LoquiLex/loquilex/mt/service.py/home/guff/LoquiLex/tests/conftest.py/home/guff/LoquiLex/tests/util/monotonic.py/home/guff/LoquiLex/tests/test_timed_outputs.py/home/guff/LoquiLex/scripts/dev_fetch_models.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_model_defaults.py/home/guff/LoquiLex/loquilex/api/vu.py/home/guff/LoquiLex/loquilex/mt/tokenizers/m2m.py/home/guff/LoquiLex/loquilex/logging/__init__.py/home/guff/LoquiLex/loquilex/security/path_guard.py/home/guff/LoquiLex/tests/test_offline_env.py/home/guff/LoquiLex/tests/test_snapshot_rehydrate.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/fakes/fake_whisper.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_path_guard.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_api_modules_import.py/home/guff/LoquiLex/loquilex/api/session_storage.py/home/guff/LoquiLex/loquilex/audio/resample.py/home/guff/LoquiLex/loquilex/audio/home/guff/LoquiLex/loquilex/api/events.py/home/guff/LoquiLex/loquilex/cli/wav_to_vtt.py/home/guff/LoquiLex/loquilex/__init__.py/home/guff/LoquiLex/tests/test_live_outputs.py/home/guff/LoquiLex/tests/test_asr_metrics.py/home/guff/LoquiLex/tests/test_path_guard.py/home/guff/LoquiLex/tests/test_cli_smoke.py/home/guff/LoquiLex/tests/test_api_minimal_session.py/home/guff/LoquiLex/scripts/parse_junit_failures.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_session_state_integration.py/home/guff/LoquiLex/loquilex/mt/core/types.py/home/guff/LoquiLex/loquilex/api/bounded_queue.py/home/guff/LoquiLex/tests/test_mt_registry.py/home/guff/LoquiLex/tests/security/test_path_guard.py/home/guff/LoquiLex/tests/security/home/guff/LoquiLex/tests/test_vtt_and_mt.py/home/guff/LoquiLex/tests/test_text_io_concurrency.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_api_model_endpoints.py/home/guff/LoquiLex/loquilex/segmentation/aggregator.py/home/guff/LoquiLex/loquilex/segmentation/home/guff/LoquiLex/loquilex/post/zh_text.py/home/guff/LoquiLex/loquilex/post/home/guff/LoquiLex/loquilex/mt/core/protocol.py/home/guff/LoquiLex/loquilex/mt/core/__init__.py/home/guff/LoquiLex/loquilex/mt/tests/__init__.py/home/guff/LoquiLex/loquilex/mt/tests/home/guff/LoquiLex/loquilex/audio/capture.py/home/guff/LoquiLex/tests/test_aggregator.py/home/guff/LoquiLex/tests/test_api_minimal_http.py/home/guff/LoquiLex/tests/test_model_indexing.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/fakes/fake_streaming_asr.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_config_parsing.py/home/guff/LoquiLex/loquilex/asr/stream.py/home/guff/LoquiLex/tests/api/test_path_traversal_rejection.py/home/guff/LoquiLex/tests/api/home/guff/LoquiLex/tests/test_api_modules_import.py/home/guff/LoquiLex/tests/test_mt_integration.py/home/guff/LoquiLex/demo_structured_logging.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_aggregator.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_vtt_and_mt.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/test_text_io_concurrency.py/home/guff/LoquiLex/ql-db-py/src/home/guff/LoquiLex/tests/util/monotonic.py/home/guff/LoquiLex/loquilex/output/text_io.py/home/guff/LoquiLex/loquilex/api/__init__.py/home/guff/LoquiLex/loquilex/mt/tests/test_contract_provider.pyextractor_python_version.major3extractor_python_version.minor12extractor_python_version.microextractor_python_version.releaselevelfinalextractor_python_version.serial0flags.bytes_warningflags.debugflags.dev_modeFalseflags.dont_write_bytecodeflags.hash_randomization1flags.ignore_environmentflags.inspectflags.int_max_str_digits4300flags.interactiveflags.isolatedflags.n_fields18flags.n_sequence_fieldsflags.n_unnamed_fieldsflags.no_siteflags.no_user_siteflags.optimizeflags.quietflags.safe_pathflags.utf8_modeflags.verboseflags.warn_default_encodingfloat.dig15float.epsilon2.220446049250313e-16float.mant_dig53float.max1.7976931348623157e+308float.max_10_exp308float.max_exp1024float.min2.2250738585072014e-308float.min_10_exp-307float.min_exp-1021float.n_fields11float.n_sequence_fieldsfloat.n_unnamed_fieldsfloat.radix2float.roundsoptions.alloptions.colorizeoptions.extract_stdliboptions.guessoptions.helpoptions.ignore_missing_modulesoptions.introspect_coptions.max_import_depthinfoptions.max_procsalloptions.no_symlinksoptions.no_syntax_errorsoptions.noneoptions.pruneTrueoptions.quietoptions.respect_initoptions.splitoptions.topoptions.trace_onlyoptions.trap_cache/home/guff/LoquiLex/ql-db-py/working/trap_cacheoptions.unrolloptions.verboseoptions.verbositysys.prefix/usrsys.path/usr/lib/python312.zip:/usr/lib/python3.12:/usr/lib/python3.12/lib-dynloadlanguage.version3.12extractor.pathsys.platformlinuxos.sepos.pathsep:extractor.version7.1.3__call____repr____getattribute____get____set____delete____objclass____bool____doc____eq____ge____gt____hash____le____lt____ne____add____contains__u'str(object='') -> str
str(bytes_or_buffer[, encoding[, errors]]) -> str

Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.__str__() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.'u'method_descriptor.__doc__'__qualname__u'member_descriptor.__doc__'__name__u'member_descriptor.__qualname__'__reduce__u'the object's class'u'object.__class__'__class____delattr____dir__u'The base class of the class hierarchy.

When called, it accepts no arguments and returns a new featureless
instance that has no instance attributes and cannot be given any.
'__format____getstate____init__u'classmethod_descriptor.__doc__'u'classmethod_descriptor.__qualname__'u'classmethod_descriptor.__text_signature__'__text_signature__.super.classmethod_descriptor__init_subclass____new____reduce_ex____setattr____sizeof____str____subclasshook__objectmember_descriptoru'method_descriptor.__qualname__'u'method_descriptor.__text_signature__'method_descriptor__getitem____getnewargs____iter____len____mod____mul____rmod____rmul__capitalizecasefoldcentercountencodeendswithexpandtabsfindformatformat_mapindexisalnumisalphaisasciiisdecimalisdigitisidentifierislowerisnumericisprintableisspaceistitleisupperjoinljustlowerlstripu'staticmethod.__dict__'__dict__u'staticmethod(function) -> method

Convert a function to be a static method.

A static method does not receive an implicit first argument.
To declare a static method, use this idiom:

     class C:
         @staticmethod
         def f(arg1, arg2, argN):
             ...

It can be called either on the class (e.g. C.f()) or on an instance
(e.g. C().f()). Both the class and the instance are ignored, and
neither is passed implicitly as the first argument to the method.

Static methods in Python are similar to those found in Java or C++.
For a more advanced concept, see the classmethod builtin.'__func__u'staticmethod.__isabstractmethod__'__isabstractmethod____wrapped__staticmethodmaketranspartitionremoveprefixremovesuffixreplacerfindrindexrjustrpartitionrsplitrstripsplitsplitlinesstartswithstripswapcasetitletranslateupperzfillunicodeu'builtin_function_or_method.__doc__'__module__u'builtin_function_or_method.__name__'u'builtin_function_or_method.__qualname__'u'builtin_function_or_method.__self__'__self__u'builtin_function_or_method.__text_signature__'builtin_function_or_methodNoneTypeNoneu'method-wrapper.__doc__'u'method-wrapper.__name__'u'method-wrapper.__objclass__'u'method-wrapper.__qualname__'u'method-wrapper.__text_signature__'method-wrapperu'wrapper_descriptor.__doc__'u'wrapper_descriptor.__qualname__'u'wrapper_descriptor.__text_signature__'wrapper_descriptoru'getset_descriptor.__doc__'u'getset_descriptor.__qualname__'getset_descriptoru'type.__abstractmethods__'__abstractmethods__u'type.__annotations__'__annotations____base__u'type.__bases__'__bases____basicsize__u'type.__dict__'__dictoffset__u'type.__doc__'__flags____instancecheck____itemsize__u'type.__module__'u'type.__mro__'__mro__u'type.__name__'__or____prepare__u'type.__qualname__'__ror____subclasscheck____subclasses__u'type.__text_signature__'u'type.__type_params__'__type_params____weakrefoffset__mrotypeu'function.__annotations__'__builtins____closure__u'function.__code__'__code__u'function.__defaults__'__defaults__u'function.__dict__'__globals__u'function.__kwdefaults__'__kwdefaults__u'function.__name__'u'function.__qualname__'u'function.__type_params__'functionFunctionTypeBuiltinFunctionTypeu'classmethod.__dict__'u'classmethod(function) -> method

Convert a function to be a class method.

A class method receives the class as implicit first argument,
just like an instance method receives the instance.
To declare a class method, use this idiom:

  class C:
      @classmethod
      def f(cls, arg1, arg2, argN):
          ...

It can be called either on the class (e.g. C.f()) or on an instance
(e.g. C().f()).  The instance is ignored except for its class.
If a class method is called for a derived class, the derived class
object is passed as the implied first argument.

Class methods are different than C++ or Java static methods.
If you want those, see the staticmethod builtin.'u'classmethod.__isabstractmethod__'classmethodClassMethodStaticMethodu'module.__annotations__'u'Create a module object.

The name must be a string; the optional doc argument can have any type.'moduleModuleType__del__u'name of the generator'u'generator.__name__'__next__u'qualified name of the generator'u'generator.__qualname__'closeu'generator.gi_code'gi_codeu'generator.gi_frame'gi_frameu'generator.gi_running'gi_runningu'generator.gi_suspended'gi_suspendedu'object being iterated by yield from, or None'u'generator.gi_yieldfrom'gi_yieldfromsendthrowgenerator__and__u'bool(x) -> bool

Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.'__invert____rand____rxor____xor____abs____ceil____divmod__u'int([x]) -> integer
int(x, base=10) -> integer

Convert a number or string to an integer, or return 0 if no arguments
are given.  If x is a number, return x.__int__().  For floating point
numbers, this truncates towards zero.

If x is not a number or if base is given, then x must be a string,
bytes, or bytearray instance representing an integer literal in the
given base.  The literal can be preceded by '+' or '-' and be surrounded
by whitespace.  The base defaults to 10.  Valid bases are 0 and 2-36.
Base 0 means to interpret the base from the string as an integer literal.
>>> int('0b100', base=0)
4'__float____floor____floordiv____index____int____lshift____neg____pos____pow____radd____rdivmod____rfloordiv____rlshift____round____rpow____rrshift____rshift____rsub____rtruediv____sub____truediv____trunc__as_integer_ratiobit_countbit_lengthconjugateu'the denominator of a rational number in lowest terms'u'int.denominator'denominatorfrom_bytesu'the imaginary part of a complex number'u'int.imag'imagis_integeru'the numerator of a rational number in lowest terms'u'int.numerator'numeratoru'the real part of a complex number'u'int.real'realto_bytesintboolbreakpointhook__breakpointhook__displayhook__displayhook__u'This module provides access to some objects used or maintained by the
interpreter and to functions that interact strongly with the interpreter.

Dynamic objects:

argv -- command line arguments; argv[0] is the script pathname if known
path -- module search path; path[0] is the script directory, else ''
modules -- dictionary of loaded modules

displayhook -- called to show results in an interactive session
excepthook -- called to handle any uncaught exception other than SystemExit
  To customize printing in an interactive session or to install a custom
  top-level exception handler, assign other functions to replace these.

stdin -- standard input file object; used by input()
stdout -- standard output file object; used by print()
stderr -- standard error object; used for error messages
  By assigning other file objects (or objects that behave like files)
  to these, it is possible to redirect all of the interpreter's I/O.

last_exc - the last uncaught exception
  Only available in an interactive session after a
  traceback has been printed.
last_type -- type of last uncaught exception
last_value -- value of last uncaught exception
last_traceback -- traceback of last uncaught exception
  These three are the (deprecated) legacy representation of last_exc.

Static objects:

builtin_module_names -- tuple of module names built into this interpreter
copyright -- copyright notice pertaining to this interpreter
exec_prefix -- prefix used to find the machine-specific Python library
executable -- absolute path of the executable binary of the Python interpreter
float_info -- a named tuple with information about the float implementation.
float_repr_style -- string indicating the style of repr() output for floats
hash_info -- a named tuple with information about the hash algorithm.
hexversion -- version information encoded as a single integer
implementation -- Python implementation information.
int_info -- a named tuple with information about the int implementation.
maxsize -- the largest supported length of containers.
maxunicode -- the value of the largest Unicode code point
platform -- platform identifier
prefix -- prefix used to find the Python library
thread_info -- a named tuple with information about the thread implementation.
version -- the version of this interpreter as a string
version_info -- version information as a named tuple
__stdin__ -- the original stdin; don't touch!
__stdout__ -- the original stdout; don't touch!
__stderr__ -- the original stderr; don't touch!
__displayhook__ -- the original displayhook; don't touch!
__excepthook__ -- the original excepthook; don't touch!

Functions:

displayhook() -- print an object to the screen, and save it in builtins._
excepthook() -- print an exception and its traceback to sys.stderr
exception() -- return the current thread's active exception
exc_info() -- return information about the current thread's active exception
exit() -- exit the interpreter by raising SystemExit
getdlopenflags() -- returns flags to be used for dlopen() calls
getprofile() -- get the global profiling function
getrefcount() -- return the reference count for an object (plus one :-)
getrecursionlimit() -- return the max recursion depth for the interpreter
getsizeof() -- return the size of an object in bytes
gettrace() -- get the global debug tracing function
setdlopenflags() -- set the flags to be used for dlopen() calls
setprofile() -- set the global profiling function
setrecursionlimit() -- set the max recursion depth for the interpreter
settrace() -- set the global debug tracing function
'excepthook__excepthook__u'built-in'_ORIGINu'dictionary for instance variables'u'BuiltinImporter.__dict__'u'Meta path import for built-in modules.

    All methods are either class or static methods to avoid the need to
    instantiate the class.

    'u'_frozen_importlib'u'list of weak references to the object'u'BuiltinImporter.__weakref__'__weakref__create_moduleexec_modulefind_specget_codeget_sourceis_package_load_module_shimload_module_frozen_importlib.BuiltinImporter__loader__u'sys'u''__package__u'ModuleSpec.__dict__'u'The specification for a module, used for loading.

    A module's spec is the source for information about the module.  For
    data associated with the module, including source, use the spec's
    loader.

    `name` is the absolute name of the module.  `loader` is the loader
    to use when loading the module.  `parent` is the name of the
    package the module is in.  The parent is derived from the name.

    `is_package` determines if the module is considered a package or
    not.  On modules this is reflected by the `__path__` attribute.

    `origin` is the specific location used by the loader from which to
    load the module, if that information is available.  When filename is
    set, origin will match.

    `has_location` indicates that a spec's "origin" reflects a location.
    When this is True, `__file__` attribute of the module is set.

    `cached` is the location of the cached bytecode file, if any.  It
    corresponds to the `__cached__` attribute.

    `submodule_search_locations` is the sequence of path entries to
    search when importing submodules.  If set, is_package should be
    True--and False otherwise.

    Packages are simply modules that (may) have submodules.  If a spec
    has a non-None value in `submodule_search_locations`, the import
    system will consider modules loaded from the spec as packages.

    Only finders (see importlib.abc.MetaPathFinder and
    importlib.abc.PathEntryFinder) should modify ModuleSpec instances.

    'u'ModuleSpec.__weakref__'u'property.__isabstractmethod__'__set_name__deleterfdelfgetfsetgettersetterpropertycachedhas_locationparent_frozen_importlib.ModuleSpec__spec__u'TextIOWrapper._CHUNK_SIZE'_CHUNK_SIZEu'Character and line based layer over a BufferedIOBase object, buffer.

encoding gives the name of the encoding that the stream will be
decoded or encoded with. It defaults to locale.getencoding().

errors determines the strictness of encoding and decoding (see
help(codecs.Codec) or the documentation for codecs.register) and
defaults to "strict".

newline controls how line endings are handled. It can be None, '',
'\n', '\r', and '\r\n'.  It works as follows:

* On input, if newline is None, universal newlines mode is
  enabled. Lines in the input can end in '\n', '\r', or '\r\n', and
  these are translated into '\n' before being returned to the
  caller. If it is '', universal newline mode is enabled, but line
  endings are returned to the caller untranslated. If it has any of
  the other legal values, input lines are only terminated by the given
  string, and the line ending is returned to the caller untranslated.

* On output, if newline is None, any '\n' characters written are
  translated to the system default line separator, os.linesep. If
  newline is '' or '\n', no translation takes place. If newline is any
  of the other legal values, any '\n' characters written are translated
  to the given string.

If line_buffering is True, a call to flush is implied when a call to
write contains a newline character.'u'_io'_finalizingbufferu'TextIOWrapper.closed'closeddetachencodingu'TextIOWrapper.errors'errorsfilenoflushisattyline_bufferingu'TextIOWrapper.name'nameu'TextIOWrapper.newlines'newlinesreadreadablereadlinereconfigureseekseekabletelltruncatewritablewritewrite_throughu'Base class for text I/O.

This class provides a character and line based interface to stream
I/O. There is no readinto method because Python's character strings
are immutable.
'u'Encoding of the text stream.

Subclasses should override.
'u'_TextIOBase.encoding'u'The error setting of the decoder or encoder.

Subclasses should override.
'u'_TextIOBase.errors'u'Line endings translated so far.

Only line endings translated during reading are considered.

Subclasses should override.
'u'_TextIOBase.newlines'u'_IOBase.__dict__'u'The abstract base class for all I/O classes.

This class provides dummy implementations for many methods that
derived classes can override selectively; the default implementations
represent a file that cannot be read, written or seeked.

Even though IOBase does not declare read, readinto, or write because
their signatures will vary, implementations and clients should
consider those methods part of the interface. Also, implementations
may raise UnsupportedOperation when operations they do not support are
called.

The basic type used for binary data read from or written to a file is
bytes. Other bytes-like objects are accepted as method arguments too.
In some cases (such as readinto), a writable object is required. Text
I/O classes work with str data.

Note that calling any method (except additional calls to close(),
which are ignored) on a closed stream should raise a ValueError.

IOBase (and its subclasses) support the iterator protocol, meaning
that an IOBase object can be iterated over yielding the lines in a
stream.

IOBase also supports the :keyword:`with` statement. In this example,
fp is closed after the suite of the with statement is complete:

with open('spam.txt', 'r') as fp:
    fp.write('Spam and eggs!')
'__enter____exit___checkClosed_checkReadable_checkSeekable_checkWritableu'_IOBase.closed'readlineswritelines_io._IOBase_io._TextIOBase_io.TextIOWrapper__stderr____stdin____stdout__unraisablehook__unraisablehook__u'/usr/bin/python3.12'_base_executable_clear_type_cache_current_exceptions_current_frames_debugmallocstats_framework_getframe_getframemodulename__class_getitem__u'Built-in immutable sequence.

If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.

If the argument is a tuple, the return value is the same object.'tupleu'CPython'_git_setprofileallthreads_settraceallthreadsu'/usr/lib/python3.12'_stdlib_dir__delitem__u'dict() -> new empty dictionary
dict(mapping) -> new dictionary initialized from a mapping object's
    (key, value) pairs
dict(iterable) -> new dictionary initialized as if via:
    d = {}
    for k, v in iterable:
        d[k] = v
dict(**kwargs) -> new dictionary initialized with the name=value pairs
    in the keyword argument list.  For example:  dict(one=1, two=2)'__ior____reversed____setitem__clearcopyfromkeysgetitemskeyspoppopitemsetdefaultupdatevaluesdict_xoptionsabiflagsactivate_stack_trampolineaddaudithook1013api_versionu'Built-in mutable sequence.

If no argument is given, the constructor creates a new empty list.
The argument must be an iterable if specified.'__iadd____imul__appendextendinsertremovereversesortlistu'/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/python/tools/python_tracer.py'u'--verbosity'u'3'u'-z'u'all'u'-c'u'/home/guff/LoquiLex/ql-db-py/working/trap_cache'u'-R'u'/home/guff/LoquiLex'u'-Y'u'/home/guff/LoquiLex/.direnv/python-3.12.3'u'/home/guff/LoquiLex/.venv'u'/home/guff/LoquiLex/ui/.venv'argvauditu'/usr'base_exec_prefixbase_prefixu'_abc'u'_ast'u'_bisect'u'_blake2'u'_codecs'u'_collections'u'_csv'u'_datetime'u'_elementtree'u'_functools'u'_heapq'u'_imp'u'_locale'u'_md5'u'_opcode'u'_operator'u'_pickle'u'_posixsubprocess'u'_random'u'_sha1'u'_sha2'u'_sha3'u'_signal'u'_socket'u'_sre'u'_stat'u'_statistics'u'_string'u'_struct'u'_symtable'u'_thread'u'_tokenize'u'_tracemalloc'u'_typing'u'_warnings'u'_weakref'u'array'u'atexit'u'binascii'u'builtins'u'cmath'u'errno'u'faulthandler'u'fcntl'u'gc'u'grp'u'itertools'u'marshal'u'math'u'posix'u'pwd'u'pyexpat'u'select'u'spwd'u'syslog'u'time'u'unicodedata'u'zlib'builtin_module_namesu'little'byteordercall_tracingu'Copyright (c) 2001-2023 Python Software Foundation.
All Rights Reserved.

Copyright (c) 2000 BeOpen.com.
All Rights Reserved.

Copyright (c) 1995-2001 Corporation for National Research Initiatives.
All Rights Reserved.

Copyright (c) 1991-1995 Stichting Mathematisch Centrum, Amsterdam.
All Rights Reserved.'copyrightdeactivate_stack_trampolinedont_write_bytecodeexc_infoexceptionexec_prefixu'/home/guff/LoquiLex/.venv/bin/python3'executableexitu'sys.flags

Flags provided through command line arguments or environment vars.'u'debug'u'inspect'u'interactive'u'optimize'u'dont_write_bytecode'u'no_user_site'u'no_site'u'ignore_environment'u'verbose'u'bytes_warning'u'quiet'u'hash_randomization'u'isolated'u'dev_mode'u'utf8_mode'u'warn_default_encoding'u'safe_path'u'int_max_str_digits'__match_args__bytes_warningdebugdev_modehash_randomizationignore_environmentinspectint_max_str_digitsinteractiveisolatedn_fieldsn_sequence_fieldsn_unnamed_fieldsno_siteno_user_siteoptimizequietsafe_pathutf8_modeverbosewarn_default_encodingsys.flagsflagsu'sys.float_info

A named tuple holding information about the float type. It contains low level
information about the precision and internal representation. Please study
your system's :file:`float.h` for more information.'u'max'u'max_exp'u'max_10_exp'u'min'u'min_exp'u'min_10_exp'u'dig'u'mant_dig'u'epsilon'u'radix'u'rounds'digepsilonmant_digmaxmax_10_expmax_expminmin_10_expmin_expradixroundssys.float_infou'Convert a string or number to a floating point number, if possible.'__getformat__fromhexhexu'float.imag'u'float.real'floatfloat_infou'short'float_repr_styleget_asyncgen_hooksget_coroutine_origin_tracking_depthget_int_max_str_digitsgetallocatedblocksgetdefaultencodinggetdlopenflagsgetfilesystemencodeerrorsgetfilesystemencodinggetprofilegetrecursionlimitgetrefcountgetsizeofgetswitchintervalgettracegetunicodeinternedsizeu'hash_info

A named tuple providing parameters used for computing
hashes. The attributes are read only.'u'width'u'modulus'u'inf'u'nan'u'imag'u'algorithm'u'hash_bits'u'seed_bits'u'cutoff'algorithmcutoffhash_bitsmodulus9nanseed_bitswidthsys.hash_info6423058430092136939513141591000003u'siphash13'128hash_info51119088hexversionu'A simple attribute-based namespace.

SimpleNamespace(**kwargs)'types.SimpleNamespaceimplementationu'sys.int_info

A named tuple that holds information about Python's
internal representation of integers.  The attributes are read only.'u'bits_per_digit'u'sizeof_digit'u'default_max_str_digits'u'str_digits_check_threshold'bits_per_digitdefault_max_str_digits4sizeof_digitstr_digits_check_thresholdsys.int_info30640int_infointernis_finalizingis_stack_trampoline_active9223372036854775807maxsize1114111maxunicodeu'frozen'u'/'_SEPu'FrozenImporter.__dict__'u'Meta path import for frozen modules.

    All methods are either class or static methods to avoid the need to
    instantiate the class.

    'u'FrozenImporter.__weakref__'_fix_up_module_resolve_filename_frozen_importlib.FrozenImporteru'PathFinder.__dict__'u'Meta path finder for sys.path and package __path__ attributes.'u'_frozen_importlib_external'u'PathFinder.__weakref__'_get_spec_path_hooks_path_importer_cachefind_distributionsinvalidate_caches_frozen_importlib_external.PathFindermeta_pathmodulesCOVERAGE_IDDEBUGGER_IDDISABLEMISSING5OPTIMIZER_IDPROFILER_IDu'sys.monitoring'_all_eventseventsfree_tool_idget_eventsget_local_eventsget_toolregister_callbackrestart_eventsset_eventsset_local_eventsuse_tool_idsys.monitoringmonitoringu'python3'u'-S'orig_argvu'/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/python/tools/python3src.zip'u'/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/python/tools'u'/usr/lib/python312.zip'u'/usr/lib/python3.12/lib-dynload'pathu'zipimporter(archivepath) -> zipimporter object

    Create a new zipimporter instance. 'archivepath' must be a path to
    a zipfile, or to a specific path inside a zipfile. For example, it can be
    '/tmp/myimport.zip', or '/tmp/myimport.zip/mydirectory', if mydirectory is a
    valid directory inside the archive.

    'ZipImportError is raised if 'archivepath' doesn't point to a valid Zip
    archive.

    The 'archive' attribute of zipimporter objects contains the name of the
    zipfile targeted.
    'u'zipimport'get_dataget_filenameget_resource_readeru'_LoaderBasics.__dict__'u'Base class of common code needed by both SourceLoader and
    SourcelessFileLoader.'u'_LoaderBasics.__weakref__'_frozen_importlib_external._LoaderBasicszipimport.zipimporterpath_hook_for_FileFinderpath_hookspath_importer_cacheu'linux'platformu'lib'platlibdirprefixpycache_prefixset_asyncgen_hooksset_coroutine_origin_tracking_depthset_int_max_str_digitssetdlopenflagssetprofilesetrecursionlimitsetswitchintervalsettracestderrstdinu'frozenset() -> empty frozenset object
frozenset(iterable) -> frozenset object

Build an immutable unordered collection of unique elements.'differenceintersectionisdisjointissubsetissupersetsymmetric_differenceunionfrozensetstdlib_module_namesstdoutu'sys.thread_info

A named tuple holding information about the thread implementation.'u'name'u'lock'u'version'lockversionsys.thread_infou'pthread'u'semaphore'u'NPTL 2.39'thread_infou'3.12.3 (main, Aug 14 2025, 17:47:21) [GCC 13.3.0]'u'sys.version_info

Version information as a named tuple.'u'major'u'minor'u'micro'u'releaselevel'u'serial'majormicrominorreleaselevelserialsys.version_infou'final'version_infowarnoptionssysu'Common base class for all non-exit exceptions.'u'exception cause'u'BaseException.__cause__'__cause__u'exception context'u'BaseException.__context__'__context__u'BaseException.__dict__'u'Common base class for all exceptions'__setstate____suppress_context__u'BaseException.__traceback__'__traceback__add_noteu'BaseException.args'argswith_tracebackBaseExceptionExceptionu'Inappropriate argument type.'TypeErroru'Attribute not found.'objAttributeErroru'Mapping key not found.'u'Base class for lookup errors.'LookupErrorKeyErroru'set() -> new empty set object
set(iterable) -> new set object

Build an unordered collection of unique elements.'__iand____isub____ixor__adddifference_updatediscardintersection_updatesymmetric_difference_updatesetlocalsglobalsMethodDescriptorTypeu'super() -> same as super(__class__, <first argument>)
super(type) -> unbound super object
super(type, obj) -> bound super object; requires isinstance(obj, type)
super(type, type2) -> bound super object; requires issubclass(type2, type)
Typical use to call a cooperative superclass method:
class C(B):
    def meth(self, arg):
        super().meth(arg)
This works for class methods too:
class C(B):
    @classmethod
    def cmeth(cls, arg):
        super().cmeth(arg)
'__self_class____thisclass__superu'method.__doc__'methodMethodType_1_2__buffer____bytes__u'bytes(iterable_of_ints) -> bytes
bytes(string, encoding[, errors]) -> bytes
bytes(bytes_or_buffer) -> immutable copy of bytes_or_buffer
bytes(int) -> bytes object of size given by the parameter initialized with null bytes
bytes() -> empty bytes object

Construct an immutable array of bytes from:
  - an iterable yielding integers in range(256)
  - a text string encoded using the specified encoding
  - any object implementing the buffer API.
  - an integer'decodebytesb'2'b2b'3'b3u'2'u2u3u'Base class for arithmetic errors.'ArithmeticErroru'Assertion failed.'AssertionErroru'A combination of multiple unrelated exceptions.'deriveexceptionsmessagesubgroupBaseExceptionGroupu'I/O operation would block.'u'Base class for I/O related errors.'u'OSError.characters_written'characters_writtenerrnofilenamefilename2strerrorOSErrorBlockingIOErroru'Broken pipe.'u'Connection error.'ConnectionErrorBrokenPipeErroru'Buffer error.'BufferErroru'Base class for warnings about bytes and buffer related problems, mostly
related to conversion from str or comparing to str.'u'Base class for warning categories.'WarningBytesWarningu'Child process error.'ChildProcessErroru'Connection aborted.'ConnectionAbortedErroru'Connection refused.'ConnectionRefusedErroru'Connection reset.'ConnectionResetErroru'Base class for warnings about deprecated features.'DeprecationWarningu'Read beyond end of file.'EOFErrorellipsisEllipsisu'Base class for warnings about encodings.'EncodingWarningEnvironmentErroru'ExceptionGroup.__weakref__'ExceptionGroupu'File already exists.'FileExistsErroru'File not found.'FileNotFoundErroru'Floating point operation failed.'FloatingPointErroru'Base class for warnings about constructs that will change semantically
in the future.'FutureWarningu'Request that a generator exit.'GeneratorExitIOErroru'Import can't find module, or can't find name in module.'msgname_fromImportErroru'Base class for warnings about probable mistakes in module imports'ImportWarningu'Improper indentation.'u'Invalid syntax.'end_linenoend_offsetlinenooffsetprint_file_and_linetextSyntaxErrorIndentationErroru'Sequence index out of range.'IndexErroru'Interrupted by signal.'InterruptedErroru'Operation doesn't work on directories.'IsADirectoryErroru'Program interrupted by user.'KeyboardInterruptu'Out of memory.'MemoryErroru'Module not found.'ModuleNotFoundErroru'Name not found globally.'NameErroru'Operation only works on directories.'NotADirectoryErrorNotImplementedTypeNotImplementedu'Method or function hasn't been implemented yet.'u'Unspecified run-time error.'RuntimeErrorNotImplementedErroru'Result too large to be represented.'OverflowErroru'Base class for warnings about features which will be deprecated
in the future.'PendingDeprecationWarningu'Not enough permissions.'PermissionErroru'Process not found.'ProcessLookupErroru'Recursion limit exceeded.'RecursionErroru'Weak ref proxy used after referent went away.'ReferenceErroru'Base class for warnings about resource usage.'ResourceWarningu'Base class for warnings about dubious runtime behavior.'RuntimeWarningu'Signal the end from iterator.__anext__().'StopAsyncIterationu'Signal the end from iterator.__next__().'valueStopIterationu'Base class for warnings about dubious syntax.'SyntaxWarningu'Internal error in the Python interpreter.

Please report this to the Python maintainer, along with the traceback,
the Python version, and the hardware/OS platform and version.'SystemErroru'Request to exit from the interpreter.'codeSystemExitu'Improper mixture of spaces and tabs.'TabErroru'Timeout expired.'TimeoutErroru'Local name referenced but not bound to a value.'UnboundLocalErroru'Unicode decoding error.'endreasonstartu'Unicode related error.'u'Inappropriate argument value (of correct type).'ValueErrorUnicodeErrorUnicodeDecodeErroru'Unicode encoding error.'UnicodeEncodeErroru'Unicode translation error.'UnicodeTranslateErroru'Base class for warnings about Unicode related problems, mostly
related to conversion problems.'UnicodeWarningu'Base class for warnings generated by user code.'UserWarningu'Second argument to a division or modulo operation was zero.'ZeroDivisionError__build_class____debug__u'Built-in functions, types, exceptions, and other objects.

This module provides direct access to all 'built-in'
identifiers of Python; for example, builtins.len is
the full name for the built-in function len().

This module is not normally accessed explicitly by most
applications, but can be useful in modules that provide
objects with the same name as a built-in value, but in
which the built-in of that name is also needed.'__import__absaiteranextanyasciibinbreakpoint__alloc__u'bytearray(iterable_of_ints) -> bytearray
bytearray(string, encoding[, errors]) -> bytearray
bytearray(bytes_or_buffer) -> mutable copy of bytes_or_buffer
bytearray(int) -> bytes array of size given by the parameter initialized with null bytes
bytearray() -> empty bytes array

Construct a mutable bytearray object from:
  - an iterable yielding integers in range(256)
  - a text string encoded using the specified encoding
  - a bytes or a buffer object
  - any object implementing the buffer API.
  - an integer'__release_buffer__bytearraycallablechrcompile__complex__u'Create a complex number from a real part and an optional imaginary part.

This is equivalent to (real + imag*1j) where imag defaults to 0.'complexdelattrdirdivmodu'Return an enumerate object.

  iterable
    an object supporting iteration

The enumerate object yields pairs containing a count (from start, which
defaults to zero) and a value yielded by the iterable argument.

enumerate is useful for obtaining an indexed list:
    (0, seq[0]), (1, seq[1]), (2, seq[2]), ...'enumerateevalexecu'filter(function or None, iterable) --> filter object

Return an iterator yielding those items of iterable for which function(item)
is true. If function is None, return the items that are true.'filtergetattrhasattrhashidinputisinstanceissubclassiterlenu'map(func, *iterables) --> map object

Make an iterator that computes the function using arguments from
each of the iterables.  Stops when the shortest iterable is exhausted.'mapu'Create a new memoryview object which references the given object.'_from_flagsu'A bool indicating whether the memory is C contiguous.'u'memoryview.c_contiguous'c_contiguouscastu'A bool indicating whether the memory is contiguous.'u'memoryview.contiguous'contiguousu'A bool indicating whether the memory is Fortran contiguous.'u'memoryview.f_contiguous'f_contiguousu'A string containing the format (in struct module style)
 for each element in the view.'u'memoryview.format'u'The size in bytes of each element of the memoryview.'u'memoryview.itemsize'itemsizeu'The amount of space in bytes that the array would use in
 a contiguous representation.'u'memoryview.nbytes'nbytesu'An integer indicating how many dimensions of a multi-dimensional
 array the memory represents.'u'memoryview.ndim'ndimu'The underlying object of the memoryview.'u'memoryview.obj'u'A bool indicating whether the memory is read only.'u'memoryview.readonly'readonlyreleaseu'A tuple of ndim integers giving the shape of the memory
 as an N-dimensional array.'u'memoryview.shape'shapeu'A tuple of ndim integers giving the size in bytes to access
 each element for each dimension of the array.'u'memoryview.strides'stridesu'A tuple of integers used internally for PIL-style arrays.'u'memoryview.suboffsets'suboffsetstobytestolisttoreadonlymemoryviewnextoctopenordpowprintu'range(stop) -> range object
range(start, stop[, step]) -> range object

Return an object that produces a sequence of integers from start (inclusive)
to stop (exclusive) by step.  range(i, j) produces i, i+1, i+2, ..., j-1.
start defaults to 0, and stop is omitted!  range(4) produces 0, 1, 2, 3.
These are exactly the valid indices for a list of 4 elements.
When step is given, it specifies the increment (or decrement).'stepstoprangerepru'Return a reverse iterator over the values of the given sequence.'__length_hint__reversedroundsetattru'slice(stop)
slice(start, stop[, step])

Create a slice object.  This is used for extended slicing (e.g. a[0:10:2]).'indicesslicesortedstrsumvarsu'zip(*iterables, strict=False) --> Yield tuples until an input is exhausted.

   >>> list(zip('abcdefg', range(3), range(4)))
   [('a', 0, 0), ('b', 1, 1), ('c', 2, 2)]

The zip object yields n-length tuples, where n is the number of iterables
passed as positional arguments to zip().  The i-th element in every tuple
comes from the i-th iterable argument to zip().  This continues until the
shortest argument is exhausted.

If strict is true and one of the arguments is exhausted before the others,
raise a ValueError.'zipbuiltinsbuiltin_module_semmle_unknown_type_semmle_undefined_value$u'guff.LoquiLex.tests.__init__'u'guff.LoquiLex.tests'u'guff.LoquiLex'u'guff'u'LoquiLex.tests.__init__'u'LoquiLex.tests'u'LoquiLex'u'tests.__init__'u'tests'u'__init__'u'LoquiLex.tests.fakes.__init__'u'LoquiLex.tests.fakes'u'tests.fakes.__init__'u'tests.fakes'u'fakes.__init__'u'fakes'MT tests."""b'MT tests.'u'MT tests.'u'loquilex.mt.tests.__init__'u'loquilex.mt.tests'u'loquilex.mt'u'loquilex'u'mt.tests.__init__'u'mt.tests'u'mt'Hardware detection for LoquiLex.detectionget_hardware_snapshot"__all__b'Hardware detection for LoquiLex.'u'Hardware detection for LoquiLex.'b'get_hardware_snapshot'u'get_hardware_snapshot'u'LoquiLex.loquilex.hardware.__init__'u'LoquiLex.loquilex.hardware'u'LoquiLex.loquilex'u'loquilex.hardware.__init__'u'loquilex.hardware'u'hardware.__init__'u'hardware'LoquiLex package.0.1.0__version__b'LoquiLex package.'u'LoquiLex package.'b'0.1.0'u'0.1.0'u'guff.LoquiLex.loquilex.__init__'u'guff.LoquiLex.loquilex'u'LoquiLex.loquilex.__init__'u'loquilex.__init__'Model indexing and caching functionality.workerModelIndexerget_model_indexerb'Model indexing and caching functionality.'u'Model indexing and caching functionality.'b'ModelIndexer'u'ModelIndexer'b'get_model_indexer'u'get_model_indexer'u'LoquiLex.loquilex.indexing.__init__'u'LoquiLex.loquilex.indexing'u'loquilex.indexing.__init__'u'loquilex.indexing'u'indexing.__init__'u'indexing'LoquiLex MT (Machine Translation) module.coreMTProviderTokenizerAdapterLangQualityModeregister_providercreateavailableproviders# Import core interfaces# Import providers (auto-registers on import)# noqa: F401b'LoquiLex MT (Machine Translation) module.'u'LoquiLex MT (Machine Translation) module.'b'MTProvider'u'MTProvider'b'TokenizerAdapter'u'TokenizerAdapter'b'Lang'u'Lang'b'QualityMode'u'QualityMode'b'register_provider'u'register_provider'b'create'u'create'b'available'u'available'u'LoquiLex.loquilex.mt.__init__'u'LoquiLex.loquilex.mt'u'loquilex.mt.__init__'u'mt.__init__'Structured logging and metrics for LoquiLex.structuredStructuredLoggerLogLevelcreate_loggermetricsPerformanceMetricsMetricTyperedactionDataRedactorcleanup_old_logs24log_dirmax_age_hoursdry_runClean up old log files in a directory.

    Args:
        log_dir: Directory containing log files
        max_age_hours: Remove files older than this many hours (default: 24)
        dry_run: If True, only report what would be deleted

    Returns:
        Number of files that were (or would be) deleted
    ostimepathlibPathexistslog_path3600cutoff_timedeleted_countlog_fileglob*.jsonl*statst_mtimeWould delete: f"unlink# Skip files we can't processb'Structured logging and metrics for LoquiLex.'u'Structured logging and metrics for LoquiLex.'b'StructuredLogger'u'StructuredLogger'b'LogLevel'u'LogLevel'b'create_logger'u'create_logger'b'PerformanceMetrics'u'PerformanceMetrics'b'MetricType'u'MetricType'b'DataRedactor'u'DataRedactor'b'cleanup_old_logs'u'cleanup_old_logs'b'Clean up old log files in a directory.

    Args:
        log_dir: Directory containing log files
        max_age_hours: Remove files older than this many hours (default: 24)
        dry_run: If True, only report what would be deleted

    Returns:
        Number of files that were (or would be) deleted
    'u'Clean up old log files in a directory.

    Args:
        log_dir: Directory containing log files
        max_age_hours: Remove files older than this many hours (default: 24)
        dry_run: If True, only report what would be deleted

    Returns:
        Number of files that were (or would be) deleted
    'b'*.jsonl*'u'*.jsonl*'b'Would delete: 'u'Would delete: 'b''u'LoquiLex.loquilex.logging.__init__'u'LoquiLex.loquilex.logging'u'loquilex.logging.__init__'u'loquilex.logging'u'logging.__init__'u'logging'u'LoquiLex.tests.util.__init__'u'LoquiLex.tests.util'u'tests.util.__init__'u'tests.util'u'util.__init__'u'util'Greenfield API package.b'Greenfield API package.'u'Greenfield API package.'u'LoquiLex.loquilex.api.__init__'u'LoquiLex.loquilex.api'u'loquilex.api.__init__'u'loquilex.api'u'api.__init__'u'api'Streaming ASR module for CTranslate2/faster-whisper with partial/final events.streamStreamingASRASRWordASRSegmentASRPartialEventASRFinalEventASRSnapshotEventaggregatorPartialFinalAggregatorASRMetricsb'Streaming ASR module for CTranslate2/faster-whisper with partial/final events.'u'Streaming ASR module for CTranslate2/faster-whisper with partial/final events.'b'StreamingASR'u'StreamingASR'b'ASRWord'u'ASRWord'b'ASRSegment'u'ASRSegment'b'ASRPartialEvent'u'ASRPartialEvent'b'ASRFinalEvent'u'ASRFinalEvent'b'ASRSnapshotEvent'u'ASRSnapshotEvent'b'PartialFinalAggregator'u'PartialFinalAggregator'b'ASRMetrics'u'ASRMetrics'u'LoquiLex.loquilex.asr.__init__'u'LoquiLex.loquilex.asr'u'loquilex.asr.__init__'u'loquilex.asr'u'asr.__init__'u'asr'MT tokenizer adapters.nllbNLLBTokenizerAdapterm2mM2MTokenizerAdapterb'MT tokenizer adapters.'u'MT tokenizer adapters.'b'NLLBTokenizerAdapter'u'NLLBTokenizerAdapter'b'M2MTokenizerAdapter'u'M2MTokenizerAdapter'u'loquilex.mt.tokenizers.__init__'u'loquilex.mt.tokenizers'u'mt.tokenizers.__init__'u'mt.tokenizers'u'tokenizers.__init__'u'tokenizers'MT provider implementations.ct2_nllbct2_m2m# Providers register themselves on importb'MT provider implementations.'u'MT provider implementations.'u'loquilex.mt.providers.__init__'u'loquilex.mt.providers'u'mt.providers.__init__'u'mt.providers'u'providers.__init__'u'providers'Security-related utilities for LoquiLex.path_guardPathGuardPathSecurityErrorb'Security-related utilities for LoquiLex.'u'Security-related utilities for LoquiLex.'b'PathGuard'u'PathGuard'b'PathSecurityError'u'PathSecurityError'u'LoquiLex.loquilex.security.__init__'u'LoquiLex.loquilex.security'u'loquilex.security.__init__'u'loquilex.security'u'security.__init__'u'security'MT core module.protocoltypesregistryb'MT core module.'u'MT core module.'u'loquilex.mt.core.__init__'u'loquilex.mt.core'u'mt.core.__init__'u'mt.core'u'core.__init__'u'core'Partial/final aggregator with ordering, stability, and reconnect snapshots.__future__annotationscollectionsdequedataclassesdataclassfieldtypingAnyCallableDequeDictListOptionalSetPartialStateTrack partial events for a segment.segment_idlatest_seqlatest_textlatest_wordslast_updatedefault_factoryseq_rangeFinalSegmentCommitted final segment.wordsts_monotoniceou_reasonfinal_seq_range
    Aggregates partial/final ASR events with ordering guarantees and bounded queues.

    Features:
    - Monotonic sequence numbers per stream
    - Stable segment IDs for partials until finalized
    - Bounded queues with backpressure (drops oldest partials, preserves finals)
    - Snapshot rehydration for reconnects
    - No duplicate finals on reconnect
    10020selfstream_idmax_partialsmax_recent_finalsnow_fnenable_metricsmonotonicnowglobal_seqpartialspartial_orderrecent_finalsfinalized_segment_idscurrent_partialadd_partialpartialemit_fnProcess a partial event with backpressure and deduplication.listcomp.0wt0t1confwords_dictstatepopleftoldest_idasr.partialseqstableenriched_eventon_partial_eventadd_finalProcess a final event with deduplication.final_segmentasr.finalon_final_eventget_snapshotGenerate snapshot for reconnect scenarios.recent_finals_listfinal_seg0.0live_partialasr.snapshotsnapshotget_statsGet aggregator statistics for monitoring.active_partialsfinalized_segmentsbase_statsget_summaryperformanceget_metrics_summaryGet performance metrics summary.log_metrics_summaryLog performance metrics summary.log_summaryclear_old_finalskeep_countClear old final segments to prevent unbounded growth.old_final# Track all seq numbers for this partial# Seq numbers covered by this final# configurable via LX_ASR_MAX_PARTIALS# Sequence tracking# Partial tracking (bounded queue)# for LRU eviction# Final segments (keep recent for snapshots)# prevent duplicate finals# Live partial for snapshots# Performance metrics# Update global sequence# Check if segment was already finalized (ignore late partials)# Convert words to dict format for JSON serialization# Update or create partial state# Update existing partial# New partial - check if we need to evict old ones# Evict oldest partial# Create new partial state# Update current partial for snapshots# Emit enriched partial event# Record metrics# Check for duplicate final# Already finalized, ignore# Convert words to dict format# Get the sequence range covered by this final (from partials)# Add current final sequence to the range# Create final segment record# Add to recent finals (bounded)# Keep finalized_segment_ids for recent finals only# (older ones can be forgotten to prevent unbounded growth)# Mark as finalized# Remove from partials if present# Remove from order tracking# Already removed# Clear current partial if it was this segment# Emit enriched final event# Build recent finals list# Build live partial (most recent partial state)# Use current global seq# Add performance metrics if available# Keep half# Remove from finalized set to allow memory cleanupb'Partial/final aggregator with ordering, stability, and reconnect snapshots.'u'Partial/final aggregator with ordering, stability, and reconnect snapshots.'b'Track partial events for a segment.'u'Track partial events for a segment.'b'Committed final segment.'u'Committed final segment.'b'
    Aggregates partial/final ASR events with ordering guarantees and bounded queues.

    Features:
    - Monotonic sequence numbers per stream
    - Stable segment IDs for partials until finalized
    - Bounded queues with backpressure (drops oldest partials, preserves finals)
    - Snapshot rehydration for reconnects
    - No duplicate finals on reconnect
    'u'
    Aggregates partial/final ASR events with ordering guarantees and bounded queues.

    Features:
    - Monotonic sequence numbers per stream
    - Stable segment IDs for partials until finalized
    - Bounded queues with backpressure (drops oldest partials, preserves finals)
    - Snapshot rehydration for reconnects
    - No duplicate finals on reconnect
    'b'Process a partial event with backpressure and deduplication.'u'Process a partial event with backpressure and deduplication.'b'w'u'w'b't0'u't0'b't1'u't1'b'conf'u'conf'b'asr.partial'u'asr.partial'b'type'u'type'b'stream_id'u'stream_id'b'segment_id'u'segment_id'b'seq'u'seq'b'text'u'text'b'words'u'words'b'stable'u'stable'b'ts_monotonic'u'ts_monotonic'b'Process a final event with deduplication.'u'Process a final event with deduplication.'b'asr.final'u'asr.final'b'eou_reason'u'eou_reason'b'final_seq_range'u'final_seq_range'b'Generate snapshot for reconnect scenarios.'u'Generate snapshot for reconnect scenarios.'b'asr.snapshot'u'asr.snapshot'b'recent_finals'u'recent_finals'b'live_partial'u'live_partial'b'Get aggregator statistics for monitoring.'u'Get aggregator statistics for monitoring.'b'global_seq'u'global_seq'b'active_partials'u'active_partials'b'finalized_segments'u'finalized_segments'b'max_partials'u'max_partials'b'max_recent_finals'u'max_recent_finals'b'performance'u'performance'b'Get performance metrics summary.'u'Get performance metrics summary.'b'Log performance metrics summary.'u'Log performance metrics summary.'b'Clear old final segments to prevent unbounded growth.'u'Clear old final segments to prevent unbounded growth.'u'LoquiLex.loquilex.asr.aggregator'u'loquilex.asr.aggregator'u'asr.aggregator'u'aggregator'loquilex.config.defaultsSEGCaptionStatestart_timeAggregatorSimple caption state machine.

    - Debounces partials (sends at most every partial_debounce_ms)
    - Finalization is handled by the ASR engine to avoid double gating
    last_partial_emiton_partialemit_partialtpartial_debounce_ms1000.0force_finalizeemit_finala0.001b# baseline for relative times# No maybe_finalize here; engine is the single source of truth for finalsb'Simple caption state machine.

    - Debounces partials (sends at most every partial_debounce_ms)
    - Finalization is handled by the ASR engine to avoid double gating
    'u'Simple caption state machine.

    - Debounces partials (sends at most every partial_debounce_ms)
    - Finalization is handled by the ASR engine to avoid double gating
    'u'LoquiLex.loquilex.segmentation.aggregator'u'LoquiLex.loquilex.segmentation'u'loquilex.segmentation.aggregator'u'loquilex.segmentation'u'segmentation.aggregator'u'segmentation'/usr/lib/python3.12/asyncio/usr/lib/python3.12/usr/libwavenumpynpwrite_tiny_wav1.016000secondssrnarangefloat32dtype0.1sinpi440.0astypexclip32767.0int16pcm16wbsetnchannelssetsampwidthsetframeratewriteframes# Simple low-amplitude tone to avoid clippingb'wb'u'wb'u'LoquiLex.tests.util.audio'u'tests.util.audio'u'util.audio'u'audio'Bounded Queue: drop-oldest with telemetry for resilient comms.

This module provides bounded queues with configurable drop policies and
comprehensive telemetry for implementing backpressure and monitoring.
GenericTypeVarTDropMetricsTelemetry for dropped items.total_droppeddrop_count_since_last_readlast_drop_time_monodrop_reasonrecord_dropcapacityRecord a drop event.read_and_reset_recentRead drop count since last read and reset counter.BoundedQueueThread-safe bounded queue with drop-oldest policy and telemetry.

    Features:
    - Fixed capacity with drop-oldest behavior
    - Non-blocking producers (never block, may drop)
    - Comprehensive drop telemetry
    - Thread-safe operations
    queuemaxsize must be positivemaxlen_queuethreadingRLock_lock_closed_ensure_lockNo-op: lock is created in __init__ (kept for API compatibility).put_nowaititemAdd item; if at capacity, drop oldest and record telemetry.
        Returns:
            True (item always added; check metrics.recent_drops to see if an oldest item was dropped).
        Queue '' is closeddroppedget_nowaitRemove and return item from front of queue.

        Returns:
            Item if available, None if queue is empty
        peekReturn front item without removing it.sizeReturn current queue size.is_emptyCheck if queue is empty.is_fullCheck if queue is at capacity.Clear all items and return count of items removed.get_telemetryGet comprehensive telemetry data.utilizationrecent_dropslast_drop_reasondrainRemove and return all items as a list.cleanupExplicit cleanup method for resources.ReplayBufferSpecialized bounded queue for WebSocket message replay.

    Maintains messages with sequence numbers for replay after reconnect.
    Supports both time-based and capacity-based eviction.
    50010.0ttl_secondsreplay_bufferadd_messageenvelopeAdd message with sequence number and automatic cleanup (thread-safe).ReplayBuffer is closed_cleanup_expiredlockedtimestampmessage_recordget_messages_afterlast_seqGet all messages with seq > last_seq for replay.resultrecordRemove messages older than TTL (caller can pass locked=True if holding self._lock).ttl_expired# Initialize the lock eagerly to avoid races during lazy init# Check if we're at capacity before adding# Add item (deque automatically drops oldest if at maxlen)# Record drop if we were at capacity# Clean up expired messages first under the same lock# Store message with metadata# Clean up expired messages# Access seq from the record, not the envelopeb'Bounded Queue: drop-oldest with telemetry for resilient comms.

This module provides bounded queues with configurable drop policies and
comprehensive telemetry for implementing backpressure and monitoring.
'u'Bounded Queue: drop-oldest with telemetry for resilient comms.

This module provides bounded queues with configurable drop policies and
comprehensive telemetry for implementing backpressure and monitoring.
'b'T'u'T'b'Telemetry for dropped items.'u'Telemetry for dropped items.'b'capacity'u'capacity'b'Record a drop event.'u'Record a drop event.'b'Read drop count since last read and reset counter.'u'Read drop count since last read and reset counter.'b'Thread-safe bounded queue with drop-oldest policy and telemetry.

    Features:
    - Fixed capacity with drop-oldest behavior
    - Non-blocking producers (never block, may drop)
    - Comprehensive drop telemetry
    - Thread-safe operations
    'u'Thread-safe bounded queue with drop-oldest policy and telemetry.

    Features:
    - Fixed capacity with drop-oldest behavior
    - Non-blocking producers (never block, may drop)
    - Comprehensive drop telemetry
    - Thread-safe operations
    'b'queue'u'queue'b'maxsize must be positive'u'maxsize must be positive'b'No-op: lock is created in __init__ (kept for API compatibility).'u'No-op: lock is created in __init__ (kept for API compatibility).'b'Add item; if at capacity, drop oldest and record telemetry.
        Returns:
            True (item always added; check metrics.recent_drops to see if an oldest item was dropped).
        'u'Add item; if at capacity, drop oldest and record telemetry.
        Returns:
            True (item always added; check metrics.recent_drops to see if an oldest item was dropped).
        'b'Queue ''u'Queue ''b'' is closed'u'' is closed'b'Remove and return item from front of queue.

        Returns:
            Item if available, None if queue is empty
        'u'Remove and return item from front of queue.

        Returns:
            Item if available, None if queue is empty
        'b'Return front item without removing it.'u'Return front item without removing it.'b'Return current queue size.'u'Return current queue size.'b'Check if queue is empty.'u'Check if queue is empty.'b'Check if queue is at capacity.'u'Check if queue is at capacity.'b'Clear all items and return count of items removed.'u'Clear all items and return count of items removed.'b'Get comprehensive telemetry data.'u'Get comprehensive telemetry data.'b'name'b'size'u'size'b'utilization'u'utilization'b'total_dropped'u'total_dropped'b'recent_drops'u'recent_drops'b'last_drop_time_mono'u'last_drop_time_mono'b'last_drop_reason'u'last_drop_reason'b'Remove and return all items as a list.'u'Remove and return all items as a list.'b'Explicit cleanup method for resources.'u'Explicit cleanup method for resources.'b'Specialized bounded queue for WebSocket message replay.

    Maintains messages with sequence numbers for replay after reconnect.
    Supports both time-based and capacity-based eviction.
    'u'Specialized bounded queue for WebSocket message replay.

    Maintains messages with sequence numbers for replay after reconnect.
    Supports both time-based and capacity-based eviction.
    'b'replay_buffer'u'replay_buffer'b'Add message with sequence number and automatic cleanup (thread-safe).'u'Add message with sequence number and automatic cleanup (thread-safe).'b'ReplayBuffer is closed'u'ReplayBuffer is closed'b'envelope'u'envelope'b'timestamp'u'timestamp'b'Get all messages with seq > last_seq for replay.'u'Get all messages with seq > last_seq for replay.'b'Remove messages older than TTL (caller can pass locked=True if holding self._lock).'u'Remove messages older than TTL (caller can pass locked=True if holding self._lock).'b'ttl_expired'u'ttl_expired'u'LoquiLex.loquilex.api.bounded_queue'u'loquilex.api.bounded_queue'u'api.bounded_queue'u'bounded_queue'shutilsubprocessMicrophone capture with sounddevice; ffmpeg pulse/alsa fallback.

Produces 16 kHz mono float32 frames. Never writes files. No side effects on import.
SAMPLE_RATECHANNELS1600FRAME_SAMPLESAudioFramendarraydata_log[audio] cmdwhichcapture_streamcallbackStart capturing audio and call callback for each frame.

    Returns a stop() function. Tries sounddevice -> ffmpeg pulse -> ffmpeg alsa.
    sounddevicesdQueue10qon_audioindata_frames_time_infostatussounddevice status: putInputStreamsampleratechannelsblocksizepath=sounddeviceEventstop_flagis_set0.2timeoutblockEmptyreshapemonoThreadtargetthesounddevice unavailable: ffmpegffmpeg not available, cannot capture audiodevpulsealsa-hide_banner-loglevelerror-f-idefault-ac-ar-vnf32le-PopenPIPEprocffmpeg  failed to start: killpath=ffmpeg/readerbufsizechunkfrombufferarrterminateNo audio capture path available (sounddevice/ffmpeg)# 100 ms frames# shape (n,), float32 mono at 16kHz# capture start time (monotonic)# capture end time (monotonic)# Try sounddevice first# Fallback to ffmpeg pulse then alsa# float32 bytes# Already checked aboveb'Microphone capture with sounddevice; ffmpeg pulse/alsa fallback.

Produces 16 kHz mono float32 frames. Never writes files. No side effects on import.
'u'Microphone capture with sounddevice; ffmpeg pulse/alsa fallback.

Produces 16 kHz mono float32 frames. Never writes files. No side effects on import.
'b'[audio] 'u'[audio] 'b'Start capturing audio and call callback for each frame.

    Returns a stop() function. Tries sounddevice -> ffmpeg pulse -> ffmpeg alsa.
    'u'Start capturing audio and call callback for each frame.

    Returns a stop() function. Tries sounddevice -> ffmpeg pulse -> ffmpeg alsa.
    'b'sounddevice status: 'u'sounddevice status: 'b'float32'u'float32'b'path=sounddevice'u'path=sounddevice'b'sounddevice unavailable: 'u'sounddevice unavailable: 'b'ffmpeg'u'ffmpeg'b'ffmpeg not available, cannot capture audio'u'ffmpeg not available, cannot capture audio'b'pulse'u'pulse'b'alsa'u'alsa'b'-hide_banner'u'-hide_banner'b'-loglevel'u'-loglevel'b'error'u'error'b'-f'u'-f'b'-i'u'-i'b'default'u'default'b'-ac'u'-ac'b'-ar'u'-ar'b'-vn'u'-vn'b'f32le'u'f32le'b'-'u'-'b'ffmpeg 'u'ffmpeg 'b' failed to start: 'u' failed to start: 'b'path=ffmpeg/'u'path=ffmpeg/'b'No audio capture path available (sounddevice/ffmpeg)'u'No audio capture path available (sounddevice/ffmpeg)'u'LoquiLex.loquilex.audio.capture'u'LoquiLex.loquilex.audio'u'loquilex.audio.capture'u'loquilex.audio'u'audio.capture'u'capture'Simple CLI to call POST /admin/cache/clear on local server.

Usage:
  LX_ADMIN_TOKEN=secret python scripts/clear_cache.py
  or
  python scripts/clear_cache.py --token secret
argparsehttpxmainArgumentParserpadd_argument--urlgetenvLX_API_URLhttp://127.0.0.1:8000--tokenLX_ADMIN_TOKENparse_argstokenNo admin token provided. Set LX_ADMIN_TOKEN or pass --token.url/admin/cache/clearBearer Authorizationheaderspostrstatus_code200Request failed:__main__Script#!/usr/bin/env python3b'Simple CLI to call POST /admin/cache/clear on local server.

Usage:
  LX_ADMIN_TOKEN=secret python scripts/clear_cache.py
  or
  python scripts/clear_cache.py --token secret
'u'Simple CLI to call POST /admin/cache/clear on local server.

Usage:
  LX_ADMIN_TOKEN=secret python scripts/clear_cache.py
  or
  python scripts/clear_cache.py --token secret
'b'--url'u'--url'b'LX_API_URL'u'LX_API_URL'b'http://127.0.0.1:8000'u'http://127.0.0.1:8000'b'--token'u'--token'b'LX_ADMIN_TOKEN'u'LX_ADMIN_TOKEN'b'No admin token provided. Set LX_ADMIN_TOKEN or pass --token.'u'No admin token provided. Set LX_ADMIN_TOKEN or pass --token.'b'/'b'/admin/cache/clear'u'/admin/cache/clear'b'Bearer 'u'Bearer 'b'Authorization'u'Authorization'b'Request failed:'u'Request failed:'b'__main__'u'__main__'u'guff.LoquiLex.scripts.clear_cache'u'guff.LoquiLex.scripts'u'LoquiLex.scripts.clear_cache'u'LoquiLex.scripts'u'scripts.clear_cache'u'scripts'u'clear_cache'/usr/lib/python3.12/collectionssocketpytesttests.fakesfake_mtfake_whispertests.fakes.fake_streaming_asrFakeStreamingASRtests.fakes.fake_audiofake_capture_stream_install_fakesInstall fake modules into sys.modules before app code imports them.faster_whisperfake_faster_whisperWhisperModeltransformersfake_transformersDummyModel_args_kwargstogenerateDummyTokenizereng_Latnsrc_lang_textinput_idsattention_maskAutoModelForSeq2SeqLMAutoTokenizerM2M100ForConditionalGenerationM2M100Tokenizer_set_offline_envForce offline behavior for tests.environHF_HUB_OFFLINETRANSFORMERS_OFFLINEHF_HUB_DISABLE_TELEMETRYLX_OFFLINE_patch_translatorPatch our Translator to the fake implementation after fakes are installed.loquilex.mt.translatormtTranslator_patch_streaming_asrPatch StreamingASR to use fake for offline testing.loquilex.asr.streamasr_stream_patch_audio_capturePatch audio capture to use fake for offline testing.loquilex.audio.captureaudio_capturefixtureforbid_networkmonkeypatchcreate_connectionreal_create_connectionguardedaddresskwargshost127.0.0.1::1localhostBlocked outbound connection to raisingpytest_sessionstartSessionsession
    Pytest lifecycle hook that runs before any tests are collected.
    We:
      1) enforce offline env
      2) install fake modules (faster_whisper, transformers)
      3) patch the Translator to the fake
      4) patch StreamingASR to the fake
      5) patch audio capture to the fake
    autouseresource_monitoringMonitor resource usage during tests to detect leaks.tracemallocgc25active_countinitial_thread_counttake_snapshotinitial_snapshotcollectfinal_thread_countwarningswarnThread count increased from  to . This may indicate a thread leak.". ""This may indicate a thread leak."is_tracingfinal_snapshotcompare_totop_statssize_diffSignificant memory growth detected: temp_dirProvide a temporary directory that gets cleaned up.tempfilemkdtemploquilex_test_temp_pathrmtree# tests/conftest.py# Enforce offline, install fake modules, and patch translator deterministically.# Fake faster_whisper# Use setattr to avoid static type checkers complaining about unknown attrs# Do not overwrite if a real/other stub already exists# Fake transformers# Return deterministic token ids# Minimal surface used by our code/tests# Use setattr to make attributes visible to type checkers and avoid# "module has no attribute" errors in tests running with strict mypy.# Import after fakes are installed so downstream imports see our stubs.# (allowed here intentionally)# Module might not exist yet during early tests# noqa: ARG001# Resource monitoring fixtures and configuration# Start memory tracing# Keep 25 frames for stack traces# Record initial state# Cleanup and check for leaks# Check thread count# Allow some variance# Check memory usage# Only warn about significant memory growth# Top 3 memory changes# More than 1MB growth# Tracing stopped elsewhere; skip snapshot# Cleanup# Best effort cleanupb'Install fake modules into sys.modules before app code imports them.'u'Install fake modules into sys.modules before app code imports them.'b'faster_whisper'u'faster_whisper'b'WhisperModel'u'WhisperModel'b'transformers'u'transformers'b'eng_Latn'u'eng_Latn'b'input_ids'u'input_ids'b'attention_mask'u'attention_mask'b'AutoModelForSeq2SeqLM'u'AutoModelForSeq2SeqLM'b'AutoTokenizer'u'AutoTokenizer'b'M2M100ForConditionalGeneration'u'M2M100ForConditionalGeneration'b'M2M100Tokenizer'u'M2M100Tokenizer'b'Force offline behavior for tests.'u'Force offline behavior for tests.'b'HF_HUB_OFFLINE'u'HF_HUB_OFFLINE'b'1'u'1'b'TRANSFORMERS_OFFLINE'u'TRANSFORMERS_OFFLINE'b'HF_HUB_DISABLE_TELEMETRY'u'HF_HUB_DISABLE_TELEMETRY'b'LX_OFFLINE'u'LX_OFFLINE'b'Patch our Translator to the fake implementation after fakes are installed.'u'Patch our Translator to the fake implementation after fakes are installed.'b'Patch StreamingASR to use fake for offline testing.'u'Patch StreamingASR to use fake for offline testing.'b'Patch audio capture to use fake for offline testing.'u'Patch audio capture to use fake for offline testing.'b'127.0.0.1'u'127.0.0.1'b'::1'u'::1'b'localhost'u'localhost'b'Blocked outbound connection to 'u'Blocked outbound connection to 'b'create_connection'u'create_connection'b'
    Pytest lifecycle hook that runs before any tests are collected.
    We:
      1) enforce offline env
      2) install fake modules (faster_whisper, transformers)
      3) patch the Translator to the fake
      4) patch StreamingASR to the fake
      5) patch audio capture to the fake
    'u'
    Pytest lifecycle hook that runs before any tests are collected.
    We:
      1) enforce offline env
      2) install fake modules (faster_whisper, transformers)
      3) patch the Translator to the fake
      4) patch StreamingASR to the fake
      5) patch audio capture to the fake
    'b'Monitor resource usage during tests to detect leaks.'u'Monitor resource usage during tests to detect leaks.'b'Thread count increased from 'u'Thread count increased from 'b' to 'u' to 'b'. This may indicate a thread leak.'u'. This may indicate a thread leak.'b'lineno'u'lineno'b'Significant memory growth detected: 'u'Significant memory growth detected: 'b'Provide a temporary directory that gets cleaned up.'u'Provide a temporary directory that gets cleaned up.'b'loquilex_test_'u'loquilex_test_'u'guff.LoquiLex.tests.conftest'u'LoquiLex.tests.conftest'u'tests.conftest'u'conftest'CTranslate2 provider for M2M100 models.IterableIteratorcore.protocolProviderCapabilitiescore.typesMTModelLoadErrorMTProviderErrorcore.registrytokenizers.m2mCT2M2MProvider_model_tokenizerLX_MT_MODEL_DIR_model_dirLX_MT_DEVICEauto_deviceLX_MT_COMPUTE_TYPEint8_float16_compute_typeLX_MT_WORKERS_workersLX_MT_MODEL_DIR environment variable required: set to the path of the directory containing converted CTranslate2 model files_load_modelLazy load the CT2 model and tokenizer.ctranslate2ct2ctranslate2 package required for CT2 providerdeviceget_cuda_device_countcudacpucompute_typeinter_threadsFailed to load M2M model: translate_textrealtimesrctgtqualityTranslate single text string.tokenstarget_prefixbeam_sizetranslate_batch256max_decoding_lengthresultshypothesesresult_tokensTranslation failed: translate_chunkedchunksTranslate sequence of text chunks.capabilitiesGet provider capabilities.familym2m100_418Mmodel_nameenzh-Hanszh-Hantdirectionsrequires_target_prefixdevice_typesint8float16compute_typessupports_chunkedsupports_streaming_partials_create_ct2_m2m_providerFactory function for CT2 M2M provider.ct2-m2m# Lazy import CT2 to avoid heavy dependency on module load# Resolve device# Encode source text# Get target prefix# Translate with CT2# Decode result# Register provider on module importb'CTranslate2 provider for M2M100 models.'u'CTranslate2 provider for M2M100 models.'b'LX_MT_MODEL_DIR'u'LX_MT_MODEL_DIR'b'LX_MT_DEVICE'u'LX_MT_DEVICE'b'auto'u'auto'b'LX_MT_COMPUTE_TYPE'u'LX_MT_COMPUTE_TYPE'b'int8_float16'u'int8_float16'b'LX_MT_WORKERS'u'LX_MT_WORKERS'b'LX_MT_MODEL_DIR environment variable required: set to the path of the directory containing converted CTranslate2 model files'u'LX_MT_MODEL_DIR environment variable required: set to the path of the directory containing converted CTranslate2 model files'b'Lazy load the CT2 model and tokenizer.'u'Lazy load the CT2 model and tokenizer.'b'ctranslate2 package required for CT2 provider'u'ctranslate2 package required for CT2 provider'b'cuda'u'cuda'b'cpu'u'cpu'b'Failed to load M2M model: 'u'Failed to load M2M model: 'b'realtime'u'realtime'b'Translate single text string.'u'Translate single text string.'b'Translation failed: 'u'Translation failed: 'b'Translate sequence of text chunks.'u'Translate sequence of text chunks.'b'Get provider capabilities.'u'Get provider capabilities.'b'm2m'u'm2m'b'family'u'family'b'm2m100_418M'u'm2m100_418M'b'model_name'u'model_name'b'en'u'en'b'zh-Hans'u'zh-Hans'b'zh-Hant'u'zh-Hant'b'directions'u'directions'b'requires_target_prefix'u'requires_target_prefix'b'device_types'u'device_types'b'int8'u'int8'b'float16'u'float16'b'compute_types'u'compute_types'b'supports_chunked'u'supports_chunked'b'supports_streaming_partials'u'supports_streaming_partials'b'Factory function for CT2 M2M provider.'u'Factory function for CT2 M2M provider.'b'ct2-m2m'u'ct2-m2m'u'loquilex.mt.providers.ct2_m2m'u'mt.providers.ct2_m2m'u'providers.ct2_m2m'u'ct2_m2m'CTranslate2 provider for NLLB models.tokenizers.nllbCT2NLLBProviderLX_MT_MODEL_DIR environment variable required: must be set to the path of converted CTranslate2 model filesFailed to load NLLB model: nllb-200-distilled-600M_create_ct2_nllb_providerFactory function for CT2 NLLB provider.ct2-nllbb'CTranslate2 provider for NLLB models.'u'CTranslate2 provider for NLLB models.'b'LX_MT_MODEL_DIR environment variable required: must be set to the path of converted CTranslate2 model files'u'LX_MT_MODEL_DIR environment variable required: must be set to the path of converted CTranslate2 model files'b'Failed to load NLLB model: 'u'Failed to load NLLB model: 'b'nllb'u'nllb'b'nllb-200-distilled-600M'u'nllb-200-distilled-600M'b'Factory function for CT2 NLLB provider.'u'Factory function for CT2 NLLB provider.'b'ct2-nllb'u'ct2-nllb'u'loquilex.mt.providers.ct2_nllb'u'mt.providers.ct2_nllb'u'providers.ct2_nllb'u'ct2_nllb'LoquiLex config defaults.

No side effects on import. Values can be overridden via env/.env.
_envLX_Only LX_* env vars are allowed, got: _env_boolrawtrueyeson_env_int_env_float_env_time_secondsdefault_secondsParse time value with unit suffixes (s, ms, m, h) and return seconds..smsm60.0h3600.0LX_SAVE_AUDIOoff_DEFAULT_SAVE_AUDIOLX_SAVE_AUDIO_PATHloquilex/out/session.wav_DEFAULT_SAVE_AUDIO_PATHfrozenASRDefaultsLX_ASR_LANGUAGElanguageLX_ASR_MODELsmall.enmodelLX_ASR_COMPUTELX_ASR_BEAMLX_ASR_VADvad_filterLX_ASR_NO_SPEECH0.6no_speech_thresholdLX_ASR_LOGPROBlog_prob_thresholdLX_ASR_COND_PREVcondition_on_previous_textLX_ASR_SAMPLE_RATEsample_rateLX_ASR_CPU_THREADScpu_countcpu_threadsLX_ASR_WORD_TSword_timestampsLX_ASR_SILENCE_MS300silence_msLX_ASR_MAX_SEG_MS10000max_seg_msLX_ASR_PUNCTUATION.?!;:punctuationLX_ASR_MAX_PARTIALSSegmentationDefaultsLX_PAUSE_FLUSH_SEC0.7pause_flush_secLX_SEGMENT_MAX_SEC7.0segment_max_secLX_PARTIAL_DEBOUNCE_MS250MTDefaultsLX_NLLB_MODELfacebook/nllb-200-distilled-600Mnllb_modelLX_M2M_MODELfacebook/m2m100_418Mm2m_modelLX_MT_BEAMSnum_beamsLX_MT_NO_REPEATno_repeat_ngram_sizeLX_MT_MAX_INPUT96max_input_tokensLX_MT_MAX_NEWmax_new_tokensLX_MT_PROVIDERprovidermodel_dirworkersLX_LANG_VARIANT_ZHHanslang_variant_zhRuntimeDefaultsLX_OUT_DIRloquilex/outout_dirHF_HOMEHF_DATASETS_CACHEhf_cacheLX_DEVICEdevice_preferenceLX_DECODE_INTERVAL_SEC0.25decode_interval_secLX_PARTIAL_DEBOUNCE_SECpartial_debounce_secLX_MAX_BUFFER_SEC8.0max_buffer_secLX_MAX_LINES1000max_linesLX_PARTIAL_WORD_CAPpartial_word_capsave_audiosave_audio_pathASRMTRTpick_devicePick (device, dtype).

    Returns (device_str, dtype_str) where dtype_str is either "float16" or "float32".
    preftorchis_availablehas_cuda# Handle plain numbers (assume seconds)# Handle unit suffixes# Could be 's' or 'ms'# milliseconds to seconds# seconds# minutes to seconds# hours to seconds# No recognized suffix, assume seconds# Streaming-specific settings# Legacy HF model names (for backward compatibility)# New CT2-based MT config# auto|cuda|cpu# streaming controls# new IO options# off|wav|flacb'LoquiLex config defaults.

No side effects on import. Values can be overridden via env/.env.
'u'LoquiLex config defaults.

No side effects on import. Values can be overridden via env/.env.
'b'LX_'u'LX_'b'Only LX_* env vars are allowed, got: 'u'Only LX_* env vars are allowed, got: 'b'true'u'true'b'yes'u'yes'b'on'u'on'b'Parse time value with unit suffixes (s, ms, m, h) and return seconds.'u'Parse time value with unit suffixes (s, ms, m, h) and return seconds.'b'.'u'.'b's'u's'b'ms'u'ms'b'm'u'm'b'h'u'h'b'LX_SAVE_AUDIO'u'LX_SAVE_AUDIO'b'off'u'off'b'LX_SAVE_AUDIO_PATH'u'LX_SAVE_AUDIO_PATH'b'loquilex/out/session.wav'u'loquilex/out/session.wav'b'LX_ASR_LANGUAGE'u'LX_ASR_LANGUAGE'b'LX_ASR_MODEL'u'LX_ASR_MODEL'b'small.en'u'small.en'b'LX_ASR_COMPUTE'u'LX_ASR_COMPUTE'b'LX_ASR_BEAM'u'LX_ASR_BEAM'b'LX_ASR_VAD'u'LX_ASR_VAD'b'LX_ASR_NO_SPEECH'u'LX_ASR_NO_SPEECH'b'LX_ASR_LOGPROB'u'LX_ASR_LOGPROB'b'LX_ASR_COND_PREV'u'LX_ASR_COND_PREV'b'LX_ASR_SAMPLE_RATE'u'LX_ASR_SAMPLE_RATE'b'LX_ASR_CPU_THREADS'u'LX_ASR_CPU_THREADS'b'LX_ASR_WORD_TS'u'LX_ASR_WORD_TS'b'LX_ASR_SILENCE_MS'u'LX_ASR_SILENCE_MS'b'LX_ASR_MAX_SEG_MS'u'LX_ASR_MAX_SEG_MS'b'LX_ASR_PUNCTUATION'u'LX_ASR_PUNCTUATION'b'.?!;:'u'.?!;:'b'LX_ASR_MAX_PARTIALS'u'LX_ASR_MAX_PARTIALS'b'LX_PAUSE_FLUSH_SEC'u'LX_PAUSE_FLUSH_SEC'b'LX_SEGMENT_MAX_SEC'u'LX_SEGMENT_MAX_SEC'b'LX_PARTIAL_DEBOUNCE_MS'u'LX_PARTIAL_DEBOUNCE_MS'b'LX_NLLB_MODEL'u'LX_NLLB_MODEL'b'facebook/nllb-200-distilled-600M'u'facebook/nllb-200-distilled-600M'b'LX_M2M_MODEL'u'LX_M2M_MODEL'b'facebook/m2m100_418M'u'facebook/m2m100_418M'b'LX_MT_BEAMS'u'LX_MT_BEAMS'b'LX_MT_NO_REPEAT'u'LX_MT_NO_REPEAT'b'LX_MT_MAX_INPUT'u'LX_MT_MAX_INPUT'b'LX_MT_MAX_NEW'u'LX_MT_MAX_NEW'b'LX_MT_PROVIDER'u'LX_MT_PROVIDER'b'LX_LANG_VARIANT_ZH'u'LX_LANG_VARIANT_ZH'b'Hans'u'Hans'b'LX_OUT_DIR'u'LX_OUT_DIR'b'loquilex/out'u'loquilex/out'b'HF_HOME'u'HF_HOME'b'HF_DATASETS_CACHE'u'HF_DATASETS_CACHE'b'LX_DEVICE'u'LX_DEVICE'b'LX_DECODE_INTERVAL_SEC'u'LX_DECODE_INTERVAL_SEC'b'LX_PARTIAL_DEBOUNCE_SEC'u'LX_PARTIAL_DEBOUNCE_SEC'b'LX_MAX_BUFFER_SEC'u'LX_MAX_BUFFER_SEC'b'LX_MAX_LINES'u'LX_MAX_LINES'b'LX_PARTIAL_WORD_CAP'u'LX_PARTIAL_WORD_CAP'b'Pick (device, dtype).

    Returns (device_str, dtype_str) where dtype_str is either "float16" or "float32".
    'u'Pick (device, dtype).

    Returns (device_str, dtype_str) where dtype_str is either "float16" or "float32".
    'u'LoquiLex.loquilex.config.defaults'u'LoquiLex.loquilex.config'u'loquilex.config.defaults'u'loquilex.config'u'config.defaults'u'config'u'defaults'
Demonstration of structured logging and performance metrics in LoquiLex.

This script shows the new structured logging system in action across
ASR, MT, and API supervisor components.
loquilex.loggingloquilex.asr.metricsTranslationResultdemo_structured_loggingDemonstrate structured logging with data redaction.=== Structured Logging Demo ===TemporaryDirectorytmpdirdemo_sessioncomponentdemo123session_idloggerinfoDemo session started/home/user/.cache/models/whisper-large.binmodel_pathsk-abcd1234efgh5678api_tokenuser_configTranslation failednllb-200-3.3BHello worldinput_texthidden_secret_123secret_keyerror_detailsdemo_session_demo123.jsonl
Generated log file: read_textcontentLog content (sensitive data redacted): Structured logging demo completeddemo_performance_metricsDemonstrate performance metrics collection.
=== Performance Metrics Demo ===metrics_demoperf123demoset_thresholdapi_latency100.0warning500.0criticalSimulating API calls...istart_timerapi_callsleep0.01end_timerreq_request_idduration  API call : increment_counterrequests_totalset_gaugecpu_usage45.2memory_mbget_all_metricssummary
Metrics Summary:  Counters: counters'  Gauges: gaugesapi_stats  API Latency Stats:    Count:     Average: avg    Min/Max: ms /     P95: p95 Performance metrics demo completeddemo_asr_metricsDemonstrate ASR metrics with structured logging.
=== ASR Metrics Demo ===demo_streamasr_metricsSimulating ASR events...Hello world part seg_0010.8stability0.05Hello world complete sentencesilenceHelloword0.5worldASR Session Summary:  Stream ID:   Events:   EOU Reasons: eou_reasonsperf  Performance Targets:metricmet     ASR metrics demo completeddemo_mt_translatorDemonstrate MT translator with metrics (mock translation).
=== MT Translator Demo ===mock_nllbzhtgt_lang125.5duration_ms0.92confidenceMock translation result:  Input: 'Hello world' (en)  Output: '' (zh)  Model:   Duration:   Confidence:  MT translator demo completedLoquiLex Structured Logging and Performance Metrics Demo=60
All demos completed successfully! 
Key features demonstrated: Offline-safe structured logging with JSON format Automatic sensitive data redaction Performance metrics with thresholds ASR latency and throughput tracking MT translation timing Session correlation and component isolation
 Demo failed with error: # Create logger with file output# Basic logging# This will be redacted# Safe field# Error logging with context# Read back logs to show redaction# Set thresholds# Simulate API calls# Simulate varying latency# Simulate counters and gauges# Get metrics summary# Show latency stats# Create ASR metrics with logging# Simulate partial events# Small delay between partials# Simulate final event# Get and display summary# Mock a translation result to show the enhanced structureb'
Demonstration of structured logging and performance metrics in LoquiLex.

This script shows the new structured logging system in action across
ASR, MT, and API supervisor components.
'u'
Demonstration of structured logging and performance metrics in LoquiLex.

This script shows the new structured logging system in action across
ASR, MT, and API supervisor components.
'b'Demonstrate structured logging with data redaction.'u'Demonstrate structured logging with data redaction.'b'=== Structured Logging Demo ==='u'=== Structured Logging Demo ==='b'demo_session'u'demo_session'b'demo123'u'demo123'b'Demo session started'u'Demo session started'b'/home/user/.cache/models/whisper-large.bin'u'/home/user/.cache/models/whisper-large.bin'b'model_path'u'model_path'b'sk-abcd1234efgh5678'u'sk-abcd1234efgh5678'b'api_token'u'api_token'b'language'u'language'b'Translation failed'u'Translation failed'b'nllb-200-3.3B'u'nllb-200-3.3B'b'model'u'model'b'Hello world'u'Hello world'b'input_text'u'input_text'b'hidden_secret_123'u'hidden_secret_123'b'secret_key'u'secret_key'b'demo_session_demo123.jsonl'u'demo_session_demo123.jsonl'b'
Generated log file: 'u'
Generated log file: 'b'Log content (sensitive data redacted):'u'Log content (sensitive data redacted):'u' Structured logging demo completed'b'Demonstrate performance metrics collection.'u'Demonstrate performance metrics collection.'b'
=== Performance Metrics Demo ==='u'
=== Performance Metrics Demo ==='b'metrics_demo'u'metrics_demo'b'perf123'u'perf123'b'demo'u'demo'b'api_latency'u'api_latency'b'Simulating API calls...'u'Simulating API calls...'b'api_call'u'api_call'b'req_'u'req_'b'  API call 'u'  API call 'b': 'u': 'b'requests_total'u'requests_total'b'cpu_usage'u'cpu_usage'b'memory_mb'u'memory_mb'b'
Metrics Summary:'u'
Metrics Summary:'b'  Counters: 'u'  Counters: 'b'counters'u'counters'b'  Gauges: 'u'  Gauges: 'b'gauges'u'gauges'b'  API Latency Stats:'u'  API Latency Stats:'b'    Count: 'u'    Count: 'b'    Average: 'u'    Average: 'b'    Min/Max: 'u'    Min/Max: 'b'ms / 'u'ms / 'b'    P95: 'u'    P95: 'u' Performance metrics demo completed'b'Demonstrate ASR metrics with structured logging.'u'Demonstrate ASR metrics with structured logging.'b'
=== ASR Metrics Demo ==='u'
=== ASR Metrics Demo ==='b'demo_stream'u'demo_stream'b'Simulating ASR events...'u'Simulating ASR events...'b'Hello world part 'u'Hello world part 'b'seg_001'u'seg_001'b'stability'u'stability'b'Hello world complete sentence'u'Hello world complete sentence'b'silence'u'silence'b'Hello'u'Hello'b'word'u'word'b'start'u'start'b'end'u'end'b'world'u'world'b'ASR Session Summary:'u'ASR Session Summary:'b'  Stream ID: 'u'  Stream ID: 'b'  Events: 'u'  Events: 'b'events'u'events'b'  EOU Reasons: 'u'  EOU Reasons: 'b'eou_reasons'u'eou_reasons'b'  Performance Targets:'u'  Performance Targets:'b'    'u'    'u''u''u' ASR metrics demo completed'b'Demonstrate MT translator with metrics (mock translation).'u'Demonstrate MT translator with metrics (mock translation).'b'
=== MT Translator Demo ==='u'
=== MT Translator Demo ==='u''b'mock_nllb'u'mock_nllb'b'zh'u'zh'b'Mock translation result:'u'Mock translation result:'b'  Input: 'Hello world' (en)'u'  Input: 'Hello world' (en)'b'  Output: ''u'  Output: ''b'' (zh)'u'' (zh)'b'  Model: 'u'  Model: 'b'  Duration: 'u'  Duration: 'b'  Confidence: 'u'  Confidence: 'u' MT translator demo completed'b'LoquiLex Structured Logging and Performance Metrics Demo'u'LoquiLex Structured Logging and Performance Metrics Demo'b'='u'='b'
'u'
'u'All demos completed successfully! 'b'
Key features demonstrated:'u'
Key features demonstrated:'u' Offline-safe structured logging with JSON format'u' Automatic sensitive data redaction'u' Performance metrics with thresholds'u' ASR latency and throughput tracking'u' MT translation timing'u' Session correlation and component isolation'u'
 Demo failed with error: 'u'home.guff.LoquiLex.demo_structured_logging'u'home.guff.LoquiLex'u'home.guff'u'home'u'guff.LoquiLex.demo_structured_logging'u'LoquiLex.demo_structured_logging'u'demo_structured_logging'Hardware detection and system information for LoquiLex.

Detects GPU/CPU capabilities and audio devices, providing threshold warnings.
asdictTuplepsutil_psutilLX_FALLBACK_MEMORY_TOTAL_GBFALLBACK_MEMORY_TOTAL_GBLX_FALLBACK_MEMORY_AVAILABLE_GB4.0FALLBACK_MEMORY_AVAILABLE_GBCPUInfoCPU information.cores_physicalcores_logicalfrequency_mhzusage_percentmeets_thresholdGPUInfoGPU information.memory_total_mbmemory_free_mbmemory_used_mbtemperature_cutilization_percentcuda_availableAudioDeviceInfoAudio device information.device_idis_defaultHardwareSnapshotComplete hardware system snapshot.gpusaudio_devicesmemory_total_gbmemory_available_gbplatform_infooverall_statusoverall_scoreto_dictConvert to dictionary for JSON serialization._get_cpu_infoGet CPU information with threshold checking.processorUnknown CPUcpu_namelogicalcpu_freqfreq_infocurrentcpu_percentintervalpsutil not available - limited CPU infoError getting CPU info: Failed to get CPU info: LX_MIN_CPU_CORESmin_coresLX_MAX_CPU_USAGE80.0max_usageCPU has  cores, minimum recommended: CPU usage % exceeds threshold %_get_gpu_infoGet GPU information with CUDA detection.device_countget_device_propertiespropstotal_memorymemory_reservedmemory_allocatedLX_MIN_GPU_MEMORY_GBmin_memory_gbmin_memory_mbGPU memory GB below threshold GBError getting GPU  details: CUDA GPU  (Error)No CUDA-capable GPUs detectedPyTorch CUDA support not availableNo GPU detected_get_audio_devicesGet audio input devices.devicesquery_devicesdevice_listdefault_inputmax_input_channelscheck_input_settingsDevice not accessible: default_samplerateDefault Input (sounddevice not available)sounddevice package not available for device detectionAudio detection failedAudio device detection failed: _calculate_overall_scoreCalculate overall system score and status.score40cpu_scoregpu_scorebest_gpugpu4096352048audio_scoredavailable_devices90excellent75goodfair45poorunusableGet complete hardware system snapshot.virtual_memorymemorytotalsystemmachinepython_versionLX_MIN_MEMORY_GBSystem memory 2.0Available memory GB is very low# Optional runtime import: psutil may not be installed in minimal profiles.# Use an internal alias and cast to avoid mypy's Module/None assignment conflict.# type: ignore[assignment]# Module-level fallback memory values (can be overridden via env vars).## Rationale and guidance for future developers / AI agents:# - These constants provide safe defaults when `psutil` is not available at#   runtime (minimal containers, CI runners, or lightweight installs).# - Values are expressed in gigabytes (GB) as floats.# - Override using environment variables when creating reproducible test#   environments or when running in constrained systems:#     - `LX_FALLBACK_MEMORY_TOTAL_GB` (default: "8.0")#     - `LX_FALLBACK_MEMORY_AVAILABLE_GB` (default: "4.0")# - Choose conservative defaults that won't falsely mark typical developer#   machines as unusable; tests and CI can set these env vars to smaller#   values to simulate low-memory environments.# - If the project later centralizes runtime configuration, consider moving#   these to a single config module (e.g., `loquilex.config`) and using a#   typed settings object for runtime overrides.# Examples:# ```bash# LX_FALLBACK_MEMORY_TOTAL_GB=16 LX_FALLBACK_MEMORY_AVAILABLE_GB=12 python -m loquilex# ```# Implementation note: keep these as module-level constants to make them easy# to patch in unit tests (monkeypatch / import-time overrides).# "excellent", "good", "fair", "poor", "unusable"# 0-100# Get CPU info# Get frequency (fallback to 0 if not available)# Get current usage# Fallback without psutil# Threshold checking# Try to detect CUDA GPUs first# Get current memory usage# Try to get temperature and utilization (optional)# PyTorch not available# Other CUDA detection errors# If no CUDA GPUs found, add a placeholder# Input device# Check if device is available# Quick test to see if we can access the device# Fallback: try to detect basic audio capability# CPU scoring (40% of total)# GPU scoring (35% of total)# 4GB+# 2GB+# CPU fallback# Audio scoring (25% of total)# Detected but not available# Determine status# Memory information# Fallback without psutil - use module-level configurable defaults# Platform information# Calculate overall score and status# Collect all warnings# Add memory warningsb'Hardware detection and system information for LoquiLex.

Detects GPU/CPU capabilities and audio devices, providing threshold warnings.
'u'Hardware detection and system information for LoquiLex.

Detects GPU/CPU capabilities and audio devices, providing threshold warnings.
'b'LX_FALLBACK_MEMORY_TOTAL_GB'u'LX_FALLBACK_MEMORY_TOTAL_GB'b'8.0'u'8.0'b'LX_FALLBACK_MEMORY_AVAILABLE_GB'u'LX_FALLBACK_MEMORY_AVAILABLE_GB'b'4.0'u'4.0'b'CPU information.'u'CPU information.'b'GPU information.'u'GPU information.'b'Audio device information.'u'Audio device information.'b'Complete hardware system snapshot.'u'Complete hardware system snapshot.'b'Convert to dictionary for JSON serialization.'u'Convert to dictionary for JSON serialization.'b'Get CPU information with threshold checking.'u'Get CPU information with threshold checking.'b'Unknown CPU'u'Unknown CPU'b'psutil not available - limited CPU info'u'psutil not available - limited CPU info'b'Error getting CPU info: 'u'Error getting CPU info: 'b'Failed to get CPU info: 'u'Failed to get CPU info: 'b'LX_MIN_CPU_CORES'u'LX_MIN_CPU_CORES'b'LX_MAX_CPU_USAGE'u'LX_MAX_CPU_USAGE'b'80.0'u'80.0'b'CPU has 'u'CPU has 'b' cores, minimum recommended: 'u' cores, minimum recommended: 'b'CPU usage 'u'CPU usage 'b'% exceeds threshold 'u'% exceeds threshold 'b'%'u'%'b'Get GPU information with CUDA detection.'u'Get GPU information with CUDA detection.'b'LX_MIN_GPU_MEMORY_GB'u'LX_MIN_GPU_MEMORY_GB'b'GPU memory 'u'GPU memory 'b'GB below threshold 'u'GB below threshold 'b'GB'u'GB'b'Error getting GPU 'u'Error getting GPU 'b' details: 'u' details: 'b'CUDA GPU 'u'CUDA GPU 'b' (Error)'u' (Error)'b'No CUDA-capable GPUs detected'u'No CUDA-capable GPUs detected'b'PyTorch CUDA support not available'u'PyTorch CUDA support not available'b'No GPU detected'u'No GPU detected'b'Get audio input devices.'u'Get audio input devices.'b'max_input_channels'u'max_input_channels'b'Device not accessible: 'u'Device not accessible: 'b'default_samplerate'u'default_samplerate'b'Default Input (sounddevice not available)'u'Default Input (sounddevice not available)'b'sounddevice package not available for device detection'u'sounddevice package not available for device detection'b'Audio detection failed'u'Audio detection failed'b'Audio device detection failed: 'u'Audio device detection failed: 'b'Calculate overall system score and status.'u'Calculate overall system score and status.'b'excellent'u'excellent'b'good'u'good'b'fair'u'fair'b'poor'u'poor'b'unusable'u'unusable'b'Get complete hardware system snapshot.'u'Get complete hardware system snapshot.'b'system'u'system'b'release'u'release'b'version'b'machine'u'machine'b'processor'u'processor'b'python_version'u'python_version'b'LX_MIN_MEMORY_GB'u'LX_MIN_MEMORY_GB'b'System memory 'u'System memory 'b'Available memory 'u'Available memory 'b'GB is very low'u'GB is very low'u'LoquiLex.loquilex.hardware.detection'u'loquilex.hardware.detection'u'hardware.detection'u'detection'
Prefetch only the smallest models for local dev to avoid large downloads.
 - Whisper tiny.en via faster-whisper (CTRANSLATE2)

Environment:
    LX_ASR_MODEL      (default: "tiny.en")
  LLX_MODEL_DIR     (default: ".models")

This script is safe to run repeatedly; it only ensures the local cache exists.
tiny.enASR_MODELLLX_MODEL_DIR.modelsresolveDOWNLOAD_ROOTmkdirparentsexist_ok[dev] Prefetching ASR model:  -> is_truthyLX_SKIP_MODEL_PREFETCH[dev] Skipping model prefetch due to LX_SKIP_MODEL_PREFETCH=1download_root[dev] Model cache prepared.[dev] Skipped ASR prefetch due to error: [dev] Done.# Force online just for this fetch (call-site can also set envs)# We do not mutate global env here to respect caller's choice.# CPU-only, int8 is fine for dev verification# Touch the model once to ensure artifacts are present# (No actual transcription run to keep execution fast.)b'
Prefetch only the smallest models for local dev to avoid large downloads.
 - Whisper tiny.en via faster-whisper (CTRANSLATE2)

Environment:
    LX_ASR_MODEL      (default: "tiny.en")
  LLX_MODEL_DIR     (default: ".models")

This script is safe to run repeatedly; it only ensures the local cache exists.
'u'
Prefetch only the smallest models for local dev to avoid large downloads.
 - Whisper tiny.en via faster-whisper (CTRANSLATE2)

Environment:
    LX_ASR_MODEL      (default: "tiny.en")
  LLX_MODEL_DIR     (default: ".models")

This script is safe to run repeatedly; it only ensures the local cache exists.
'b'tiny.en'u'tiny.en'b'LLX_MODEL_DIR'u'LLX_MODEL_DIR'b'.models'u'.models'b'[dev] Prefetching ASR model: 'u'[dev] Prefetching ASR model: 'b' -> 'u' -> 'b'LX_SKIP_MODEL_PREFETCH'u'LX_SKIP_MODEL_PREFETCH'b'[dev] Skipping model prefetch due to LX_SKIP_MODEL_PREFETCH=1'u'[dev] Skipping model prefetch due to LX_SKIP_MODEL_PREFETCH=1'b'[dev] Model cache prepared.'u'[dev] Model cache prepared.'b'[dev] Skipped ASR prefetch due to error: 'u'[dev] Skipped ASR prefetch due to error: 'b'[dev] Done.'u'[dev] Done.'u'guff.LoquiLex.scripts.dev_fetch_models'u'LoquiLex.scripts.dev_fetch_models'u'scripts.dev_fetch_models'u'dev_fetch_models'/usr/lib/python3.12/xml/etree/usr/lib/python3.12/xmlEvent stamping helpers: add seq, ts_server, ts_session to outbound WS messages.EventStampert0_mononewclsstamppayloadnow_monostampedts_serverts_sessionb'Event stamping helpers: add seq, ts_server, ts_session to outbound WS messages.'u'Event stamping helpers: add seq, ts_server, ts_session to outbound WS messages.'b'EventStamper'u'EventStamper'b'ts_server'u'ts_server'b'ts_session'u'ts_session'u'LoquiLex.loquilex.api.events'u'loquilex.api.events'u'api.events'Fake audio capture for testing.FakeAudioFrameFake audio frame for testing.
    Fake audio capture that generates synthetic audio frames.

    Returns a stop function to halt the capture.
    stop_eventaudio_workerGenerate fake audio frames at regular intervals.frame_countsamples_per_framerandomuniformaudio_dataframe[FakeAudio] Callback error: daemonthread# Generate 0.1 second of fake audio at 16kHz# 0.1s * 16000 Hz# Generate low-level noise to simulate microphone input# Sleep for frame duration# Start the worker thread# Return stop functionb'Fake audio capture for testing.'u'Fake audio capture for testing.'b'FakeAudioFrame'u'FakeAudioFrame'b'fake_capture_stream'u'fake_capture_stream'b'Fake audio frame for testing.'u'Fake audio frame for testing.'b'
    Fake audio capture that generates synthetic audio frames.

    Returns a stop function to halt the capture.
    'u'
    Fake audio capture that generates synthetic audio frames.

    Returns a stop function to halt the capture.
    'b'Generate fake audio frames at regular intervals.'u'Generate fake audio frames at regular intervals.'b'[FakeAudio] Callback error: 'u'[FakeAudio] Callback error: 'u'LoquiLex.tests.fakes.fake_audio'u'tests.fakes.fake_audio'u'fakes.fake_audio'u'fake_audio'translate_en_to_zh[zh]echotranslate_en_to_zh_draft[zh-draft]echo:draftb'[zh]'u'[zh]'b'echo'u'echo'b'[zh-draft]'u'[zh-draft]'b'echo:draft'u'echo:draft'u'LoquiLex.tests.fakes.fake_mt'u'tests.fakes.fake_mt'u'fakes.fake_mt'u'fake_mt'Fake streaming ASR for offline testing.uuidFake streaming ASR that produces deterministic events for testing.sessuuid48current_segment_idseq_counteraudio_buffer_sizechunk_count0.30.95this0.90.88is0.911.10.85test.1.40.93test_words[FakeStreamingASR] Initialized: stream_id=warmupNo-op warmup for fake ASR.process_audio_chunkaudio_chunkon_finalProcess fake audio chunk and emit deterministic events.asarraycurrent_timesegnum_words genexprsegment_reset_segment_stateReset state for a new segment.Get fake snapshot.Force finalize current segment.Forced finalizationForcedforced# Predefined test data# Generate segment ID if needed# Deterministic behavior based on chunk count# Emit partials for first 3 chunks# Emit final on 4th chunk (punctuation EOU)# Add to recent finals# Reset state# Reset chunk count after finalization for repeatable behavior# Generate fake live partial# Create minimal final eventb'Fake streaming ASR for offline testing.'u'Fake streaming ASR for offline testing.'b'Fake streaming ASR that produces deterministic events for testing.'u'Fake streaming ASR that produces deterministic events for testing.'b'sess'u'sess'b'this'u'this'b'is'u'is'b'a'u'a'b'test.'u'test.'b'[FakeStreamingASR] Initialized: stream_id='u'[FakeStreamingASR] Initialized: stream_id='b'No-op warmup for fake ASR.'u'No-op warmup for fake ASR.'b'Process fake audio chunk and emit deterministic events.'u'Process fake audio chunk and emit deterministic events.'b'seg'u'seg'b' 'u' 'b'punctuation'u'punctuation'b'Reset state for a new segment.'u'Reset state for a new segment.'b'Get fake snapshot.'u'Get fake snapshot.'b'Force finalize current segment.'u'Force finalize current segment.'b'Forced finalization'u'Forced finalization'b'Forced'u'Forced'b'forced'u'forced'u'LoquiLex.tests.fakes.fake_streaming_asr'u'tests.fakes.fake_streaming_asr'u'fakes.fake_streaming_asr'u'fake_streaming_asr'_Segtranscribe_datahellosegslang# Return two tiny deterministic segmentsb'hello'u'hello'b'lang'u'lang'u'LoquiLex.tests.fakes.fake_whisper'u'tests.fakes.fake_whisper'u'fakes.fake_whisper'u'fake_whisper'DEBUG_COLLECTABLE38DEBUG_LEAK32DEBUG_SAVEALLDEBUG_STATSDEBUG_UNCOLLECTABLEu'This module provides access to the garbage collector for reference cycles.

enable() -- Enable automatic garbage collection.
disable() -- Disable automatic garbage collection.
isenabled() -- Returns true if automatic collection is enabled.
collect() -- Do a full collection right now.
get_count() -- Return the current collection counts.
get_stats() -- Return list of dictionaries containing per-generation stats.
set_debug() -- Set debugging flags.
get_debug() -- Get debugging flags.
set_threshold() -- Set the collection thresholds.
get_threshold() -- Return the current the collection thresholds.
get_objects() -- Return a list of all objects tracked by the collector.
is_tracked() -- Returns true if a given object is tracked.
is_finalized() -- Returns true if a given object has been already finalized.
get_referrers() -- Return the list of objects that refer to an object.
get_referents() -- Return the list of objects that an object refers to.
freeze() -- Freeze all tracked objects and ignore them for future collections.
unfreeze() -- Unfreeze all objects in the permanent generation.
get_freeze_count() -- Return the number of objects in the permanent generation.
'callbacksdisableenablefreezegarbageget_countget_debugget_freeze_countget_objectsget_referentsget_referrersget_thresholdis_finalizedis_trackedisenabledset_debugunfreeze/home/guff/LoquiLex/.direnv/python-3.12.3/lib/python3.12/site-packages/yamllint/conf/default.yaml/home/guff/LoquiLex/.direnv/python-3.12.3/lib/python3.12/site-packages/yamllint/conf/home/guff/LoquiLex/.direnv/python-3.12.3/lib/python3.12/site-packages/yamllint/home/guff/LoquiLex/.direnv/python-3.12.3/lib/python3.12/site-packages/home/guff/LoquiLex/.direnv/python-3.12.3/lib/python3.12/home/guff/LoquiLex/.direnv/python-3.12.3/lib/home/guff/LoquiLex/.direnv/python-3.12.3/home/guff/LoquiLex/.direnvyaml-filestag:yaml.org,2002:str*.yaml'*.yaml'*.yml'*.yml'.yamllint'.yamllint'tag:yaml.org,2002:seq- '*.yaml'rulesanchorsbracesbracketscolonscommascommentsleveltag:yaml.org,2002:maplevel: warningcomments-indentationdocument-enddocument-startempty-linesempty-valuesfloat-valueshyphensindentationkey-duplicateskey-orderingline-lengthnew-line-at-end-of-filenew-lin ... of-filenew-linesoctal-valuesquoted-stringstrailing-spacestruthyanchors: enableyaml-files:/home/guff/LoquiLex/.direnv/python-3.12.3/lib/python3.12/site-packages/yamllint/conf/relaxed.yamlextendsmax-spaces-insidetag:yaml.org,2002:intindent-sequencesconsistentallow-non-breakable-inline-mappingsallow-n ... appingstag:yaml.org,2002:boolbraces:extends: default/home/guff/LoquiLex/.github/agent-task.yml/home/guff/LoquiLex/.githubAgent TaskdescriptionDelegate a coding task to CopilotDelegat ... Copilot[Agent] <short title>"[Agent ... title>"labelsagent"agent"automated"automated"["agent ... mated"]bodytextareagoalattributeslabelGoalWhat should be built/fixed? One paragraph max.What sh ... ph max.label: Goaltype: textareaacceptanceAcceptance CriteriaBullet points the PR must satisfy.Bullet  ... atisfy.label:  ... riteriaconstraintsConstraints & RisksBoundaries, risky areas, or files to avoid.Boundar ...  avoid.label:  ... & Risks- type: textareaname: Agent Task/home/guff/LoquiLex/.github/dependabot.ymlupdatespackage-ecosystempip"pip"directory"/"scheduleweekly"weekly"{ inter ... ekly" }open-pull-requests-limitopen-pu ... s-limitdeps"deps"["deps", "pip"]reviewersGuffawaffle"Guffawaffle"["Guffawaffle"]groupsprod-depsapplies-toversion-updatesupdate-types"minor"patch"patch"["minor", "patch"]applies ... updatessecurity-updatesprod-deps:package ... : "pip"github-actions"github-actions"gha"gha"["deps", "gha"]package ... ctions"npm"npm"/ui"/ui"["deps", "npm"]package ... : "npm"- packa ... : "pip"version: 2/home/guff/LoquiLex/.github/workflows/ci.yml/home/guff/LoquiLex/.github/workflowsCIpushbranches[main]branches: [main]pull_requestworkflow_dispatchtag:yaml.org,2002:nullpush:permissionscontentscontents: readconcurrencygroupci-${{ github.ref }}cancel-in-progressgroup:  ... .ref }}envLX_LOG_MAX_SIZE_MBLX_LOG_MAX_FILESLX_LOG_DIR/tmp/loquilex-ci-logs/tmp/lo ... ci-logsLX_LOG_ ... E_MB: 5jobsbuild-testBuild & Testruns-onubuntu-latesttimeout-minutesstepsCheckoutusesactions/checkout@v4name: CheckoutSet up Pythonactions/setup-python@v5actions ... thon@v5withpython-version"3.12"python- ...  "3.12"name: Set up PythonUpgrade piprunpython -m pip install -U pippython  ...  -U pipname: Upgrade pipInstall project dependencies (if present)Install ... resent)if [ -f requirements-ci.txt ]; then pip install -r requirements-ci.txt; fi
if [ -f requirements-dev.txt ]; then pip install -r requirements-dev.txt; fi
|name: I ... resent)Run CI (make target if available, else fallback)Run CI  ... llback)if make -n run-ci-mode >/dev/null 2>&1; then
  make run-ci-mode
else
  echo "No 'run-ci-mode' target; running minimal pytest fallback"
  python -m pip install pytest >/dev/null
  if find . -type f \( -name "test_*.py" -o -name "*_test.py" \) | grep -q .; then
    pytest -q
  else
    echo "No test files found; skipping pytest."
  fi
fi
name: R ... llback)- name: Checkoutname: Build & Testbuild-test:name: CI/home/guff/LoquiLex/.github/workflows/codeql.ymlCodeQLcron0 4 * * 0"0 4 * * 0"cron: " ...  weekly- cron: ...  weeklyanalyzeAnalyze (${{ matrix.language }})Analyze ... age }})actionspackagessecurity-eventsactions: readstrategyfail-fastfalsematrixincludejavascript-typescriptjavascr ... escriptbuild-modenonelanguag ... escriptpythonlanguage: python- langu ... escriptinclude:fail-fast: falsefetch-depthfetch-depth: 2Initialize CodeQLgithub/codeql-action/init@v3github/ ... init@v3languages${{ matrix.language }}${{ mat ... uage }}${{ matrix.build-mode }}${{ mat ... mode }}languag ... uage }}name: I ...  CodeQLAutobuild (compiled langs only)Autobui ... s only)ifmatrix.build-mode != 'none'matrix. ...  'none'github/codeql-action/autobuild@v3github/ ... uild@v3name: A ... s only)Analyzegithub/codeql-action/analyze@v3github/ ... lyze@v3category/language:${{ matrix.language }}"/langu ... age }}"categor ... age }}"name: Analyzename: A ... age }})analyze:name: CodeQL/home/guff/LoquiLex/.github/workflows/dead-code-analysis.ymlDead Code Analysis (Manual)Dead Co ... Manual)workflow_dispatch:dead-code-analysisDead Code DetectionInstall dependenciesname: I ... denciesRun dead-code-analysis (warn-only)Run dea ... n-only)make dead-code-analysismake de ... nalysiscontinue-on-errorname: R ... n-only)Check for dead code issuesCheck f ...  issues# Make CI fail if high-confidence dead code is detected
if [ -f .artifacts/dead-code-reports/vulture-deadcode.txt ] && [ -s .artifacts/dead-code-reports/vulture-deadcode.txt ]; then
  echo " Dead code detected by Vulture:"
  cat .artifacts/dead-code-reports/vulture-deadcode.txt
  exit 1
fi

# Check for unused imports (not just arguments, which may be interface-required)
if .venv/bin/python -m ruff check loquilex tests --select=F401 --quiet; then
  echo " No unused imports detected"
else
  echo " Unused imports detected:"
  .venv/bin/python -m ruff check loquilex tests --select=F401
  exit 1
fi

echo " Dead code analysis passed"
name: C ...  issuesUpload dead-code reportsUpload  ... reportsalways()actions/upload-artifact@v4actions ... fact@v4dead-code-reports.artifacts/dead-code-reports/**.artifa ... orts/**if-no-files-foundretention-daysname: d ... reportsname: U ... reportsname: D ... tectiondead-code-analysis:name: D ... Manual)/home/guff/LoquiLex/.github/workflows/dependency-review.ymldependency-review[ main ]branches: [ main ]pull_request:pull-requestsreviewDependency Reviewactions/dependency-review-action@v4actions ... tion@v4fail-on-severityhighcomment-summary-in-prcomment ... y-in-prfail-on-scopesruntimefail-on ... y: highname: D ...  Reviewreview:name: d ... -review/home/guff/LoquiLex/.github/workflows/gitleaks.ymlSecret Scan (gitleaks)Secret  ... tleaks)0 3 * * *"0 3 * * *"cron: " ... nightly- cron: ... nightlyscanfetch-depth: 0uses: a ... kout@v4Gitleaks scangitleaks/gitleaks-action@v2gitleak ... tion@v2GITHUB_TOKEN${{ secrets.GITHUB_TOKEN }}${{ sec ... OKEN }}GITLEAKS_CONFIG.gitleaks.tomlGITHUB_ ... R scansname: Gitleaks scan- uses: ... kout@v4runs-on ... -latestscan:name: S ... tleaks)/home/guff/LoquiLex/.github/workflows/preexec-guard.ymlPreexec Guard[push, pull_request]${{ github.workflow }}-${{ github.ref }}${{ git ... .ref }}grep-preexecGrep for preexec_fnshellbashset -euo pipefail

# Search all tracked Python files (recursive), exclude common vendor/virtualenv dirs.
# NOTE: Use [[:space:]]* for POSIX ERE; \s requires -P (PCRE).
if git grep -n -E 'preexec_fn[[:space:]]*=' -- \
    ':(glob)**/*.py' \
    ':(exclude,glob)**/.venv/**' \
    ':(exclude,glob)**/venv/**' \
    ':(exclude,glob)**/node_modules/**' \
    ':(exclude,glob)**/vendor/**' \
    ':(exclude,glob)**/.git/**' | tee /tmp/preexec_matches; then

  echo "::group::preexec_fn occurrences"
  # Annotate each hit so it shows inline in PR checks
  while IFS=: read -r file line rest; do
    # Guard empty reads (e.g., trailing newline)
    [[ -n "${file:-}" && -n "${line:-}" ]] || continue
    echo "::error file=${file},line=${line}::preexec_fn usage is disallowed in this repository"
  done < /tmp/preexec_matches
  echo "::endgroup::"
  exit 1
else
  echo "No preexec_fn found in tracked Python sources"
fi
name: G ... exec_fngrep-preexec:name: Preexec Guard/home/guff/LoquiLex/.github/workflows/scorecards.ymlOSSF Scorecard0 6 * * 1"0 6 * * 1"cron: " ...  Monday- cron: ...  Mondayschedule:scorecardossf/scorecard-action@v2.3.3ossf/sc ... @v2.3.3results_fileresults.sarifresults_formatsarifresults ... s.sarifuses: o ... @v2.3.3Upload SARIF to code scanningUpload  ... canninggithub/codeql-action/upload-sarif@v3github/ ... arif@v3sarif_filesarif_f ... s.sarifname: U ... canningscorecard:name: OSSF Scorecard/home/guff/LoquiLex/.venv/lib/python3.12/site-packages/markdown_it/port.yaml/home/guff/LoquiLex/.venv/lib/python3.12/site-packages/markdown_it/home/guff/LoquiLex/.venv/lib/python3.12/site-packages/home/guff/LoquiLex/.venv/lib/python3.12/home/guff/LoquiLex/.venv/lib/home/guff/LoquiLex/.venvpackagemarkdown-it/markdown-itmarkdow ... down-it14.1.0commit0fe7ccb4b7f30236fb05f623be6924961d296d3d0fe7ccb ... d296d3ddateMar 19, 2024notesRename variables that use python built-in names, e.g. - `max` -> `maximum` - `len` -> `length` - `str` -> `string`Rename  ... s, e.g.Convert JS `for` loops to `while` loops
this is generally the main difference between the codes,
because in python you can't do e.g. `for {i=1;i<x;i++} {}`
`env` is a common Python dictionary, and so does not have attribute access to keys,
as with JavaScript dictionaries.
`options` have attribute access only to core markdownit configuration options
`Token.attrs` is a dictionary, instead of a list of lists.
Upstream the list format is only used to guarantee order: https://github.com/markdown-it/markdown-it/issues/142,
but in Python 3.7+ order of dictionaries is guaranteed.
One should anyhow use the `attrGet`, `attrSet`, `attrPush` and `attrJoin` methods
to manipulate `Token.attrs`, which have an identical signature to those upstream.
Use python version of `charCodeAt`Use pyt ... CodeAt`Use `str` units instead of `int`s to represent Unicode codepoints.
This provides a significant performance boost
In markdown_it/rules_block/reference.py,
record line range in state.env["references"] and add state.env["duplicate_refs"]
This is to allow renderers to report on issues regarding references
The `MarkdownIt.__init__` signature is slightly different for updating options,
since you must always specify the config first, e.g.
use `MarkdownIt("commonmark", {"html": False})` instead of `MarkdownIt({"html": False})`
The default configuration preset for `MarkdownIt` is "commonmark" not "default"The def ... efault"Allow custom renderer to be passed to `MarkdownIt`Allow c ... downIt`change render method signatures
`func(tokens, idx, options, env, slf)` to
`func(self, tokens, idx, options, env)`
Extensions add render methods by format
`MarkdownIt.add_render_rule(name, function, fmt="html")`,
rather than `MarkdownIt.renderer.rules[name] = function`
and renderers should declare a class property `__output__ = "html"`.
This allows for extensibility to more than just HTML renderers
inline tokens in tables are assigned a map (this is helpful for propagation to children)inline  ... ildren)- Renam ... s, e.g.package ... down-it- packa ... down-it/home/guff/LoquiLex/.yamllint.yaml.github/workflows/*.yml".githu ... /*.yml".github/workflows/*.yaml".githu ... *.yaml"- ".git ... /*.yml"ignore.git/**
.venv/**
.direnv/**
node_modules/**
**/site-packages/**
vendor/**
agent-md-bundle/**
160allow-non-breakable-wordsallow-n ... e-wordsmax: 160check-keyscheck-keys: falseline-length:/home/guff/LoquiLex/docker-compose.gpu.ymlservicesloquilexbuildINSTALL_GPU_SUPPORTINSTALL ... T: trueargs:deployresourcesreservationsdrivernvidia[gpu]driver: nvidia- driver: nvidiadevices:reservations:resources:environmentLX_DEVICE=cudaLX_ASR_MODEL=${LX_ASR_MODEL:-base.en}LX_ASR_ ... ase.en}LX_NLLB_MODEL=${LX_NLLB_MODEL:-facebook/nllb-200-1.3B}LX_NLLB ... 0-1.3B}- LX_DEVICE=cudarestartunless-stoppedbuild:loquilex:services:/home/guff/LoquiLex/docker-compose.ymlcontextdockerfileDockerfile${INSTALL_GPU_SUPPORT:-false}${INSTA ... -false}INSTALL ... -false}context: .imageloquilex:latestcontainer_nameloquilex-appports${LX_API_PORT:-8000}:${LX_API_PORT:-8000}"${LX_A ... -8000}"- "${LX ... -8000}"LX_API_PORT=${LX_API_PORT:-8000}LX_API_ ... :-8000}LX_UI_PORT=${LX_UI_PORT:-5173}LX_UI_P ... :-5173}LX_DEVICE=${LX_DEVICE:-auto}LX_DEVI ... :-auto}LX_ASR_MODEL=${LX_ASR_MODEL:-tiny.en}LX_ASR_ ... iny.en}LX_ASR_LANGUAGE=${LX_ASR_LANGUAGE:-en}LX_ASR_ ... GE:-en}LX_NLLB_MODEL=${LX_NLLB_MODEL:-facebook/nllb-200-distilled-600M}LX_NLLB ... d-600M}LX_OUT_DIR=/app/outputsLX_OUT_ ... outputsLX_SKIP_MODEL_PREFETCH=${LX_SKIP_MODEL_PREFETCH:-0}LX_SKIP ... TCH:-0}- LX_AP ... :-8000}volumesloquilex_outputs:/app/outputsloquile ... outputsloquilex_models:/home/loquilex/.cache/huggingfaceloquile ... ingfaceloquilex_whisper:/home/loquilex/.cache/whisperloquile ... whisper- loqui ... outputshealthchecktestCMD"CMD"curl"curl""-f"http://localhost:${LX_API_PORT:-8000}/healthz"http:/ ... ealthz"["CMD", ... althz"]30s10sretriesstart_period40stest: [ ... althz"]loquilex_outputslocaldriver: localloquilex_modelsloquilex_whisperloquilex_outputs:/home/guff/LoquiLex/docs/mt/compatibility.yaml/home/guff/LoquiLex/docs/mt/home/guff/LoquiLex/docsnllb-20 ... ed-600Mtokenizer"en""zh-Hans"["en","zh-Hans"]["zh-Hans","en"]"zh-Hant"["en","zh-Hant"]["zh-Hant","en"]- ["en","zh-Hans"]require ... _prefix"cpu""cuda"["cpu","cuda"]"int8""int8_float16""float16""float32"["int8" ... oat32"]gpu_mem_gb_approx2.5tag:yaml.org,2002:floatcpu_viableGood baseline; fast on 8GB GPUs"Good b ... B GPUs"working"working"family: nllb1.8Hans strong; Hant initially experimental"Hans s ... mental"family: m2m- family: nllbproviders:/home/guff/LoquiLex/loquilex/ui/web/node_modules/balanced-match/.github/FUNDING.yml/home/guff/LoquiLex/loquilex/ui/web/node_modules/balanced-match/.github/home/guff/LoquiLex/loquilex/ui/web/node_modules/balanced-match/home/guff/LoquiLex/loquilex/ui/web/node_modules/home/guff/LoquiLex/loquilex/ui/web/home/guff/LoquiLex/loquilex/uitideliftnpm/balanced-match"npm/balanced-match"patreonjuliangrubertidelif ... -match"/home/guff/LoquiLex/loquilex/ui/web/node_modules/brace-expansion/.github/FUNDING.yml/home/guff/LoquiLex/loquilex/ui/web/node_modules/brace-expansion/.github/home/guff/LoquiLex/loquilex/ui/web/node_modules/brace-expansionnpm/brace-expansion"npm/br ... ansion"tidelif ... ansion"/home/guff/LoquiLex/loquilex/ui/web/node_modules/fastq/.github/dependabot.yml/home/guff/LoquiLex/loquilex/ui/web/node_modules/fastq/.github/home/guff/LoquiLex/loquilex/ui/web/node_modules/fastqdailyinterval: dailydependency-namestandardversions16.0.3- 16.0.3depende ... tandard- depen ... tandardpackage ... em: npm- packa ... em: npm/home/guff/LoquiLex/loquilex/ui/web/node_modules/fastq/.github/workflows/ci.yml/home/guff/LoquiLex/loquilex/ui/web/node_modules/fastq/.github/workflowscilegacynode-version0.10'0.10'0.12'0.12'4.x6.x8.x10.x12.x13.x14.x15.x16.x['0.10' ... , 16.x]node-ve ... , 16.x]matrix:actions/checkout@v3persist-credentialspersist ... : falseuses: a ... kout@v3Use Node.jsactions/setup-node@v1actions ... node@v1${{ matrix.node-version }}${{ mat ... sion }}node-ve ... sion }}name: Use Node.jsInstallnpm install --production && npm install tape
name: InstallRun testsnpm run legacy
name: Run tests- uses: ... kout@v318.x20.x22.x[18.x, 20.x, 22.x]node-ve ... , 22.x]actions/setup-node@v3actions ... node@v3npm install
npm run test
16node-version: 16Run types testsnpm run typescript
name: R ... s testslegacy:name: ci/home/guff/LoquiLex/loquilex/ui/web/node_modules/function-bind/.github/FUNDING.yml/home/guff/LoquiLex/loquilex/ui/web/node_modules/function-bind/.github/home/guff/LoquiLex/loquilex/ui/web/node_modules/function-bindgithubljharb[ljharb]open_collectiveko_finpm/function-bindcommunity_bridgeliberapayissuehuntotechiecustomgithub: [ljharb]/home/guff/LoquiLex/loquilex/ui/web/node_modules/hasown/.github/FUNDING.yml/home/guff/LoquiLex/loquilex/ui/web/node_modules/hasown/.github/home/guff/LoquiLex/loquilex/ui/web/node_modules/hasownnpm/hasown/home/guff/LoquiLex/loquilex/ui/web/node_modules/resolve/.github/FUNDING.yml/home/guff/LoquiLex/loquilex/ui/web/node_modules/resolve/.github/home/guff/LoquiLex/loquilex/ui/web/node_modules/resolvenpm/resolve/home/guff/LoquiLex/loquilex/ui/web/node_modules/reusify/.github/dependabot.yml/home/guff/LoquiLex/loquilex/ui/web/node_modules/reusify/.github/home/guff/LoquiLex/loquilex/ui/web/node_modules/reusify/home/guff/LoquiLex/loquilex/ui/web/node_modules/reusify/.github/workflows/ci.yml/home/guff/LoquiLex/loquilex/ui/web/node_modules/reusify/.github/workflowsactions/setup-node@v4actions ... node@v4npm run test:coverage
22node-version: 22npm run test:typescript
lintLintnpm run lint
name: Lint/home/guff/LoquiLex/loquilex/ui/web/node_modules/supports-preserve-symlinks-flag/.github/FUNDING.yml/home/guff/LoquiLex/loquilex/ui/web/node_modules/supports-preserve-symlinks-flag/.github/home/guff/LoquiLex/loquilex/ui/web/node_modules/supports-preserve-symlinks-flagnpm/supports-preserve-symlink-flagnpm/sup ... nk-flag/home/guff/LoquiLex/node_modules/ast-types/.github/dependabot.yml/home/guff/LoquiLex/node_modules/ast-types/.github/home/guff/LoquiLex/node_modules/ast-types/home/guff/LoquiLex/node_modules"daily"interval: "daily"- packa ... : "npm"/home/guff/LoquiLex/node_modules/ast-types/.github/workflows/main.yml/home/guff/LoquiLex/node_modules/ast-types/.github/workflowsmaster[ master ]branches: [ master ]Test on node ${{ matrix.node_version }} and ${{ matrix.os }}Test on ... x.os }}${{ matrix.os }}node_version'10''12'14'14'['10', '12', '14'][ubuntu-latest]node_ve ... , '14']actions/checkout@v2uses: a ... kout@v2Use Node.js ${{ matrix.node_version }}Use Nod ... sion }}${{ matrix.node_version }}name: U ... sion }}npm install, build and testnpm ins ... nd testnpm install
npm run build --if-present
npm test
name: n ... nd test- uses: ... kout@v2name: T ... x.os }}test:/home/guff/LoquiLex/node_modules/iconv-lite/.github/dependabot.yml/home/guff/LoquiLex/node_modules/iconv-lite/.github/home/guff/LoquiLex/node_modules/iconv-liteallowdependency-typeproductiondepende ... duction- depen ... duction/home/guff/LoquiLex/node_modules/markdown-link-extractor/.github/workflows/ci.yml/home/guff/LoquiLex/node_modules/markdown-link-extractor/.github/workflows/home/guff/LoquiLex/node_modules/markdown-link-extractor/.github/home/guff/LoquiLex/node_modules/markdown-link-extractorTest library17- 12node-version:Use Node.js ${{ matrix.node-version }}actions/setup-node@v2actions ... node@v2cachenpm cirun: npm cinpm testrun: npm testname: Test library/home/guff/LoquiLex/node_modules/needle/.github/workflows/nodejs.yml/home/guff/LoquiLex/node_modules/needle/.github/workflows/home/guff/LoquiLex/node_modules/needle/.github/home/guff/LoquiLex/node_modules/needleNode CI17.x[4.x, 6 ... , 18.x]node-ve ... , 18.x]actions/checkout@v1uses: a ... kout@v1npm install, build, and testnpm install
mkdir -p test/keys
openssl genrsa -out test/keys/ssl.key 2048
openssl req -new -key test/keys/ssl.key -subj "/C=US/ST=Denial/L=Springfield/O=Dis/CN=www.example.com" -x509 -days 999 -out test/keys/ssl.cert
npm run build --if-present
npm test
CI: true- uses: ... kout@v1name: Node CI/home/guff/LoquiLex/node_modules/node-email-verifier/.github/FUNDING.yml/home/guff/LoquiLex/node_modules/node-email-verifier/.github/home/guff/LoquiLex/node_modules/node-email-verifierjesselpalmergithub: jesselpalmer/home/guff/LoquiLex/node_modules/node-email-verifier/.github/workflows/nodejs-ci..yml/home/guff/LoquiLex/node_modules/node-email-verifier/.github/workflowsNode.js CI"main"[ "main" ]branches: [ "main" ][16.x, 18.x, 20.x]node-ve ... , 20.x]'npm'name: Node.js CI/home/guff/LoquiLex/node_modules/proxy-from-env/.travis.yml/home/guff/LoquiLex/node_modules/proxy-from-envnode_jsnodelts/*- nodescriptnpm run lintnpm run testnpm run test-coverage && cat coverage/lcov.info | ./node_modules/.bin/coveralls && rm -rf coveragenpm run ... overage- npm run lintlanguage: node_js/home/guff/LoquiLex/node_modules/smart-buffer/.prettierrc.yaml/home/guff/LoquiLex/node_modules/smart-bufferparsertypescriptprintWidth120tabWidthsingleQuotetrailingCommaparser: typescript/home/guff/LoquiLex/node_modules/smart-buffer/.travis.yml6- 6before_scriptnpm install -g typescriptnpm ins ... escripttsc -p ./- npm i ... escriptnpm run coveralls"npm run coveralls"/home/guff/LoquiLex/node_modules/socks/.prettierrc.yaml/home/guff/LoquiLex/node_modules/socks80arrowParensalwaysbracketSpacing/home/guff/LoquiLex/ql-db-py/codeql-database.ymlsourceLocationPrefixbaselineLinesOfCode12751unicodeNewlinescolumnKindutf32primaryLanguageinProgressinstalledExtractors/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/python/home/g ... /python- /home ... /pythoncpp/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/cpp/home/g ... 3.0/cpp- /home ... 3.0/cpphtml/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/html/home/g ... .0/html- /home ... .0/htmlswift/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/swift/home/g ... 0/swift- /home ... 0/swiftjava/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/java/home/g ... .0/java- /home ... .0/javarust/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/rust/home/g ... .0/rust- /home ... .0/rustgo/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/go/home/g ... 23.0/go- /home ... 23.0/goxml/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/xml/home/g ... 3.0/xml- /home ... 3.0/xmljavascript/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/home/g ... ascript- /home ... ascriptcsv/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/csv/home/g ... 3.0/csv- /home ... 3.0/csvyaml/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/yaml/home/g ... .0/yaml- /home ... .0/yaml/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/actions/home/g ... actions- /home ... actionscsharp/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/csharp/home/g ... /csharp- /home ... /csharpruby/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/ruby/home/g ... .0/ruby- /home ... .0/rubyproperties/home/guff/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/properties/home/g ... perties- /home ... pertiespython:primary ...  pythoncreationMetadatasha0683e1a755a8f4e0e5d4283b05595eeb7b17ab970683e1a ... b17ab97cliVersion2.23.0creationTime2025-09-22T11:43:18.982245273Ztag:yaml.org,2002:timestamp2025-09 ... 245273Zsha: 06 ... b17ab97overlayBaseDatabaseoverlayDatabasefinalisedsourceL ... oquiLex/home/guff/LoquiLex/ui/app/node_modules/call-bind-apply-helpers/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/call-bind-apply-helpers/.github/home/guff/LoquiLex/ui/app/node_modules/call-bind-apply-helpers/home/guff/LoquiLex/ui/app/node_modules/home/guff/LoquiLex/ui/app/home/guff/LoquiLex/uinpm/call-bind-apply-helpersnpm/cal ... helpers/home/guff/LoquiLex/ui/app/node_modules/dunder-proto/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/dunder-proto/.github/home/guff/LoquiLex/ui/app/node_modules/dunder-protonpm/dunder-proto/home/guff/LoquiLex/ui/app/node_modules/es-define-property/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/es-define-property/.github/home/guff/LoquiLex/ui/app/node_modules/es-define-propertynpm/es-define-propertynpm/es- ... roperty/home/guff/LoquiLex/ui/app/node_modules/es-errors/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/es-errors/.github/home/guff/LoquiLex/ui/app/node_modules/es-errorsnpm/es-errors/home/guff/LoquiLex/ui/app/node_modules/es-object-atoms/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/es-object-atoms/.github/home/guff/LoquiLex/ui/app/node_modules/es-object-atomsnpm/es-object/home/guff/LoquiLex/ui/app/node_modules/function-bind/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/function-bind/.github/home/guff/LoquiLex/ui/app/node_modules/function-bind/home/guff/LoquiLex/ui/app/node_modules/get-intrinsic/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/get-intrinsic/.github/home/guff/LoquiLex/ui/app/node_modules/get-intrinsicnpm/get-intrinsic/home/guff/LoquiLex/ui/app/node_modules/get-proto/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/get-proto/.github/home/guff/LoquiLex/ui/app/node_modules/get-protonpm/get-proto/home/guff/LoquiLex/ui/app/node_modules/gopd/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/gopd/.github/home/guff/LoquiLex/ui/app/node_modules/gopdnpm/gopd/home/guff/LoquiLex/ui/app/node_modules/has-symbols/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/has-symbols/.github/home/guff/LoquiLex/ui/app/node_modules/has-symbolsnpm/has-symbols/home/guff/LoquiLex/ui/app/node_modules/has-tostringtag/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/has-tostringtag/.github/home/guff/LoquiLex/ui/app/node_modules/has-tostringtagnpm/has-tostringtag/home/guff/LoquiLex/ui/app/node_modules/hasown/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/hasown/.github/home/guff/LoquiLex/ui/app/node_modules/hasown/home/guff/LoquiLex/ui/app/node_modules/iconv-lite/.github/dependabot.yml/home/guff/LoquiLex/ui/app/node_modules/iconv-lite/.github/home/guff/LoquiLex/ui/app/node_modules/iconv-lite/home/guff/LoquiLex/ui/app/node_modules/math-intrinsics/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/math-intrinsics/.github/home/guff/LoquiLex/ui/app/node_modules/math-intrinsicsnpm/math-intrinsics/home/guff/LoquiLex/ui/app/node_modules/siginfo/.travis.yml/home/guff/LoquiLex/ui/app/node_modules/siginfonotificationsemailemail: falsesecureY10Dvn9UbfpZPbulnl/e7dsiN/1xr06h7k6nJZyxRzr9Hh0UUFPism6k5CFaSegyPIF7sODNBQz4lvXIi2NwcvTLQruw5ehXW0NJ/G7x1TU94pzzhVJ31KBlRWzjKdvVTDsDzFxe5wKWxagPUTkieiIN9CWTQjafByNs3zbK8HL7cmu4Nc42JquVGbtpGgLs7Js+tY+WVB1dMQ4SfqpFgWjm2h05uyXCWHLK5amEAZJLP755lOVgMzw/jQGRg7J4vX4+eRE0r/g0v09x9FUU3ROEmJvqYa14CmGESRhSUyRlv4pnMIs/aK8ZDD8ia3eoTSvMJv8mzdvpkvKzWV1HSZFUX3QZVgWJEmeoF6XP+mdkWu5gnZVlOIBc8NANcS60Dr8QwF470xpPxsyAyf2o9UzX8Xy2qO8XNY/TykGO4soCfOEuVNdw5F9hHEldMHY8p9Z8EJSCn/xfM//LEvxRKREYsMqFtsnwUsv+qiAkHPSHXWQo6HYp+/xDchv63NxtjGHdPs9VpUFr1F8CxZjdis2HZfOnx51W0JIwNYlXNxeqC3WjRUqvRp2NknS982lRHCkHtZfHijGvMm7kj3QL+Ufc7pIfEGnMAKKiNv9kOryjQc29046pRZww9lWjrhoCeEPRhFbkgFV7Mo3bvOExstsSdRnOTlogCe4NviKOwfE=Y10Dvn9 ... iKOwfE=secure: ... iKOwfE=api_keycAmf8extX/sPl+sxC/6sWTmaiSGrXQY9C/lLg9c76Qn12MLysxDYgCRXfl8Az3RIbRuajq0SbyWXeDa/4wZc1PazuUGjZG82na+kuEDg8m5z0gLiJlhp60C0nj3WMJaRBRsOha1Jbs59eU3XNy+H0U5VczHrdw6v2yCHTlauhT/NYiPXMyKmTIJPB/X7gryFuXVhCPNdRBp3rPicbt0d68J+vWv9KNpjA1WB0WDUSl5rMUQbjjsRF2/DKj9WxXjmci+ac+/pCN3rQxgYZ0Ot5o5/RcWucc21ZdFgsLo8dq5YZDl/EQf/pPmkhquiiLRhiTyCBbEw1sDzYHTbTJThrukrZALg0on7XvxbXSQrxgc/IMJ/RT0PoGLEqyAZUSzGa6HPVlHUBt4LB3zgrswGmGUVkZmbiag0foIFeCKlydwEyBYfnFdRddxF6n3irft1l1NJ1HKNxKLnKvyt8iaOlGteXOOfLXzU17DgMgwTsZsvFmtFQcs6yolLHW9RnRTLf56+x/kJZ4kVJjHuyb/98pS4F7etJ2SpZqt1cVUFd/AYtnxL3jKiUhJLNL8hNUIH3eSpMfZUOUxGv1OWuwgyEhSONkITF2VPn4yuyxS23Ewq4LLj/u/9sPlLaGSN4Avaw21gi6L+M9x620sTZHYtNLniVMTAu6aPiM32zPreK2I=cAmf8ex ... PreK2I=secure: ... PreK2I=tagstags: trueprovider: npmnotifications:/home/guff/LoquiLex/ui/app/node_modules/stackback/.travis.yml/home/guff/LoquiLex/ui/app/node_modules/stackback- 0.6/home/guff/LoquiLex/ui/app/node_modules/why-is-node-running/.github/FUNDING.yml/home/guff/LoquiLex/ui/app/node_modules/why-is-node-running/.github/home/guff/LoquiLex/ui/app/node_modules/why-is-node-runningmafintoshgithub: mafintosh/usr/lib/python3.12/importlibMT integration for WebSocket API and session management.AwaitableserviceMTServicecore.utilnormalize_langMTIntegrationMT integration for WebSocket sessions.mt_enableddest_lang_mt_service_broadcast_fnset_broadcast_fnbroadcast_fnSet the broadcast function for emitting events.translate_and_emitis_finalTranslate text and emit MT event.mt.finalmt.partialevent_typesrc_texteventmt.errorerror_eventtranslate_chunked_and_emitsegment_idsTranslate multiple chunks and emit MT events.chunks and segment_ids must have same lengthsrc_chunksget_statusGet MT integration status.enabledget_provider_nameget_capabilitiescreate_mt_integrationsession_configCreate MT integration from session config.# Initialize MT service if enabled# Normalize destination language# Perform translation# Emit MT event# Emit error event on translation failure# Perform chunked translation# Emit events for each result# Emit error event# Will be set laterb'MT integration for WebSocket API and session management.'u'MT integration for WebSocket API and session management.'b'MT integration for WebSocket sessions.'u'MT integration for WebSocket sessions.'b'Set the broadcast function for emitting events.'u'Set the broadcast function for emitting events.'b'Translate text and emit MT event.'u'Translate text and emit MT event.'b'mt.final'u'mt.final'b'mt.partial'u'mt.partial'b'src_text'u'src_text'b'src_lang'u'src_lang'b'tgt_lang'u'tgt_lang'b'provider'u'provider'b'quality'u'quality'b'mt.error'u'mt.error'b'Translate multiple chunks and emit MT events.'u'Translate multiple chunks and emit MT events.'b'chunks and segment_ids must have same length'u'chunks and segment_ids must have same length'b'src_chunks'u'src_chunks'b'Get MT integration status.'u'Get MT integration status.'b'enabled'u'enabled'b'dest_lang'u'dest_lang'b'capabilities'u'capabilities'b'Create MT integration from session config.'u'Create MT integration from session config.'b'mt_enabled'u'mt_enabled'u'LoquiLex.loquilex.mt.integration'u'loquilex.mt.integration'u'mt.integration'u'integration'/usr/lib/python3.12/jsonsignalloquilex.api.vuEmaVurms_peakloquilex.asr.whisper_engineSegmentWhisperEngineloquilex.output.srtappend_srt_cueloquilex.output.text_ioRollingTextFileloquilex.output.vttappend_vtt_cuewrite_vttloquilex.post.zh_textpost_processloquilex.segmentation.aggregatorap--out-prefix/live--stream-zhstore_trueaction--zh-partial-debounce-sec--combined-vtt--live-window-wordsRolling word window size for live draft translation; requires word timestampshelp--live-update-debounce-sec0.4Debounce for live draft updates--live-draft-filesWrite live EN/ZH drafts to _live_en.txt/_live_zh.txt atomically--secondsDuration in seconds; <=0 to run until Ctrl+C-v--verboseEnable verbose logs--log-ioLog file write operations--partial-en/live.partial.en.txt--partial-zh/live.partial.zh.txt--final-en/live.final.en.txt--final-zh/live.final.zh.txt--final-vtt-en/live.final.en.vtt--no-final-vtt-en--final-srt-zh/live.final.zh.srt--no-final-srt-zh--max-lines--overwrite-run--save-audiowavflacchoices--save-audio-path--partial-word-capout_prefix.vttout_vtt_live_en.txtout_live_en_live_zh.txtout_live_zhmakedirsdirnamepartial_entraggStarting servicewarmup_text_enzh_warmlive_draft_filesutf-8fEN  ZH*  engqueue.Queue[tuple[float,float,str]]translate_qcueszh_cueslast_zh_partial_emitlast_en_partial_printlast_zh_partial_textlast_en_partial_textlive_window_wordsword_windowlast_live_emitlast_en_livelast_zh_livewrite_atomic.tmptmpp_enpartial_zhp_zhfinal_enf_enfinal_zhf_zh_io_loglog_iooverwrite_runreset[io] reset path=pthfinal_vtt_enfinal_srt_zh[io] removed path=srt_index_zhsession_t0_monolast_t1_monoaudio_since_resetmt_droppedtxtemitpartrewrite_current_line[io] partial rewrite lang=en path= chars=use_word_windowzh_partial_debounce_secdraft[io] partial rewrite lang=zh path=rel_arel_b[io] partial clear lang=en path=append_final_line[io] final append lang=en path=no_final_vtt_en[io] vtt append lang=en path= a= b=FullEN(final): on_segbuf_secseg_start_wallseg_end_wallon_wordslive_update_debounce_secen_chunkzh_draftframesaudio_modeaudio_sink_wavaudio_sink_ffmpegwf[cli] save-audio started mode=wav path=[cli] save-audio wav setup failed: pipe:0-y[cli] save-audio started mode=flac path=[cli] save-audio flac setup failed: vu_emalast_vufeedfrcount_nonzero0.999clippedclip_pctr2p2nowmVU cb_wordsconcatenate[cli] Ready  start speaking now (capturing mic) running until Ctrl+C[cli] Ready  start speaking now (capturing mic) for s (timer starts now; Ctrl+C to stop early)ready_time_monostop_mtmt_workerzh_txt[io] partial clear lang=zh path=[io] final append lang=zh path=no_final_srt_zhused_idx[io] srt append lang=zh path= idx=combined_vttcombinedaebeteazbztza21e-3EN: 
ZH: ZH: task_doneth_mtshutdownfinalize_now_on_signalsignum_frameSIGUSR1[cli] SIGUSR1 -> finalize-now requestedfile
[cli] signal= -> shutting downSIGINTSIGTERM
[cli] KeyboardInterrupt -> shutting downwait[cli] MT dropped=[cli] run complete# Legacy flags (kept for compatibility with older docs)# Verbosity flags# New flags per task# legacy combined if used# legacy# Initialize MT first so models are loaded before we start capturing audio# Prime MT with a tiny draft translation to load weights/caches# Emit initial drafts to files if requested and print once# Then initialize ASR# Bounded queue to provide backpressure if MT lags behind ASR# EN finalized cues# ZH finalized cues# Live word-window state# New writers# Overwrite behavior# Remove timed outputs to reset headers/indices# Track next SRT index for ZH# Start timing AFTER warmup and just before capture begins# will set once first audio frame arrives (monotonic)# monotonic time of latest captured audio end# seconds fed to engine since its last reset# Count of dropped translation requests due to backlog# Write partial EN line (single line)# Live ZH partial (debounced), independent of word-window# Clear partial EN line after finalization# Append EN final line# Append timed EN cue if enabled# Drop if MT is backlogged to keep latency bounded# Map model-relative times to wall clock using capture timing# Map ASR buffer-relative times (seg.start/end) to session-relative using monotonic clock# engine resets its internal buffer on final; reset our counter too# words are Word objects, but avoid tight coupling in import# Update the live ZH partial file as well# Proper capture loop; start capture and set start time on first frame# Optional audio recording sinks# int16# Feed float32 raw to ffmpeg to encode FLAC# Compute VU and emit at ~20 Hz, include clipping percentage# clipping: count samples within 0.001 of full-scale# Tap audio sink# convert float32 [-1,1] to int16# track latest monotonic time and audio seconds since engine reset# periodically run ASR; engine will finalize on pauses# ~200ms# Pass on_words if using live word-window; else let it be None# Aggregator handles partial debounce only; finalization by engine# Start countdown from the Ready message time to guarantee full speaking window# Background translator loop# Clear partial ZH line and append final ZH TXT# Timed outputs for ZH# Rebuild combined cues from pairs and write single VTT# No separate zh VTT in new spec; keep legacy optional behavior disabled# Graceful shutdown handling# Set shutdown flag; main loop will exit promptly# finalize-now support# fabricate a short segment ending at last_t1_mono# clear partial files# give translator a moment to finish last item# Close audio sinks# Final flush for legacy combined vtt if usedb'--out-prefix'u'--out-prefix'b'/live'u'/live'b'--stream-zh'u'--stream-zh'b'store_true'u'store_true'b'--zh-partial-debounce-sec'u'--zh-partial-debounce-sec'b'--combined-vtt'u'--combined-vtt'b'--live-window-words'u'--live-window-words'b'Rolling word window size for live draft translation; requires word timestamps'u'Rolling word window size for live draft translation; requires word timestamps'b'--live-update-debounce-sec'u'--live-update-debounce-sec'b'Debounce for live draft updates'u'Debounce for live draft updates'b'--live-draft-files'u'--live-draft-files'b'Write live EN/ZH drafts to _live_en.txt/_live_zh.txt atomically'u'Write live EN/ZH drafts to _live_en.txt/_live_zh.txt atomically'b'--seconds'u'--seconds'b'Duration in seconds; <=0 to run until Ctrl+C'u'Duration in seconds; <=0 to run until Ctrl+C'b'-v'u'-v'b'--verbose'u'--verbose'b'Enable verbose logs'u'Enable verbose logs'b'--log-io'u'--log-io'b'Log file write operations'u'Log file write operations'b'--partial-en'u'--partial-en'b'/live.partial.en.txt'u'/live.partial.en.txt'b'--partial-zh'u'--partial-zh'b'/live.partial.zh.txt'u'/live.partial.zh.txt'b'--final-en'u'--final-en'b'/live.final.en.txt'u'/live.final.en.txt'b'--final-zh'u'--final-zh'b'/live.final.zh.txt'u'/live.final.zh.txt'b'--final-vtt-en'u'--final-vtt-en'b'/live.final.en.vtt'u'/live.final.en.vtt'b'--no-final-vtt-en'u'--no-final-vtt-en'b'--final-srt-zh'u'--final-srt-zh'b'/live.final.zh.srt'u'/live.final.zh.srt'b'--no-final-srt-zh'u'--no-final-srt-zh'b'--max-lines'u'--max-lines'b'--overwrite-run'u'--overwrite-run'b'--save-audio'u'--save-audio'b'wav'u'wav'b'flac'u'flac'b'--save-audio-path'u'--save-audio-path'b'--partial-word-cap'u'--partial-word-cap'b'.vtt'u'.vtt'b'_live_en.txt'u'_live_en.txt'b'_live_zh.txt'u'_live_zh.txt'b'Starting service'u'Starting service'b'utf-8'u'utf-8'u'EN  'u'ZH*  'b'queue.Queue[tuple[float,float,str]]'u'queue.Queue[tuple[float,float,str]]'b'.tmp'u'.tmp'b'[io] reset path='u'[io] reset path='b'[io] removed path='u'[io] removed path='b'[io] partial rewrite lang=en path='u'[io] partial rewrite lang=en path='b' chars='u' chars='b'[io] partial rewrite lang=zh path='u'[io] partial rewrite lang=zh path='b'[io] partial clear lang=en path='u'[io] partial clear lang=en path='b'[io] final append lang=en path='u'[io] final append lang=en path='b'[io] vtt append lang=en path='u'[io] vtt append lang=en path='b' a='u' a='b' b='u' b='b'EN(final): 'u'EN(final): 'b'[cli] save-audio started mode=wav path='u'[cli] save-audio started mode=wav path='b'[cli] save-audio wav setup failed: 'u'[cli] save-audio wav setup failed: 'b'pipe:0'u'pipe:0'b'-y'u'-y'b'[cli] save-audio started mode=flac path='u'[cli] save-audio started mode=flac path='b'[cli] save-audio flac setup failed: 'u'[cli] save-audio flac setup failed: 'b'VU 'u'VU 'u'[cli] Ready  start speaking now (capturing mic) running until Ctrl+C'u'[cli] Ready  start speaking now (capturing mic) for 'b's (timer starts now; Ctrl+C to stop early)'u's (timer starts now; Ctrl+C to stop early)'b'[io] partial clear lang=zh path='u'[io] partial clear lang=zh path='b'[io] final append lang=zh path='u'[io] final append lang=zh path='b'[io] srt append lang=zh path='u'[io] srt append lang=zh path='b' idx='u' idx='b'EN: 'u'EN: 'b'
ZH: 'u'
ZH: 'b'ZH: 'u'ZH: 'b'[cli] SIGUSR1 -> finalize-now requested'u'[cli] SIGUSR1 -> finalize-now requested'b'
[cli] signal='u'
[cli] signal='u' -> shutting down'u'
[cli] KeyboardInterrupt -> shutting down'b'[cli] MT dropped='u'[cli] MT dropped='b'[cli] run complete'u'[cli] run complete'u'LoquiLex.loquilex.cli.live_en_to_zh'u'LoquiLex.loquilex.cli'u'loquilex.cli.live_en_to_zh'u'loquilex.cli'u'cli.live_en_to_zh'u'cli'u'live_en_to_zh'/usr/lib/python3.12/loggingM2M tokenizer adapter.Tokenizer adapter for M2M100 models.transformers package required for M2M tokenizerM2M_MODEL_NAMEfrom_pretrained_tokEncode text with source language setting.convert_ids_to_tokensGet target language prefix token.lang_code_to_tokenDecode tokens, stripping BOS token if present.__convert_tokens_to_idsidsskip_special_tokens# Lazy import to avoid heavy dependency on module load# M2M uses simpler language codes# Strip possible target lang token at position 0b'M2M tokenizer adapter.'u'M2M tokenizer adapter.'b'Tokenizer adapter for M2M100 models.'u'Tokenizer adapter for M2M100 models.'b'transformers package required for M2M tokenizer'u'transformers package required for M2M tokenizer'b'M2M_MODEL_NAME'u'M2M_MODEL_NAME'b'Encode text with source language setting.'u'Encode text with source language setting.'b'Get target language prefix token.'u'Get target language prefix token.'b'Decode tokens, stripping BOS token if present.'u'Decode tokens, stripping BOS token if present.'b'__'u'__'u'loquilex.mt.tokenizers.m2m'u'mt.tokenizers.m2m'u'tokenizers.m2m'Performance metrics collection with structured logging integration.enumEnumTypes of performance metrics.latencyLATENCYthroughputTHROUGHPUTcounterCOUNTERgaugeGAUGEMetricValueIndividual metric measurement.metadataMetricStatsStatistical summary of metric measurements.p50p99recent_avgCollect and report performance metrics with structured logging.window_sizeInitialize performance metrics collector.

        Args:
            logger: Optional structured logger for metric events
            window_size: Size of sliding window for recent metrics
            component: Component name for metrics namespace
        unknown_active_timersthresholdsrecord_latencyRecord latency measurement.

        Args:
            name: Metric name
            duration_ms: Duration in milliseconds
            **metadata: Additional context for the measurement
        _add_measurementrecord_throughputRecord throughput measurement.

        Args:
            name: Metric name
            count: Number of operations/events
            **metadata: Additional context for the measurement
        Increment a counter metric.

        Args:
            name: Counter name
            value: Value to add (default: 1.0)
        Counter incremented: metric_typemetric_namecounter_valueincrementSet a gauge metric value.

        Args:
            name: Gauge name
            value: Current value
        Gauge updated: gauge_valueStart timing a latency measurement.

        Args:
            name: Timer/metric name
        End timing and record latency.

        Args:
            name: Timer/metric name
            **metadata: Additional context for the measurement

        Returns:
            Duration in milliseconds

        Raises:
            KeyError: If timer was not started
        Timer '' was not startedAdd a measurement to the metrics storage.measurement_check_thresholdsMetric recorded: metric_valueGet statistical summary for a metric.

        Args:
            name: Metric name

        Returns:
            Statistical summary or None if metric doesn't exist
        values_sortedstats0.99recent_countrecent_valuesSet performance thresholds for a metric.

        Args:
            name: Metric name
            warning: Warning threshold value
            critical: Critical threshold value
        Check if metric value exceeds thresholds.Metric threshold exceeded (critical): threshold_typethreshold_valueMetric threshold exceeded (warning): Get summary of all collected metrics.

        Returns:
            Dictionary with metric summaries, counters, and gauges
        metrics_summaryLog summary of all metrics.Performance metrics summaryReset all metrics (for testing or restart scenarios).# Metric storage by name# Timing contexts# Performance thresholds for alerting# Check thresholds and log if needed# Percentiles# Recent average (last 10% of measurements)b'Performance metrics collection with structured logging integration.'u'Performance metrics collection with structured logging integration.'b'Types of performance metrics.'u'Types of performance metrics.'b'latency'u'latency'b'throughput'u'throughput'b'counter'u'counter'b'gauge'u'gauge'b'Individual metric measurement.'u'Individual metric measurement.'b'Statistical summary of metric measurements.'u'Statistical summary of metric measurements.'b'Collect and report performance metrics with structured logging.'u'Collect and report performance metrics with structured logging.'b'Initialize performance metrics collector.

        Args:
            logger: Optional structured logger for metric events
            window_size: Size of sliding window for recent metrics
            component: Component name for metrics namespace
        'u'Initialize performance metrics collector.

        Args:
            logger: Optional structured logger for metric events
            window_size: Size of sliding window for recent metrics
            component: Component name for metrics namespace
        'b'unknown'u'unknown'b'Record latency measurement.

        Args:
            name: Metric name
            duration_ms: Duration in milliseconds
            **metadata: Additional context for the measurement
        'u'Record latency measurement.

        Args:
            name: Metric name
            duration_ms: Duration in milliseconds
            **metadata: Additional context for the measurement
        'b'Record throughput measurement.

        Args:
            name: Metric name
            count: Number of operations/events
            **metadata: Additional context for the measurement
        'u'Record throughput measurement.

        Args:
            name: Metric name
            count: Number of operations/events
            **metadata: Additional context for the measurement
        'b'Increment a counter metric.

        Args:
            name: Counter name
            value: Value to add (default: 1.0)
        'u'Increment a counter metric.

        Args:
            name: Counter name
            value: Value to add (default: 1.0)
        'b'Counter incremented: 'u'Counter incremented: 'b'Set a gauge metric value.

        Args:
            name: Gauge name
            value: Current value
        'u'Set a gauge metric value.

        Args:
            name: Gauge name
            value: Current value
        'b'Gauge updated: 'u'Gauge updated: 'b'Start timing a latency measurement.

        Args:
            name: Timer/metric name
        'u'Start timing a latency measurement.

        Args:
            name: Timer/metric name
        'b'End timing and record latency.

        Args:
            name: Timer/metric name
            **metadata: Additional context for the measurement

        Returns:
            Duration in milliseconds

        Raises:
            KeyError: If timer was not started
        'u'End timing and record latency.

        Args:
            name: Timer/metric name
            **metadata: Additional context for the measurement

        Returns:
            Duration in milliseconds

        Raises:
            KeyError: If timer was not started
        'b'Timer ''u'Timer ''b'' was not started'u'' was not started'b'Add a measurement to the metrics storage.'u'Add a measurement to the metrics storage.'b'Metric recorded: 'u'Metric recorded: 'b'Get statistical summary for a metric.

        Args:
            name: Metric name

        Returns:
            Statistical summary or None if metric doesn't exist
        'u'Get statistical summary for a metric.

        Args:
            name: Metric name

        Returns:
            Statistical summary or None if metric doesn't exist
        'b'Set performance thresholds for a metric.

        Args:
            name: Metric name
            warning: Warning threshold value
            critical: Critical threshold value
        'u'Set performance thresholds for a metric.

        Args:
            name: Metric name
            warning: Warning threshold value
            critical: Critical threshold value
        'b'warning'u'warning'b'critical'u'critical'b'Check if metric value exceeds thresholds.'u'Check if metric value exceeds thresholds.'b'Metric threshold exceeded (critical): 'u'Metric threshold exceeded (critical): 'b'Metric threshold exceeded (warning): 'u'Metric threshold exceeded (warning): 'b'Get summary of all collected metrics.

        Returns:
            Dictionary with metric summaries, counters, and gauges
        'u'Get summary of all collected metrics.

        Returns:
            Dictionary with metric summaries, counters, and gauges
        'b'component'u'component'b'metrics'u'metrics'b'count'u'count'b'avg'u'avg'b'min'b'max'b'p50'u'p50'b'p95'u'p95'b'p99'u'p99'b'recent_avg'u'recent_avg'b'Log summary of all metrics.'u'Log summary of all metrics.'b'Performance metrics summary'u'Performance metrics summary'b'Reset all metrics (for testing or restart scenarios).'u'Reset all metrics (for testing or restart scenarios).'u'LoquiLex.loquilex.logging.metrics'u'loquilex.logging.metrics'u'logging.metrics'Performance metrics and structured logging for streaming ASR.loggingLatencyMetricsTrack latency statistics.min_valmax_vallambdaAdd a new latency measurement.Get statistical summary.recentrecent_sortedCollect and report ASR performance metrics.asrperf_metricspartial_intervalsfinal_latencypartial_countfinal_countlast_partial_timesegment_start_timepartial_interval200.0300.0800.01200.0ASR metrics initializedevent_dictRecord partial event for metrics.interval_mstext_length_log_eventword_countRecord final event for metrics.latency_mssegment_durationsegment_duration_msdetailsLog structured event with metrics.ASR event: session_durationGenerate a summary of all metrics.partial_intervals_msfinal_latency_msfinalsevents_per_secondpartial_statsfinal_statspartial_p50_targetpartial_p95_target800final_p95_targetLog a summary of all metrics.session_summaryASR metrics reset# Initialize structured logger# Initialize performance metrics# Latency tracking (keep existing for compatibility)# Time between partials# Time from last partial to final# Event counters# State for interval calculation# Set performance thresholds# Track inter-partial interval# Convert to ms# Record to performance metrics# Mark segment start if this is the first partial for a segment# Log structured partial event# Track finalization latency (from last partial to final)# Track EOU reasons# Calculate segment duration# Log structured final event# Reset segment state# Calculate derived metrics# Performance assessment# < 200ms target# < 300ms target#  800ms target# Reset performance metricsb'Performance metrics and structured logging for streaming ASR.'u'Performance metrics and structured logging for streaming ASR.'b'Track latency statistics.'u'Track latency statistics.'b'Add a new latency measurement.'u'Add a new latency measurement.'b'Get statistical summary.'u'Get statistical summary.'b'Collect and report ASR performance metrics.'u'Collect and report ASR performance metrics.'b'asr_metrics'u'asr_metrics'b'asr'b'partial_interval'u'partial_interval'b'final_latency'u'final_latency'b'ASR metrics initialized'u'ASR metrics initialized'b'Record partial event for metrics.'u'Record partial event for metrics.'b'partial'u'partial'b'text_length'u'text_length'b'word_count'u'word_count'b'Record final event for metrics.'u'Record final event for metrics.'b'final'b'segment_duration_ms'u'segment_duration_ms'b'Log structured event with metrics.'u'Log structured event with metrics.'b'ASR event: 'u'ASR event: 'b'Generate a summary of all metrics.'u'Generate a summary of all metrics.'b'partial_count'u'partial_count'b'final_count'u'final_count'b'partial_intervals_ms'u'partial_intervals_ms'b'final_latency_ms'u'final_latency_ms'b'partials'u'partials'b'finals'u'finals'b'events_per_second'u'events_per_second'b'partial_p50_target'u'partial_p50_target'b'partial_p95_target'u'partial_p95_target'b'final_p95_target'u'final_p95_target'b'Log a summary of all metrics.'u'Log a summary of all metrics.'b'session_summary'u'session_summary'b'ASR metrics reset'u'ASR metrics reset'u'LoquiLex.loquilex.asr.metrics'u'loquilex.asr.metrics'u'asr.metrics'Per-role model defaults with persistence.jsonpathsresolve_out_dirgetLoggerModelDefaultsDefault model selections per role.asr_model_idasr_deviceasr_compute_typemt_model_idmt_devicemt_compute_typetts_model_idtts_devicefrom_dictsetcomp__dataclass_fields__known_fieldsdictcompkvfiltered_dataModelDefaultsManagerManages persistent model defaults with fallback to environment variables.storage_pathInitialize defaults manager.

        Args:
            storage_path: Path to defaults storage file. Defaults to
                `<OUT_DIR>/model_defaults.json`, where `OUT_DIR` comes from
                `LX_OUT_DIR` (or legacy `LLX_OUT_DIR`) and falls back to
                `loquilex/out`.
        model_defaults.json_defaults_load_defaultsLoad defaults from storage, falling back to environment variables.loadLoaded model defaults from Failed to load model defaults: _save_defaultsSave current defaults to storage.dumpindentSaved model defaults to Failed to save model defaults: get_defaultsGet current model defaults.update_defaultsUpdate model defaults.

        Args:
            **kwargs: Default values to update (asr_model_id, mt_model_id, etc.)

        Returns:
            Updated defaults
        keyUnknown default field: Updated model defaults: get_asr_defaultGet default ASR model ID.get_mt_defaultGet default MT model ID.get_tts_defaultGet default TTS model ID.set_asr_defaultmodel_idSet default ASR model.set_mt_defaultSet default MT model.set_tts_defaultSet default TTS model._default_managerget_model_defaults_managerGet the default model defaults manager instance.# ASR defaults# MT defaults# TTS defaults (placeholder for future)# Filter to only known fields and drop None values so dataclass defaults apply# Ensure storage directory exists# Load existing defaults# Fallback to environment variables for initial defaults# No env var equivalent yet# Save initial defaults# Update only provided fields; ignore None to avoid nulling values# Global singleton instanceb'Per-role model defaults with persistence.'u'Per-role model defaults with persistence.'b'Default model selections per role.'u'Default model selections per role.'b'Manages persistent model defaults with fallback to environment variables.'u'Manages persistent model defaults with fallback to environment variables.'b'Initialize defaults manager.

        Args:
            storage_path: Path to defaults storage file. Defaults to
                `<OUT_DIR>/model_defaults.json`, where `OUT_DIR` comes from
                `LX_OUT_DIR` (or legacy `LLX_OUT_DIR`) and falls back to
                `loquilex/out`.
        'u'Initialize defaults manager.

        Args:
            storage_path: Path to defaults storage file. Defaults to
                `<OUT_DIR>/model_defaults.json`, where `OUT_DIR` comes from
                `LX_OUT_DIR` (or legacy `LLX_OUT_DIR`) and falls back to
                `loquilex/out`.
        'b'model_defaults.json'u'model_defaults.json'b'Load defaults from storage, falling back to environment variables.'u'Load defaults from storage, falling back to environment variables.'b'r'u'r'b'Loaded model defaults from 'u'Loaded model defaults from 'b'Failed to load model defaults: 'u'Failed to load model defaults: 'b'Save current defaults to storage.'u'Save current defaults to storage.'b'Saved model defaults to 'u'Saved model defaults to 'b'Failed to save model defaults: 'u'Failed to save model defaults: 'b'Get current model defaults.'u'Get current model defaults.'b'Update model defaults.

        Args:
            **kwargs: Default values to update (asr_model_id, mt_model_id, etc.)

        Returns:
            Updated defaults
        'u'Update model defaults.

        Args:
            **kwargs: Default values to update (asr_model_id, mt_model_id, etc.)

        Returns:
            Updated defaults
        'b'Unknown default field: 'u'Unknown default field: 'b'Updated model defaults: 'u'Updated model defaults: 'b'Get default ASR model ID.'u'Get default ASR model ID.'b'Get default MT model ID.'u'Get default MT model ID.'b'Get default TTS model ID.'u'Get default TTS model ID.'b'Set default ASR model.'u'Set default ASR model.'b'Set default MT model.'u'Set default MT model.'b'Set default TTS model.'u'Set default TTS model.'b'Get the default model defaults manager instance.'u'Get the default model defaults manager instance.'u'LoquiLex.loquilex.config.model_defaults'u'loquilex.config.model_defaults'u'config.model_defaults'u'model_defaults'reLocal model discovery for ASR (whisper) and MT (NLLB/M2M).

We scan common cache locations:
- HF cache (HF_HOME or HF_DATASETS_CACHE) for Transformers models (MT)
- whisper.cpp GGUF files under third_party/whisper.cpp/models and repo root models/
- CTranslate2 directories (faster-whisper converted) under ~/.cache/ or project models/
_env_pathsTRANSFORMERS_CACHEhome.cachehuggingface~/.cacheexpanduser_project_paths__file__rootmodelsthird_partywhisper.cpplist_asr_modelsoutseenbaserglob*.ggufst_sizestemquantsearch-(Q\d+_\w+)r"ggufsourcesize_bytesrecmodels--Systran--faster-whisper-tiny.enmodels--*--tiny*models--Systran--faster-whisper-base.enmodels--*--base*base.enmodels--Systran--faster-whisper-small.enmodels--*--small*models--Systran--faster-whisper-medium.enmodels--*--medium*medium.enmodels--Systran--faster-whisper-large-v2models--*--large*large-v3model_mappingscachesmidpatternschubhub_dirfoundpatternhitshflist_mt_modelscandidatescidpartsleafpresent**/models--*--***/models--zho_Hanslangsmt_supported_languageszho_Hantjpn_Jpankor_Hangfra_Latnspa_Latnjakoes# Add user caches# GGUF files (whisper.cpp)# faster-whisper by model id (names only)  we don't enumerate CT2 dirs reliably# Check for actual downloaded models in HF cache# Check both direct glob and recursive rglob for model directories# Minimal mapping for defaults; can be extended in futureb'Local model discovery for ASR (whisper) and MT (NLLB/M2M).

We scan common cache locations:
- HF cache (HF_HOME or HF_DATASETS_CACHE) for Transformers models (MT)
- whisper.cpp GGUF files under third_party/whisper.cpp/models and repo root models/
- CTranslate2 directories (faster-whisper converted) under ~/.cache/ or project models/
'u'Local model discovery for ASR (whisper) and MT (NLLB/M2M).

We scan common cache locations:
- HF cache (HF_HOME or HF_DATASETS_CACHE) for Transformers models (MT)
- whisper.cpp GGUF files under third_party/whisper.cpp/models and repo root models/
- CTranslate2 directories (faster-whisper converted) under ~/.cache/ or project models/
'b'TRANSFORMERS_CACHE'u'TRANSFORMERS_CACHE'b'.cache'u'.cache'b'huggingface'u'huggingface'b'~/.cache'u'~/.cache'b'models'u'models'b'third_party'u'third_party'b'whisper.cpp'u'whisper.cpp'b'*.gguf'u'*.gguf'b'-(Q\d+_\w+)'u'-(Q\d+_\w+)'b'id'u'id'b'gguf'u'gguf'b'source'u'source'b'quant'u'quant'b'path'u'path'b'size_bytes'u'size_bytes'b'models--Systran--faster-whisper-tiny.en'u'models--Systran--faster-whisper-tiny.en'b'models--*--tiny*'u'models--*--tiny*'b'models--Systran--faster-whisper-base.en'u'models--Systran--faster-whisper-base.en'b'models--*--base*'u'models--*--base*'b'base.en'u'base.en'b'models--Systran--faster-whisper-small.en'u'models--Systran--faster-whisper-small.en'b'models--*--small*'u'models--*--small*'b'models--Systran--faster-whisper-medium.en'u'models--Systran--faster-whisper-medium.en'b'models--*--medium*'u'models--*--medium*'b'medium.en'u'medium.en'b'models--Systran--faster-whisper-large-v2'u'models--Systran--faster-whisper-large-v2'b'models--*--large*'u'models--*--large*'b'large-v3'u'large-v3'b'hub'u'hub'b'hf'u'hf'b'**/models--*--'u'**/models--*--'b'*'u'*'b'**/'u'**/'b'models--'u'models--'b'zho_Hans'u'zho_Hans'b'langs'u'langs'b'zho_Hant'u'zho_Hant'b'jpn_Jpan'u'jpn_Jpan'b'kor_Hang'u'kor_Hang'b'fra_Latn'u'fra_Latn'b'spa_Latn'u'spa_Latn'b'ja'u'ja'b'ko'u'ko'b'fr'u'fr'b'es'u'es'u'LoquiLex.loquilex.api.model_discovery'u'loquilex.api.model_discovery'u'api.model_discovery'u'model_discovery'step_times_u'LoquiLex.tests.util.monotonic'u'tests.util.monotonic'u'util.monotonic'u'monotonic'NLLB tokenizer adapter.FLORESTokenizer adapter for NLLB models.transformers package required for NLLB tokenizerDecode tokens, stripping language prefixes if present.# FLORES language codes for NLLB# NLLB may emit the language tag as first token; drop if presentb'NLLB tokenizer adapter.'u'NLLB tokenizer adapter.'b'Tokenizer adapter for NLLB models.'u'Tokenizer adapter for NLLB models.'b'transformers package required for NLLB tokenizer'u'transformers package required for NLLB tokenizer'b'Decode tokens, stripping language prefixes if present.'u'Decode tokens, stripping language prefixes if present.'u'loquilex.mt.tokenizers.nllb'u'mt.tokenizers.nllb'u'tokenizers.nllb'xml.etree.ElementTreeETroot_dirjunit_pathsdirpath_dirnamesfilenameswalkfn.xmljunite2eprint_failurecasekindclassname[] ::  message: lnlines  any_foundparsetreegetroottestcasechildtagfailuree2e-job.log# No JUnit failures parsed. Showing FAILED lines from job log:
line^FAILED\sE   # No JUnit failures and no e2e-job.log present.# Not a junit xml# pytest's JUnit uses <testsuite><testcase> ...# Fallback: scan job log for FAILED linesb'.xml'u'.xml'b'junit'u'junit'b'e2e'u'e2e'b'classname'u'classname'b'['u'['b'] 'u'] 'b'::'u'::'b'  message: 'u'  message: 'b'  'u'  'b'testcase'u'testcase'b'failure'u'failure'b'message'u'message'b'e2e-job.log'u'e2e-job.log'b'# No JUnit failures parsed. Showing FAILED lines from job log:
'u'# No JUnit failures parsed. Showing FAILED lines from job log:
'b'ignore'u'ignore'b'^FAILED\s'u'^FAILED\s'b'E   'u'E   'b'# No JUnit failures and no e2e-job.log present.'u'# No JUnit failures and no e2e-job.log present.'u'guff.LoquiLex.scripts.parse_junit_failures'u'LoquiLex.scripts.parse_junit_failures'u'scripts.parse_junit_failures'u'parse_junit_failures'Helpers to enforce filesystem path safety constraints.SequenceRaised when a path violates configured safety constraints.Utility for constraining filesystem operations to approved roots.[^A-Za-z0-9_-]+_DEFAULT_ALLOWED_PATTERNallowed_rootsdefault_rootallowed_roots must contain at least one entrystrictresolved_roots_allowed_roots_default_rootdefault_resolved_is_within_rootsdefault_root must reside within allowed_rootsReturn the tuple of allowed root paths.ensure_dircandidateallow_relativemust_existReturn a safe directory path subject to guard constraints._normaliseis_dir is not a directorydirectory does not exist: ensure_filebase_dirsuffixcreate_parentsallow_fallbackReturn a safe file path resolved against ``base_dir``.

        Args:
            base_dir: Directory the file must be located beneath.
            name: Untrusted file stem that will be sanitised.
            suffix: Optional file suffix (".json", ".txt", ...).
            create_parents: Whether to create parent directories on demand.
            must_exist: Require the file to already exist.
            allow_fallback: Allow sanitisation to substitute a default stem when
                the input collapses to an empty value.
        base_pathdefault_valuesanitise_componentsafe_stemfile name empty after sanitisationfile escapes allowed roots: file does not exist: resolve_relativefragmentResolve ``fragment`` as a child of ``base_dir`` while enforcing constraints.path escapes allowed roots: is_absoluteresolvedrelative paths are not permittedpath not permitted: 
        Returns True if candidate is fully contained in one of the allowed roots, 
        following both normalisation and symlink resolution as far as possible.
        candidate_resolvedabsoluterelative_toreplacementmax_lengthReturn a safe filesystem component derived from ``name``.

        The sanitiser keeps alphanumeric characters along with ``-`` and ``_``.
        Any other characters are collapsed into the ``replacement`` token. An
        empty result falls back to ``default``.
        replacement must be a non-empty stringsubescape+# Try to resolve symlinks and ensure canonical path, fail if not all components exist# If the path doesn't fully exist (e.g., being created), fall back to absolute pathb'Helpers to enforce filesystem path safety constraints.'u'Helpers to enforce filesystem path safety constraints.'b'Raised when a path violates configured safety constraints.'u'Raised when a path violates configured safety constraints.'b'Utility for constraining filesystem operations to approved roots.'u'Utility for constraining filesystem operations to approved roots.'b'[^A-Za-z0-9_-]+'u'[^A-Za-z0-9_-]+'b'allowed_roots must contain at least one entry'u'allowed_roots must contain at least one entry'b'default_root must reside within allowed_roots'u'default_root must reside within allowed_roots'b'Return the tuple of allowed root paths.'u'Return the tuple of allowed root paths.'b'Return a safe directory path subject to guard constraints.'u'Return a safe directory path subject to guard constraints.'b' is not a directory'u' is not a directory'b'directory does not exist: 'u'directory does not exist: 'b'Return a safe file path resolved against ``base_dir``.

        Args:
            base_dir: Directory the file must be located beneath.
            name: Untrusted file stem that will be sanitised.
            suffix: Optional file suffix (".json", ".txt", ...).
            create_parents: Whether to create parent directories on demand.
            must_exist: Require the file to already exist.
            allow_fallback: Allow sanitisation to substitute a default stem when
                the input collapses to an empty value.
        'u'Return a safe file path resolved against ``base_dir``.

        Args:
            base_dir: Directory the file must be located beneath.
            name: Untrusted file stem that will be sanitised.
            suffix: Optional file suffix (".json", ".txt", ...).
            create_parents: Whether to create parent directories on demand.
            must_exist: Require the file to already exist.
            allow_fallback: Allow sanitisation to substitute a default stem when
                the input collapses to an empty value.
        'b'item'u'item'b'file name empty after sanitisation'u'file name empty after sanitisation'b'file escapes allowed roots: 'u'file escapes allowed roots: 'b'file does not exist: 'u'file does not exist: 'b'Resolve ``fragment`` as a child of ``base_dir`` while enforcing constraints.'u'Resolve ``fragment`` as a child of ``base_dir`` while enforcing constraints.'b'path escapes allowed roots: 'u'path escapes allowed roots: 'b'relative paths are not permitted'u'relative paths are not permitted'b'path not permitted: 'u'path not permitted: 'b'
        Returns True if candidate is fully contained in one of the allowed roots, 
        following both normalisation and symlink resolution as far as possible.
        'u'
        Returns True if candidate is fully contained in one of the allowed roots, 
        following both normalisation and symlink resolution as far as possible.
        'b'_'u'_'b'Return a safe filesystem component derived from ``name``.

        The sanitiser keeps alphanumeric characters along with ``-`` and ``_``.
        Any other characters are collapsed into the ``replacement`` token. An
        empty result falls back to ``default``.
        'u'Return a safe filesystem component derived from ``name``.

        The sanitiser keeps alphanumeric characters along with ``-`` and ``_``.
        Any other characters are collapsed into the ``replacement`` token. An
        empty result falls back to ``default``.
        'b'replacement must be a non-empty string'u'replacement must be a non-empty string'b'+'u'+'u'LoquiLex.loquilex.security.path_guard'u'loquilex.security.path_guard'u'security.path_guard'u'path_guard'Path utilities for configurable storage locations._DEFAULT_OUT_DIRReturn the configured output directory path.

    Prefers `LX_OUT_DIR` and falls back to legacy `LLX_OUT_DIR` before using the
    project default. The returned path expands `~` for user convenience but does
    not resolve symlinks so callers can decide how aggressively to normalise.
    LLX_OUT_DIRconfigured# Default output directory relative to project root when no environment override existsb'Path utilities for configurable storage locations.'u'Path utilities for configurable storage locations.'b'Return the configured output directory path.

    Prefers `LX_OUT_DIR` and falls back to legacy `LLX_OUT_DIR` before using the
    project default. The returned path expands `~` for user convenience but does
    not resolve symlinks so callers can decide how aggressively to normalise.
    'u'Return the configured output directory path.

    Prefers `LX_OUT_DIR` and falls back to legacy `LLX_OUT_DIR` before using the
    project default. The returned path expands `~` for user convenience but does
    not resolve symlinks so callers can decide how aggressively to normalise.
    'b'LLX_OUT_DIR'u'LLX_OUT_DIR'b'resolve_out_dir'u'resolve_out_dir'u'LoquiLex.loquilex.config.paths'u'loquilex.config.paths'u'config.paths'u'paths'ensure_out_pathReturn a path guaranteed to be within root (creating parents).

    If p is absolute and outside root, raise ValueError. Otherwise, join to root.
    root_pp_inpath  escapes output root b'Return a path guaranteed to be within root (creating parents).

    If p is absolute and outside root, raise ValueError. Otherwise, join to root.
    'u'Return a path guaranteed to be within root (creating parents).

    If p is absolute and outside root, raise ValueError. Otherwise, join to root.
    'b'path 'u'path 'b' escapes output root 'u' escapes output root 'u'LoquiLex.loquilex.output.paths'u'LoquiLex.loquilex.output'u'loquilex.output.paths'u'loquilex.output'u'output.paths'u'output'MT core protocols and interfaces.ProtocolTypedDictruntime_checkableProvider capability metadata.Tokenizer abstraction for different model families.Encode text for source language.Get target language prefix tokens.Decode tokens to text, handling language prefixes.Machine translation provider interface.Translate sequence of text chunks, yielding final translations.Get provider capabilities metadata.# "nllb" | "m2m" | "custom"# e.g., "nllb-200-d600M"# ["cpu","cuda"]# ["int8","int8_float16","float16","float32"]b'MT core protocols and interfaces.'u'MT core protocols and interfaces.'b'Provider capability metadata.'u'Provider capability metadata.'b'Tokenizer abstraction for different model families.'u'Tokenizer abstraction for different model families.'b'Encode text for source language.'u'Encode text for source language.'b'Get target language prefix tokens.'u'Get target language prefix tokens.'b'Decode tokens to text, handling language prefixes.'u'Decode tokens to text, handling language prefixes.'b'Machine translation provider interface.'u'Machine translation provider interface.'b'Translate sequence of text chunks, yielding final translations.'u'Translate sequence of text chunks, yielding final translations.'b'Get provider capabilities metadata.'u'Get provider capabilities metadata.'u'loquilex.mt.core.protocol'u'mt.core.protocol'u'core.protocol'u'protocol'/usr/lib/python3.12/reSensitive data redaction for structured logging.PatternUnionRedact sensitive information from log data.custom_patternsInitialize redactor with standard and custom patterns.

        Args:
            custom_patterns: Additional regex patterns to redact
        ([A-Za-z]:\\|/)[^/\\\s]*[/\\]([^/\\\s]+\.(py|json|yaml|yml|txt|log|bin|ckpt|pt|pth|safetensors))(/.+/)?(\.cache|models|checkpoints)/[^\s]+(token|key|secret|password|api_key|credential)["\']?\s*[=:]\s*["\']?[a-zA-Z0-9_-]{8,}["\']?r'IGNORECASE/home/[^/\s]+/Users/[^/\s]+C:\\Users\\[^\\s]+passwordsecretauthcredentialuser_datapersonal_infophoneaccess_tokenrefresh_tokenauth_tokensensitive_fieldsredact_stringRedact sensitive information from a string.

        Args:
            text: Input text to redact

        Returns:
            Redacted text with sensitive data replaced
        [REDACTED]/\2[REDACTED]redact_pathRedact file paths while preserving filename.

        Args:
            path: File path to redact

        Returns:
            Redacted path with directory structure hidden
        path_strpath_obj[REDACTED]/redact_dictRecursively redact sensitive data from dictionary.

        Args:
            data: Dictionary to redact

        Returns:
            Dictionary with sensitive data redacted
        add_patternAdd custom redaction pattern.

        Args:
            pattern: Regex pattern (string or compiled) to add
        add_sensitive_fieldfield_nameAdd field name to redact entirely.

        Args:
            field_name: Field name to redact (case-insensitive)
        # Standard sensitive data patterns# File paths (keep only filename) - improved to handle Windows paths# Model paths and cache directories# Tokens and API keys (common patterns)# User home directories# Sensitive field names to redact entirely# Keep certain parts (like filenames)# Keep only filename and indicate it was redacted# Check if field name itself is sensitive# Recursively process nested datab'Sensitive data redaction for structured logging.'u'Sensitive data redaction for structured logging.'b'Redact sensitive information from log data.'u'Redact sensitive information from log data.'b'Initialize redactor with standard and custom patterns.

        Args:
            custom_patterns: Additional regex patterns to redact
        'u'Initialize redactor with standard and custom patterns.

        Args:
            custom_patterns: Additional regex patterns to redact
        'b'([A-Za-z]:\\|/)[^/\\\s]*[/\\]([^/\\\s]+\.(py|json|yaml|yml|txt|log|bin|ckpt|pt|pth|safetensors))'u'([A-Za-z]:\\|/)[^/\\\s]*[/\\]([^/\\\s]+\.(py|json|yaml|yml|txt|log|bin|ckpt|pt|pth|safetensors))'b'(/.+/)?(\.cache|models|checkpoints)/[^\s]+'u'(/.+/)?(\.cache|models|checkpoints)/[^\s]+'b'(token|key|secret|password|api_key|credential)["\']?\s*[=:]\s*["\']?[a-zA-Z0-9_-]{8,}["\']?'u'(token|key|secret|password|api_key|credential)["\']?\s*[=:]\s*["\']?[a-zA-Z0-9_-]{8,}["\']?'b'/home/[^/\s]+'u'/home/[^/\s]+'b'/Users/[^/\s]+'u'/Users/[^/\s]+'b'C:\\Users\\[^\\s]+'u'C:\\Users\\[^\\s]+'b'password'u'password'b'token'u'token'b'secret'u'secret'b'key'u'key'b'auth'u'auth'b'credential'u'credential'b'user_data'u'user_data'b'personal_info'u'personal_info'b'email'u'email'b'phone'u'phone'b'address'u'address'b'api_key'u'api_key'b'access_token'u'access_token'b'refresh_token'u'refresh_token'b'auth_token'u'auth_token'b'Redact sensitive information from a string.

        Args:
            text: Input text to redact

        Returns:
            Redacted text with sensitive data replaced
        'u'Redact sensitive information from a string.

        Args:
            text: Input text to redact

        Returns:
            Redacted text with sensitive data replaced
        'b'[REDACTED]/\2'u'[REDACTED]/\2'b'[REDACTED]'u'[REDACTED]'b'Redact file paths while preserving filename.

        Args:
            path: File path to redact

        Returns:
            Redacted path with directory structure hidden
        'u'Redact file paths while preserving filename.

        Args:
            path: File path to redact

        Returns:
            Redacted path with directory structure hidden
        'b'[REDACTED]/'u'[REDACTED]/'b'Recursively redact sensitive data from dictionary.

        Args:
            data: Dictionary to redact

        Returns:
            Dictionary with sensitive data redacted
        'u'Recursively redact sensitive data from dictionary.

        Args:
            data: Dictionary to redact

        Returns:
            Dictionary with sensitive data redacted
        'b'Add custom redaction pattern.

        Args:
            pattern: Regex pattern (string or compiled) to add
        'u'Add custom redaction pattern.

        Args:
            pattern: Regex pattern (string or compiled) to add
        'b'Add field name to redact entirely.

        Args:
            field_name: Field name to redact (case-insensitive)
        'u'Add field name to redact entirely.

        Args:
            field_name: Field name to redact (case-insensitive)
        'u'LoquiLex.loquilex.logging.redaction'u'loquilex.logging.redaction'u'logging.redaction'u'redaction'MT provider registry for factory pattern.ProviderFactory_registryfactoryRegister a provider factory by name.Get list of available provider names.Create provider instance by name.Unknown MT provider: b'MT provider registry for factory pattern.'u'MT provider registry for factory pattern.'b'Register a provider factory by name.'u'Register a provider factory by name.'b'Get list of available provider names.'u'Get list of available provider names.'b'Create provider instance by name.'u'Create provider instance by name.'b'Unknown MT provider: 'u'Unknown MT provider: 'u'loquilex.mt.core.registry'u'mt.core.registry'u'core.registry'u'registry'ffmpeg_resample_wav_to_16k_monoin_pathffmpeg not availableNamedTemporaryFile.f32deletecheck_callfromfilelinear_resamplesr_insr_outlinspacenumendpointt2interpb'ffmpeg not available'u'ffmpeg not available'b'.f32'u'.f32'b'16000'u'16000'u'LoquiLex.loquilex.audio.resample'u'loquilex.audio.resample'u'audio.resample'u'resample'asynciofastapiFastAPIHTTPExceptionWebSocketWebSocketDisconnectRequestResponsefastapi.middleware.corsCORSMiddlewarefastapi.responsesFileResponseJSONResponsefastapi.staticfilesStaticFilespydanticBaseModelFieldmodel_validatormodel_discoveryloquilex.hardware.detectionloquilex.config.model_defaultsloquilex.securitysupervisorSessionConfigSessionManagerStreamingSessionLoquiLex control-plane API (FastAPI) with WebSocket events.

Endpoints:
- GET /models/asr -> local ASR models discovered (faster-whisper CT2 dirs or names if cached)
- GET /models/mt  -> local MT models discovered in HF cache
- GET /languages/mt/{model_id} -> supported target languages
- POST /models/download -> trigger HF snapshot download, progress via WS on channel "_download"
- POST /sessions -> create a new session; returns {session_id}
- DELETE /sessions/{sid} -> stop session
- WS /events/{sid} -> multiplexed event stream for a session id (JSON messages)

All new code intentionally lives under loquilex/api/.
LLX_ALLOWED_ORIGINShttp://localhost:5173,http://127.0.0.1:5173,ALLOWED_ORIGINSLX_API_PORT8000API_PORTLX_UI_PORT5173UI_PORTLX_WS_PATH/wsWS_PATHLX_WS_ALLOW_EVENTS_ALIASALLOW_EVENTS_ALIASLX_DEVDEV_MODE_events_alias_warnedLoquiLex APIappexception_handlerunhandled_exception_handlerrequestexcUnhandled exception on %s: %s?Internal Server Errordetail_ADMIN_TOKEN_hw_snapshot_cache_hw_snapshot_cache_tsmiddlewarehttpsecurity_headerscall_nextresponsedefault-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' blob:; font-src 'self'; connect-src 'self' ws: http://127.0.0.1:* http://localhost:*; object-src 'none'; frame-ancestors 'none'; base-uri 'self'"default-src 'self'; ""script-src 'self'; ""style-src 'self' 'unsafe-inline'; ""img-src 'self' blob:; ""font-src 'self'; ""connect-src 'self' ws: http://127.0.0.1:* http://localhost:*; ""object-src 'none'; ""frame-ancestors 'none'; ""base-uri 'self'"cspdefault-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' blob:; font-src 'self'; connect-src 'self' ws://127.0.0.1:*; object-src 'none'; frame-ancestors 'none'; base-uri 'self'"style-src 'self'; ""connect-src 'self' ws://127.0.0.1:*; "Content-Security-Policymicrophone=(self)Permissions-Policyno-referrerReferrer-PolicynosniffX-Content-Type-Optionsadd_middlewareallow_originsallow_credentialsallow_methodsallow_headersOUT_ROOTui/app/distUI_DIST_PATH_safe_session_dirsidfullmatch[A-Za-z0-9_-]{6,64}400bad sidSTORAGE_GUARDinvalid pathmount/outMANAGERLX_ALLOWED_STORAGE_ROOTS_env_allowed_roots/tmp_EXTRA_ALLOWED_ROOTSALLOWED_STORAGE_ROOTSCreateSessionReqCreate session request model.

     Contract: /docs/contracts/session-management.md
    vadbeamsstreaming_modebeforemode_validate_mtmt_model_id is required when mt_enabled=TrueCreateSessionRespDownloadReqModel download request.

     Contract: /docs/contracts/downloads-api.md
    repo_idasr|mt|otherDownloadCancelRespcancelledSelfTestReqDevice self-test request.

     Contract: /docs/contracts/device-testing.md
    1.5SelfTestRespokasr_load_msrms_avgeffective_asr_modeleffective_deviceeffective_computeStorageInfoRespStorage information response model.total_bytesfree_bytesused_bytespercent_usedBaseDirectoryReqBase directory selection request.BaseDirectoryRespBase directory selection response.validloquilex/ui/profilesPROFILES_DIRPROFILES_ROOTPROFILES_GUARD_profile_pathfor_write.jsondoes not exist404not foundinvalid profile name/sessions/{sid}/storage/statsget_session_storage_statsGet session storage statistics._sessionssession not found503session storage not availablesession does not support storage/sessions/{sid}/storage/commitsget_session_commitslimitcommit_typesince_timestampGet session commits with optional filtering._session_storageget_commitscommitstotal_returned/storage/infoget_storage_infoGet storage information for a given path or current output directory.target_pathCannot access pathdisk_usagefreeaccessW_OK/hardware/snapshothardware_snapshotReturn a cached hardware snapshot or compute a new one.snaphardware snapshot failed: %serror: snapshot failedadmin_cache_clearClear in-process caches (hardware snapshot for now).

    Requires Authorization: Bearer <token> matching LX_ADMIN_TOKEN or _ADMIN_TOKEN.
    authorizationprovided403forbiddenprior_presentclearedprior_cache_present/storage/base-directoryset_base_directoryreqSet and validate a new base directory for storage.relative pathsPath must be absoluteInvalid path: Directory is not writableWarning: Only  MB free space availableDirectory is valid and writable/profilesget_profilesis_file*.json/profiles/{name}get_profile_jsonsave_profilewith_suffix.json.tmptmp_pathensure_asciidelete_profile/models/asrget_asr_models/models/mtget_mt_models/languages/mt/{model_id}get_mt_langs/healthzhealthzHealth endpoint for Electron readiness check./api/healthapi_healthheadapi_health_head/settings/defaultsget_model_defaultsmgr_ModelDefaultsUpdatepost_model_defaultsmodel_dumpupdated/models/downloadpost_downloadjob_idstart_download_jobstarted/models/download/{job_id}response_modeldelete_downloadcancel_download/sessionscreate_sessioncfgstart_sessionGPU busy409requested_device/sessions/selftestpost_selftestvuperf_counterasr_msASR load failed: emalevelsstop_fncb3.0mic failed: mean0.00011e-4_ASRno mic signal detected/sessions/{sid}stop_sessionstopped/sessions/{sid}/pausepause_sessionpause/sessions/{sid}/resumeresume_sessionresume/sessions/{sid}/finalizefinalize_session/sessions/{sid}/metricsget_session_metricsGet performance metrics for a streaming session.get_metricsmetrics not availablemetrics errormetrics not available for non-streaming session/sessions/{sid}/asr/snapshotget_asr_snapshotGet ASR snapshot for reconnect scenarios (streaming sessions only).ASR snapshot not availablesnapshot not available for non-streaming session/sessions/{sid}/snapshotasr_snapshotmt_statusget_mt_statussession_storage_snapshotget_session_snapshot_audio_threadis_aliverunningpollbase_snapshotsession_storagewebsocket/{sid}ws_eventswsorigin4403urllib.parseurlparseonetlocacceptregister_wsreceive_texthandle_ws_messageWebSocket message handling error: unregister_ws/events/events/{sid}ws_events_aliasDeprecated alias for backwards compatibility in dev only.

        Logs a one-time deprecation warning and otherwise behaves like the canonical handler.
        Deprecated: '/events' alias is enabled via LX_WS_ALLOW_EVENTS_ALIAS=1; set LX_WS_PATH to '/ws' and update clients to use VITE_WS_PATHassetsassets_dir/assetsroot_indexindex.htmlindex_pathtext/htmlmedia_typeNot found/{full_path:path}spa_fallbackfull_pathServe SPA index.html for all unknown routes (client-side routing).api/ws/assets/uvicornportloquilex.api.server:app0.0.0.0reload# Allow localhost and 127.0.0.1 by default for dev. Can be overridden via LLX_ALLOWED_ORIGINS.# Environment variables for server configuration# Optional dev-only alias to accept legacy /events path when explicitly allowed.# One-time flag for /events alias deprecation logging# Global safety net: log exceptions, return generic 500 without internals# Admin token and simple in-process caches (overridable in tests)# CSP and security headers# Production: strict CSP, no 'unsafe-inline'# Enable CORS only in explicit dev mode to allow Vite HMR during development# Serve outputs directory for easy linking from UI (hardened)# UI static files path (mounted later to avoid shadowing API routes)# Global manager instance# Allowed storage roots for path-based operations# Treat missing or empty as default '/tmp'# Enable new streaming ASR pipeline# Validate MT settings: require model id only when enabled# Mirror field default: treat missing as disabled to ease minimal payloads# (Mounted above)# Simple profiles CRUD on disk under loquilex/ui/profiles# Get disk usage statistics# Check if writable# Check disk space (warn if less than 1GB free)# 1GB# Minimal API health endpoint used by external checks and tests# Model defaults management# Use the manager's background downloader so progress can be broadcast on WS channel "_download"# Minimal self-test: try to import WhisperEngine and warm up; capture a short mic window and compute RMS# Effective runtime details# Try to get ASR snapshot if session has streaming ASR# ASR snapshot is optional# Try to get MT status if session supports it# MT status is optional# Get session storage snapshot if available# Session storage is optional# Determine status correctly for both regular and streaming sessions# Streaming session - check audio thread# Regular session - check subprocess# In prod, require same-origin or allow missing Origin (e.g., native/Electron)# Accept only if origin scheme+host matches ws host# Receive and process messages through the protocol manager# Brief pause before retry# Optional legacy alias for /events to ease dev migration. Only mounted when explicitly enabled.# Serve built assets under /assets if UI is present# Root index route when UI is present# SPA fallback route - must be last to catch all unmatched routes# Guardrails: do not intercept API, WS, or asset paths# Fallback to 404 if no UI is built# Entry point for `python -m loquilex.api.server`b'LoquiLex control-plane API (FastAPI) with WebSocket events.

Endpoints:
- GET /models/asr -> local ASR models discovered (faster-whisper CT2 dirs or names if cached)
- GET /models/mt  -> local MT models discovered in HF cache
- GET /languages/mt/{model_id} -> supported target languages
- POST /models/download -> trigger HF snapshot download, progress via WS on channel "_download"
- POST /sessions -> create a new session; returns {session_id}
- DELETE /sessions/{sid} -> stop session
- WS /events/{sid} -> multiplexed event stream for a session id (JSON messages)

All new code intentionally lives under loquilex/api/.
'u'LoquiLex control-plane API (FastAPI) with WebSocket events.

Endpoints:
- GET /models/asr -> local ASR models discovered (faster-whisper CT2 dirs or names if cached)
- GET /models/mt  -> local MT models discovered in HF cache
- GET /languages/mt/{model_id} -> supported target languages
- POST /models/download -> trigger HF snapshot download, progress via WS on channel "_download"
- POST /sessions -> create a new session; returns {session_id}
- DELETE /sessions/{sid} -> stop session
- WS /events/{sid} -> multiplexed event stream for a session id (JSON messages)

All new code intentionally lives under loquilex/api/.
'b'LLX_ALLOWED_ORIGINS'u'LLX_ALLOWED_ORIGINS'b'http://localhost:5173,http://127.0.0.1:5173'u'http://localhost:5173,http://127.0.0.1:5173'b','u','b'LX_API_PORT'u'LX_API_PORT'b'8000'u'8000'b'LX_UI_PORT'u'LX_UI_PORT'b'5173'u'5173'b'LX_WS_PATH'u'LX_WS_PATH'b'/ws'u'/ws'b'LX_WS_ALLOW_EVENTS_ALIAS'u'LX_WS_ALLOW_EVENTS_ALIAS'b'0'u'0'b'LX_DEV'u'LX_DEV'b'LoquiLex API'u'LoquiLex API'b'Unhandled exception on %s: %s'u'Unhandled exception on %s: %s'b'?'u'?'b'Internal Server Error'u'Internal Server Error'b'detail'u'detail'b'http'u'http'b'default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' blob:; font-src 'self'; connect-src 'self' ws: http://127.0.0.1:* http://localhost:*; object-src 'none'; frame-ancestors 'none'; base-uri 'self''u'default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' blob:; font-src 'self'; connect-src 'self' ws: http://127.0.0.1:* http://localhost:*; object-src 'none'; frame-ancestors 'none'; base-uri 'self''b'default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' blob:; font-src 'self'; connect-src 'self' ws://127.0.0.1:*; object-src 'none'; frame-ancestors 'none'; base-uri 'self''u'default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' blob:; font-src 'self'; connect-src 'self' ws://127.0.0.1:*; object-src 'none'; frame-ancestors 'none'; base-uri 'self''b'Content-Security-Policy'u'Content-Security-Policy'b'microphone=(self)'u'microphone=(self)'b'Permissions-Policy'u'Permissions-Policy'b'no-referrer'u'no-referrer'b'Referrer-Policy'u'Referrer-Policy'b'nosniff'u'nosniff'b'X-Content-Type-Options'u'X-Content-Type-Options'b'ui/app/dist'u'ui/app/dist'b'[A-Za-z0-9_-]{6,64}'u'[A-Za-z0-9_-]{6,64}'b'bad sid'u'bad sid'b'invalid path'u'invalid path'b'/out'u'/out'b'out'u'out'b'LX_ALLOWED_STORAGE_ROOTS'u'LX_ALLOWED_STORAGE_ROOTS'b'/tmp'u'/tmp'b':'u':'u'Create session request model.

     Contract: /docs/contracts/session-management.md
    'b'before'u'before'b'mt_model_id'u'mt_model_id'b'mt_model_id is required when mt_enabled=True'u'mt_model_id is required when mt_enabled=True'u'Model download request.

     Contract: /docs/contracts/downloads-api.md
    'b'asr|mt|other'u'asr|mt|other'u'Device self-test request.

     Contract: /docs/contracts/device-testing.md
    'b'Storage information response model.'u'Storage information response model.'b'Base directory selection request.'u'Base directory selection request.'b'Base directory selection response.'u'Base directory selection response.'b'loquilex/ui/profiles'u'loquilex/ui/profiles'b'.json'u'.json'b'does not exist'u'does not exist'b'not found'u'not found'b'invalid profile name'u'invalid profile name'b'/sessions/{sid}/storage/stats'u'/sessions/{sid}/storage/stats'b'Get session storage statistics.'u'Get session storage statistics.'b'session not found'u'session not found'b'state'u'state'b'session storage not available'u'session storage not available'b'session does not support storage'u'session does not support storage'b'/sessions/{sid}/storage/commits'u'/sessions/{sid}/storage/commits'b'Get session commits with optional filtering.'u'Get session commits with optional filtering.'b'session_id'u'session_id'b'data'u'data'b'commits'u'commits'b'total_returned'u'total_returned'b'/storage/info'u'/storage/info'b'Get storage information for a given path or current output directory.'u'Get storage information for a given path or current output directory.'b'Cannot access path'u'Cannot access path'b'/hardware/snapshot'u'/hardware/snapshot'b'Return a cached hardware snapshot or compute a new one.'u'Return a cached hardware snapshot or compute a new one.'b'hardware snapshot failed: %s'u'hardware snapshot failed: %s'b'error: 'u'error: 'b'cores_physical'u'cores_physical'b'cores_logical'u'cores_logical'b'frequency_mhz'u'frequency_mhz'b'usage_percent'u'usage_percent'b'meets_threshold'u'meets_threshold'b'snapshot failed'u'snapshot failed'b'warnings'u'warnings'b'memory_total_mb'u'memory_total_mb'b'memory_free_mb'u'memory_free_mb'b'memory_used_mb'u'memory_used_mb'b'temperature_c'u'temperature_c'b'utilization_percent'u'utilization_percent'b'cuda_available'u'cuda_available'b'gpus'u'gpus'b'audio_devices'u'audio_devices'b'memory_total_gb'u'memory_total_gb'b'memory_available_gb'u'memory_available_gb'b'platform_info'u'platform_info'b'overall_status'u'overall_status'b'overall_score'u'overall_score'b'Clear in-process caches (hardware snapshot for now).

    Requires Authorization: Bearer <token> matching LX_ADMIN_TOKEN or _ADMIN_TOKEN.
    'u'Clear in-process caches (hardware snapshot for now).

    Requires Authorization: Bearer <token> matching LX_ADMIN_TOKEN or _ADMIN_TOKEN.
    'b'authorization'u'authorization'b'forbidden'u'forbidden'b'ok'u'ok'b'cleared'u'cleared'b'prior_cache_present'u'prior_cache_present'b'/storage/base-directory'u'/storage/base-directory'b'Set and validate a new base directory for storage.'u'Set and validate a new base directory for storage.'b'relative paths'u'relative paths'b'Path must be absolute'u'Path must be absolute'b'Invalid path: 'u'Invalid path: 'b'Directory is not writable'u'Directory is not writable'b'Warning: Only 'u'Warning: Only 'b' MB free space available'u' MB free space available'b'Directory is valid and writable'u'Directory is valid and writable'b'/profiles'u'/profiles'b'*.json'u'*.json'b'/profiles/{name}'u'/profiles/{name}'b'.json.tmp'u'.json.tmp'b'/models/asr'u'/models/asr'b'/models/mt'u'/models/mt'b'/languages/mt/{model_id}'u'/languages/mt/{model_id}'b'model_id'u'model_id'b'languages'u'languages'b'/healthz'u'/healthz'b'Health endpoint for Electron readiness check.'u'Health endpoint for Electron readiness check.'b'status'u'status'b'/api/health'u'/api/health'b'/settings/defaults'u'/settings/defaults'b'/models/download'u'/models/download'b'job_id'u'job_id'b'started'u'started'b'/models/download/{job_id}'u'/models/download/{job_id}'b'/sessions'u'/sessions'b'session'u'session'b'GPU busy'u'GPU busy'b'requested_device'u'requested_device'b'/sessions/selftest'u'/sessions/selftest'b'ASR load failed: 'u'ASR load failed: 'b'mic failed: 'u'mic failed: 'b'no mic signal detected'u'no mic signal detected'b'device'u'device'b'dtype'u'dtype'b'/sessions/{sid}'u'/sessions/{sid}'b'stopped'u'stopped'b'/sessions/{sid}/pause'u'/sessions/{sid}/pause'b'/sessions/{sid}/resume'u'/sessions/{sid}/resume'b'/sessions/{sid}/finalize'u'/sessions/{sid}/finalize'b'/sessions/{sid}/metrics'u'/sessions/{sid}/metrics'b'Get performance metrics for a streaming session.'u'Get performance metrics for a streaming session.'b'metrics not available'u'metrics not available'b'metrics error'u'metrics error'b'metrics not available for non-streaming session'u'metrics not available for non-streaming session'b'/sessions/{sid}/asr/snapshot'u'/sessions/{sid}/asr/snapshot'b'Get ASR snapshot for reconnect scenarios (streaming sessions only).'u'Get ASR snapshot for reconnect scenarios (streaming sessions only).'b'ASR snapshot not available'u'ASR snapshot not available'b'snapshot not available for non-streaming session'u'snapshot not available for non-streaming session'b'/sessions/{sid}/snapshot'u'/sessions/{sid}/snapshot'b'get_asr_snapshot'u'get_asr_snapshot'b'get_mt_status'u'get_mt_status'b'_audio_thread'u'_audio_thread'b'running'u'running'b'poll'u'poll'b'sid'u'sid'b'cfg'u'cfg'b'mt'b'session_storage'u'session_storage'b'/{sid}'u'/{sid}'b'origin'u'origin'b'host'u'host'b'WebSocket message handling error: 'u'WebSocket message handling error: 'b'/events'u'/events'b'/events/{sid}'u'/events/{sid}'b'Deprecated alias for backwards compatibility in dev only.

        Logs a one-time deprecation warning and otherwise behaves like the canonical handler.
        'u'Deprecated alias for backwards compatibility in dev only.

        Logs a one-time deprecation warning and otherwise behaves like the canonical handler.
        'b'Deprecated: '/events' alias is enabled via LX_WS_ALLOW_EVENTS_ALIAS=1; set LX_WS_PATH to '/ws' and update clients to use VITE_WS_PATH'u'Deprecated: '/events' alias is enabled via LX_WS_ALLOW_EVENTS_ALIAS=1; set LX_WS_PATH to '/ws' and update clients to use VITE_WS_PATH'b'assets'u'assets'b'/assets'u'/assets'b'index.html'u'index.html'b'text/html'u'text/html'b'Not found'u'Not found'b'/{full_path:path}'u'/{full_path:path}'b'Serve SPA index.html for all unknown routes (client-side routing).'u'Serve SPA index.html for all unknown routes (client-side routing).'b'api/'u'api/'b'ws/'u'ws/'b'assets/'u'assets/'b'loquilex.api.server:app'u'loquilex.api.server:app'b'0.0.0.0'u'0.0.0.0'u'LoquiLex.loquilex.api.server'u'loquilex.api.server'u'api.server'u'server'MT service layer for higher-level translation operations.Translation result with metadata.High-level MT service using the new provider architecture.provider_nameInitialize MT service with specified or default provider._provider_name_provider_provider_available_get_providerLazy load the MT provider.available_providersNo MT providers availablefallbackCheck if MT service is available (has working provider).Get the name of the active provider.Translate a single text string.result_textTranslate a sequence of text chunks.Get capabilities of the active provider._default_serviceget_mt_serviceGet the default MT service instance.Legacy function for backward compatibility.# Check if provider is available# Fall back to available providers or raise error# Try to use first available provider# Normalize language codes# Translate using provider# Fall back to echo on any error# Translate chunks using provider# Singleton instance for backward compatibility# Legacy compatibility functionsb'MT service layer for higher-level translation operations.'u'MT service layer for higher-level translation operations.'b'Translation result with metadata.'u'Translation result with metadata.'b'High-level MT service using the new provider architecture.'u'High-level MT service using the new provider architecture.'b'Initialize MT service with specified or default provider.'u'Initialize MT service with specified or default provider.'b'Lazy load the MT provider.'u'Lazy load the MT provider.'b'No MT providers available'u'No MT providers available'b'Check if MT service is available (has working provider).'u'Check if MT service is available (has working provider).'b'Get the name of the active provider.'u'Get the name of the active provider.'b'Translate a single text string.'u'Translate a single text string.'b'Translate a sequence of text chunks.'u'Translate a sequence of text chunks.'b'Get capabilities of the active provider.'u'Get capabilities of the active provider.'b'Get the default MT service instance.'u'Get the default MT service instance.'b'Legacy function for backward compatibility.'u'Legacy function for backward compatibility.'u'LoquiLex.loquilex.mt.service'u'loquilex.mt.service'u'mt.service'u'service'Rolling session storage with capped history for transcripts and events.

This module provides durable, bounded storage for session transcripts and events
with configurable retention policies (count, size, time-based).
SessionCommitSessionStorageStorageConfigA finalized commit stored in session history.transcript__post_init__Calculate size after creation.Configuration for session storage limits.max_commitsmax_size_bytesmax_age_secondsvalidateValidate configuration values.max_commits must be positivemax_size_bytes must be positivemax_age_seconds must be positiveRolling session storage with capped history.

    Features:
    - Stores finalized commits with timestamps and IDs
    - Caps by max entries, size, and age with rotation
    - Thread-safe operations
    - Snapshot API for session rehydration
    config_commits_total_size_bytes_commits_added_commits_dropped_last_cleanup_timeadd_commitAdd a finalized commit to storage with automatic rotation.

        Args:
            commit_type: Type of commit ("transcript", "translation", "status")
            data: Commit data payload
            seq: Sequence number for ordering

        Returns:
            The created commit with assigned ID and timestamp
        _enforce_limitsEnforce storage limits by dropping oldest commits (must hold lock).oldestGet stored commits with optional filtering.

        Args:
            limit: Maximum number of commits to return (most recent first)
            commit_type: Filter by commit type
            since_timestamp: Only return commits after this timestamp

        Returns:
            List of commits matching criteria, most recent first
        Generate snapshot for session rehydration.

        Args:
            max_commits: Maximum number of recent commits to include

        Returns:
            Snapshot data for session restoration
        recent_commitstotal_commitsstorage_statsGet storage statistics.

        Returns:
            Dictionary with current storage metrics
        total_size_bytescommits_addedcommits_droppedoldest_commit_ageClear all stored commits.

        Returns:
            Number of commits that were cleared
        # "transcript", "translation", "status"# For size-based capping# Rough estimate of memory footprint# Max number of commits to store# Max total size (1MB default)# Max age of commits (1 hour default)# Storage for commits (ordered by insertion time)# Thread safety# Metrics# Use the injected time function# Defensive copy# Add the commit# Enforce limits with rotation# Time-based cleanup# Count-based cleanup# Size-based cleanup# Clean up expired commits first# Apply filters# Sort by timestamp (most recent first) then apply limitb'Rolling session storage with capped history for transcripts and events.

This module provides durable, bounded storage for session transcripts and events
with configurable retention policies (count, size, time-based).
'u'Rolling session storage with capped history for transcripts and events.

This module provides durable, bounded storage for session transcripts and events
with configurable retention policies (count, size, time-based).
'b'SessionCommit'u'SessionCommit'b'SessionStorage'u'SessionStorage'b'StorageConfig'u'StorageConfig'b'A finalized commit stored in session history.'u'A finalized commit stored in session history.'b'transcript'u'transcript'b'Calculate size after creation.'u'Calculate size after creation.'b'Configuration for session storage limits.'u'Configuration for session storage limits.'b'Validate configuration values.'u'Validate configuration values.'b'max_commits must be positive'u'max_commits must be positive'b'max_size_bytes must be positive'u'max_size_bytes must be positive'b'max_age_seconds must be positive'u'max_age_seconds must be positive'b'Rolling session storage with capped history.

    Features:
    - Stores finalized commits with timestamps and IDs
    - Caps by max entries, size, and age with rotation
    - Thread-safe operations
    - Snapshot API for session rehydration
    'u'Rolling session storage with capped history.

    Features:
    - Stores finalized commits with timestamps and IDs
    - Caps by max entries, size, and age with rotation
    - Thread-safe operations
    - Snapshot API for session rehydration
    'b'Add a finalized commit to storage with automatic rotation.

        Args:
            commit_type: Type of commit ("transcript", "translation", "status")
            data: Commit data payload
            seq: Sequence number for ordering

        Returns:
            The created commit with assigned ID and timestamp
        'u'Add a finalized commit to storage with automatic rotation.

        Args:
            commit_type: Type of commit ("transcript", "translation", "status")
            data: Commit data payload
            seq: Sequence number for ordering

        Returns:
            The created commit with assigned ID and timestamp
        'b'Enforce storage limits by dropping oldest commits (must hold lock).'u'Enforce storage limits by dropping oldest commits (must hold lock).'b'Get stored commits with optional filtering.

        Args:
            limit: Maximum number of commits to return (most recent first)
            commit_type: Filter by commit type
            since_timestamp: Only return commits after this timestamp

        Returns:
            List of commits matching criteria, most recent first
        'u'Get stored commits with optional filtering.

        Args:
            limit: Maximum number of commits to return (most recent first)
            commit_type: Filter by commit type
            since_timestamp: Only return commits after this timestamp

        Returns:
            List of commits matching criteria, most recent first
        'b'Generate snapshot for session rehydration.

        Args:
            max_commits: Maximum number of recent commits to include

        Returns:
            Snapshot data for session restoration
        'u'Generate snapshot for session rehydration.

        Args:
            max_commits: Maximum number of recent commits to include

        Returns:
            Snapshot data for session restoration
        'b'total_commits'u'total_commits'b'recent_commits'u'recent_commits'b'storage_stats'u'storage_stats'b'Get storage statistics.

        Returns:
            Dictionary with current storage metrics
        'u'Get storage statistics.

        Returns:
            Dictionary with current storage metrics
        'b'total_size_bytes'u'total_size_bytes'b'commits_added'u'commits_added'b'commits_dropped'u'commits_dropped'b'max_commits'u'max_commits'b'max_size_bytes'u'max_size_bytes'b'max_age_seconds'u'max_age_seconds'b'config'b'oldest_commit_age'u'oldest_commit_age'b'Clear all stored commits.

        Returns:
            Number of commits that were cleared
        'u'Clear all stored commits.

        Returns:
            Number of commits that were cleared
        'u'LoquiLex.loquilex.api.session_storage'u'loquilex.api.session_storage'u'api.session_storage'EPS_tssec36000003_600_0006000060_000write_srtcleanlast_end --> 

Append a single SRT cue. If index is None, determine next index from file.

    Returns the index used for this cue.
    next_idxrbSEEK_END8192b"-->blockslasttslinerighthhmmss_mssscue# Determine next index# Find the last complete cue blockb' --> 'u' --> 'b'

'u'

'b'Append a single SRT cue. If index is None, determine next index from file.

    Returns the index used for this cue.
    'u'Append a single SRT cue. If index is None, determine next index from file.

    Returns the index used for this cue.
    'b'rb'u'rb'b'-->'u'-->'u'LoquiLex.loquilex.output.srt'u'loquilex.output.srt'u'output.srt'u'srt'Streaming ASR pipeline using CTranslate2/faster-whisper with rich partial/final events.Word-level timing and confidence information.Segment for snapshot events.Partial transcription event sent during active speech.Final transcription event sent at end-of-utterance.Snapshot event for reconnect scenarios.Enhanced streaming ASR with rich partial/final events using faster-whisper.Initialize streaming ASR engine.faster-whisper not installedint8_float32requested_computezerosaudio_bufferlast_decode_timelast_segment_endlast_segment_end_wall[StreamingASR] Initialized: device= model= compute=Run a tiny inference to load weights and kernels.dummy_audiotemperaturesegments_extract_wordsExtract word-level information from segments.seg_wordsword_objword_textend_timeprobability_detect_eouDetect end-of-utterance based on various heuristics.last_textsilence_thresholdfirst_startmax_segment_durationProcess a chunk of audio and emit partial/final events as needed.max_buffer_samplessegment_list[StreamingASR] Transcription error: final_eventrecent_segmentpartial_eventGet current snapshot for reconnect scenarios.Force finalization of current segment.[StreamingASR] Force finalize error: # word text# start time in seconds# end time in seconds# confidence score 0.0-1.0# partials are always provisional# silence|punctuation|timeout# Initialize whisper model# type: ignore# Prefer int8_float32 on CPU for better quality; fallback to int8# Fallback if build doesn't support int8_float32# Streaming state# Event sequence tracking# Recent finals for snapshots (keep last 10)# ~1s# Exhaust generator quickly# faster-whisper uses .word for text# default confidence# Get the last segment's text for punctuation detection# Check for punctuation-based EOU# Check for silence-based EOU# Check for timeout-based EOU# Append to buffer# Keep buffer bounded# Rate limit decoding# Run transcription# Extract text and words# Generate or reuse segment ID# Update segment end tracking# Check for EOU# Emit final event# Add to recent finals for snapshots# Reset for next segment# Emit partial event (with debouncing)# Try to get current partial state# Live partial is optional# Always reset after force finalizeb'Streaming ASR pipeline using CTranslate2/faster-whisper with rich partial/final events.'u'Streaming ASR pipeline using CTranslate2/faster-whisper with rich partial/final events.'b'Word-level timing and confidence information.'u'Word-level timing and confidence information.'b'Segment for snapshot events.'u'Segment for snapshot events.'b'Partial transcription event sent during active speech.'u'Partial transcription event sent during active speech.'b'Final transcription event sent at end-of-utterance.'u'Final transcription event sent at end-of-utterance.'b'Snapshot event for reconnect scenarios.'u'Snapshot event for reconnect scenarios.'b'Enhanced streaming ASR with rich partial/final events using faster-whisper.'u'Enhanced streaming ASR with rich partial/final events using faster-whisper.'b'Initialize streaming ASR engine.'u'Initialize streaming ASR engine.'b'faster-whisper not installed'u'faster-whisper not installed'b'int8_float32'u'int8_float32'b'[StreamingASR] Initialized: device='u'[StreamingASR] Initialized: device='b' model='u' model='b' compute='u' compute='b'Run a tiny inference to load weights and kernels.'u'Run a tiny inference to load weights and kernels.'b'Extract word-level information from segments.'u'Extract word-level information from segments.'b'probability'u'probability'b'Detect end-of-utterance based on various heuristics.'u'Detect end-of-utterance based on various heuristics.'b'timeout'u'timeout'b'Process a chunk of audio and emit partial/final events as needed.'u'Process a chunk of audio and emit partial/final events as needed.'b'[StreamingASR] Transcription error: 'u'[StreamingASR] Transcription error: 'b'Get current snapshot for reconnect scenarios.'u'Get current snapshot for reconnect scenarios.'b'Force finalization of current segment.'u'Force finalization of current segment.'b'[StreamingASR] Force finalize error: 'u'[StreamingASR] Force finalize error: 'u'LoquiLex.loquilex.asr.stream'u'loquilex.asr.stream'u'asr.stream'u'stream'Structured logging with consistent format and offline safety.TextIOStandard log levels.DEBUGINFOWARNINGERRORCRITICALOffline-safe structured logger with consistent format and redaction.output_fileenable_consoleredactormax_log_size_mbmax_log_filesInitialize structured logger.

        Args:
            component: Component identifier (e.g., 'asr', 'mt', 'supervisor')
            session_id: Optional session ID for correlation
            output_file: Optional file path or handle for log output
            enable_console: Whether to output to console (default: True)
            redactor: Optional data redactor for sensitive information
            max_log_size_mb: Maximum log file size in MB before rotation (None = no limit)
            max_log_files: Maximum number of rotated log files to keep (default: 5)
        max_log_size_byteslog_file_pathconsole_enabled_open_log_file_format_log_entryFormat log entry with consistent structure.safe_contextstrftime%Y-%m-%dT%H:%M:%S.%fgmtimeZiso_timestampsession_timeentryOpen log file for writing._rotate_log_if_neededRotate log file if size limit is exceeded.old_filenew_filerename.1rotated_file_write_logWrite log entry to configured outputs.dumpsseparatorsjson_lineLog debug message.Log info message.Log warning message.Log error message.Log critical message.Close log file handle if open.Factory function to create structured logger with standard configuration.

    Args:
        component: Component identifier
        session_id: Optional session ID for correlation
        log_dir: Optional directory for log files (uses LX_LOG_DIR env var if not provided)
        **kwargs: Additional arguments passed to StructuredLogger

    Returns:
        Configured StructuredLogger instance
    ci_max_sizeci_max_files.jsonl# Log rotation settings# Configure output streams# Store path for rotation# Ensure log directory exists# Apply redaction to context# Close current file# Rotate existing files# Move current log to .1# Reopen current log file# If rotation fails, continue with current file# Check for rotation before writing# Use environment variable for log directory if not provided# CI-specific log retention settings from environment# Default CI limit: 10MB per log file# Default CI limit: keep only 3 rotated filesb'Structured logging with consistent format and offline safety.'u'Structured logging with consistent format and offline safety.'b'Standard log levels.'u'Standard log levels.'b'debug'b'info'u'info'b'Offline-safe structured logger with consistent format and redaction.'u'Offline-safe structured logger with consistent format and redaction.'b'Initialize structured logger.

        Args:
            component: Component identifier (e.g., 'asr', 'mt', 'supervisor')
            session_id: Optional session ID for correlation
            output_file: Optional file path or handle for log output
            enable_console: Whether to output to console (default: True)
            redactor: Optional data redactor for sensitive information
            max_log_size_mb: Maximum log file size in MB before rotation (None = no limit)
            max_log_files: Maximum number of rotated log files to keep (default: 5)
        'u'Initialize structured logger.

        Args:
            component: Component identifier (e.g., 'asr', 'mt', 'supervisor')
            session_id: Optional session ID for correlation
            output_file: Optional file path or handle for log output
            enable_console: Whether to output to console (default: True)
            redactor: Optional data redactor for sensitive information
            max_log_size_mb: Maximum log file size in MB before rotation (None = no limit)
            max_log_files: Maximum number of rotated log files to keep (default: 5)
        'b'Format log entry with consistent structure.'u'Format log entry with consistent structure.'b'%Y-%m-%dT%H:%M:%S.%f'u'%Y-%m-%dT%H:%M:%S.%f'b'Z'u'Z'b'iso_timestamp'u'iso_timestamp'b'level'u'level'b'session_time'u'session_time'b'Open log file for writing.'u'Open log file for writing.'b'Rotate log file if size limit is exceeded.'u'Rotate log file if size limit is exceeded.'b'.1'u'.1'b'Write log entry to configured outputs.'u'Write log entry to configured outputs.'b'Log debug message.'u'Log debug message.'b'Log info message.'u'Log info message.'b'Log warning message.'u'Log warning message.'b'Log error message.'u'Log error message.'b'Log critical message.'u'Log critical message.'b'Close log file handle if open.'u'Close log file handle if open.'b'close'u'close'b'Factory function to create structured logger with standard configuration.

    Args:
        component: Component identifier
        session_id: Optional session ID for correlation
        log_dir: Optional directory for log files (uses LX_LOG_DIR env var if not provided)
        **kwargs: Additional arguments passed to StructuredLogger

    Returns:
        Configured StructuredLogger instance
    'u'Factory function to create structured logger with standard configuration.

    Args:
        component: Component identifier
        session_id: Optional session ID for correlation
        log_dir: Optional directory for log files (uses LX_LOG_DIR env var if not provided)
        **kwargs: Additional arguments passed to StructuredLogger

    Returns:
        Configured StructuredLogger instance
    'b'LX_LOG_DIR'u'LX_LOG_DIR'b'max_log_size_mb'u'max_log_size_mb'b'LX_LOG_MAX_SIZE_MB'u'LX_LOG_MAX_SIZE_MB'b'CI'u'CI'b'max_log_files'u'max_log_files'b'LX_LOG_MAX_FILES'u'LX_LOG_MAX_FILES'b'.jsonl'u'.jsonl'u'LoquiLex.loquilex.logging.structured'u'loquilex.logging.structured'u'logging.structured'u'structured'weakref_session_manager_finalize_stopself_proxyModule-level finalizer that doesn't keep strong refs to self._stopsessionsws_protocolWSProtocolManagerws_typesMessageTypeHeartbeatConfigServerLimitsIn-process streaming session using the new StreamingASR pipeline.run_dir_stop_evtstamperqueue.Queue[str]AbstractEventLoop_event_loopmt_integration__aenter__Support async context manager for automatic cleanup.__aexit__exc_typetbEnsure cleanup when exiting context manager.Destructor to ensure cleanup if not already done._schedule_broadcastSafely schedule a broadcast coroutine from any thread.loopis_closed_invokeiscoroutineget_running_loopcreate_taskcall_soon_threadsafeStart the streaming ASR session.loquilex.asr.aggregatorloquilex.mt.integration[StreamingSession] MT initialization failed: stop_captureon_audio_frame_on_partial_on_final[StreamingSession] Audio processing error: operationalstageReady  start speaking now (streaming mode)log[StreamingSession] Audio worker error: Audio error: stop_capture failed[StreamingSession] Startup error: Handle partial ASR events.emit_event[StreamingSession] Partial event error: Handle final ASR events.[StreamingSession] Final event error: Stop the streaming session.Pause audio processing (placeholder).Resume audio processing (placeholder).[StreamingSession] Force finalize error: Get performance metrics.[StreamingSession] Metrics error: Get ASR snapshot for reconnects.[StreamingSession] Snapshot error: [StreamingSession] MT status error: _reader_thread-mloquilex.cli.live_en_to_zh-1creationflagsntCREATE_NEW_PROCESS_GROUPSTDOUTstart_new_session_readersend_signalCTRL_BREAK_EVENTgetpgidpidpgidkillpgTimeoutExpiredSIGKILLSIGSTOPSIGCONT_ws_bg_threadsLock_downloadsLX_MAX_CUDA_SESSIONS_max_cuda_sessions_stampers_dl_procs_ws_protocolsLX_WS_HB_INTERVAL_MSLX_WS_HB_TIMEOUT_MS30000timeout_ms_default_hb_configLX_WS_MAX_IN_FLIGHTmax_in_flightLX_WS_MAX_MSG_BYTES131072max_msg_bytes_default_limitssession_managersession_startup_time5000.015000.0websocket_message_latencySessionManager initializedmax_cuda_sessionsheartbeat_interval_msheartbeat_timeout_mswebsocket_config_bg_runnerself_ref_log_pumpref_finalizerfinalizeproxyrunning_cudaGPU busy: maximum concgurrent CUDA sessions reachedStarting sessionsession_startup__broadcaststreamingsession_typestartup_time_mssessions_startedactive_sessionsSession started successfullytotal_sessionsinitializingFailed to start sessionsession_start_failuresStopping sessionAttempted to stop non-existent sessionsessions_stoppedSession stopped successfullyRegister WebSocket connection with new envelope protocol.protocol_managerhb_configlimitsset_disconnect_callback_cleanup_ws_protocolset_session_snapshot_callback_get_session_snapshotlstadd_connectionUnregister WebSocket connection.remove_connectionCleanup callback for protocol manager.Get session snapshot data for resume functionality.snapshot_datafinalized_transcript_stampHandle incoming WebSocket message through protocol manager.handle_messageNo protocol manager for session Broadcast message using new envelope protocol._map_legacy_type_to_envelopesend_domain_eventsuccessFlow control prevented sending message to _legacy_broadcastlegacy_typeMap legacy message types to envelope message types.ASR_PARTIALASR_FINALpartial_translationfinal_translationMT_FINALmt_finalSTATUSmappingLegacy broadcast method for backward compatibility.connssend_json_safe_broadcastBest-effort schedule of a broadcast without requiring a running loop.
        Drops silently if no event loop is running (e.g., during shutdown or
        when called from sync/test contexts).
        drained50EN(final):ZH:rmspeakReady  start speaking now_typ_download_worker_download/chandownload_progresspct-cfrom huggingface_hub import snapshot_download; import sys; p = snapshot_download(sys.argv[1], local_dir=None); print(p)"from huggingface_hub import snapshot_download; import sys; ""p = snapshot_download(sys.argv[1], local_dir=None); print(p)"--download_errorheartbeats99hbretdownload_donelocal_pathrc=Shutdown all sessions and cleanup resources.SessionManager shutdown initiatedsession_idsError stopping session protocol_managersError closing protocol manager: download_procsError canceling download Error joining background thread: SessionManager shutdown completedBest-effort, non-async cleanup for tests; no heavy work.# No subprocess for streaming sessions# Add queue for compatibility# Event loop reference for thread-safe asyncio calls# Streaming ASR components# StreamingASR# PartialFinalAggregator# MT integration# MTIntegration# If audio thread is still running, set stop event and attempt join# Also set broadcast function for MT integration# Avoid scheduling onto a closed loop during teardown# Assume open if loop lacks is_closed (e.g., mock in tests)# Capture the broadcast function into a local variable so mypy# understands it's not None inside the nested invoker.# No running loop available; drop# Swallow exceptions during teardown# Event loop may be closing; drop silently# Store event loop reference for thread-safe asyncio calls# Will be set later if needed# Configure ASR environment# Import here to avoid circular imports and to get proper fake during tests# Initialize streaming components# Initialize MT integration if enabled# Warmup ASR# Start audio processing thread# Import audio capture# Start audio capture# Broadcast ready status using safe scheduling# Keep thread alive until stopped# Guarantee audio capture cleanup# Early-out if core pieces aren't ready# Trigger MT translation for final ASR events# Schedule translation in event loop# Could implement by pausing audio capture# Could implement by resuming audio capture# required (no defaults)# optional (with defaults)  MUST come after all required fields# New streaming mode flag# Require mt_model_id only when MT is enabled# Stop subprocess if still running# Join reader thread# Windows: create new process group to enable CTRL_BREAK_EVENT# POSIX: rely on start_new_session=True for killpg compatibility# Send SIGSTOP to process group to pause audio ingest and decoding# Holds both types; narrow at call sites.# New WebSocket protocol managers# Default WebSocket configuration# Initialize structured logging and metrics# Register finalizer to ensure best-effort stop on GC# Declare attribute as Optional[Any] so assigning None is compatible# with static type checkers when finalizer registration fails.# Choose session type based on streaming_mode flag# No running loop in this context; best-effort skip# Get or create protocol manager for this session# Also maintain legacy WebSocket list for compatibility# Add connection to protocol manager (sends welcome)# Remove from legacy list# Remove from protocol manager# Also drop legacy list to avoid leaks when unregister isn't called# Only StreamingSession supports snapshots currently# Get ASR snapshot# Extract finalized transcript and active partials# Get MT status# Convert legacy payload to new envelope format# Fallback to legacy broadcast for compatibility# Multilingual support# Download management# Initial progress# Launch downloader subprocess# Heartbeat thread emitting progress# Read output and wait# Final status# Stop flag to halt background threads# Stop all active sessions# Close all WebSocket protocol managers# Cancel all download processes# Wait for background threads to finishb'Module-level finalizer that doesn't keep strong refs to self.'u'Module-level finalizer that doesn't keep strong refs to self.'b'_stop'u'_stop'b'_sessions'u'_sessions'b'stop'u'stop'b'In-process streaming session using the new StreamingASR pipeline.'u'In-process streaming session using the new StreamingASR pipeline.'b'queue.Queue[str]'u'queue.Queue[str]'b'Support async context manager for automatic cleanup.'u'Support async context manager for automatic cleanup.'b'Ensure cleanup when exiting context manager.'u'Ensure cleanup when exiting context manager.'b'Destructor to ensure cleanup if not already done.'u'Destructor to ensure cleanup if not already done.'b'Safely schedule a broadcast coroutine from any thread.'u'Safely schedule a broadcast coroutine from any thread.'b'is_closed'u'is_closed'b'Start the streaming ASR session.'u'Start the streaming ASR session.'b'[StreamingSession] MT initialization failed: 'u'[StreamingSession] MT initialization failed: 'b'[StreamingSession] Audio processing error: 'u'[StreamingSession] Audio processing error: 'b'operational'u'operational'b'stage'u'stage'u'Ready  start speaking now (streaming mode)'b'log'u'log'b'[StreamingSession] Audio worker error: 'u'[StreamingSession] Audio worker error: 'b'Audio error: 'u'Audio error: 'b'stop_capture failed'u'stop_capture failed'b'[StreamingSession] Startup error: 'u'[StreamingSession] Startup error: 'b'Handle partial ASR events.'u'Handle partial ASR events.'b'[StreamingSession] Partial event error: 'u'[StreamingSession] Partial event error: 'b'Handle final ASR events.'u'Handle final ASR events.'b'[StreamingSession] Final event error: 'u'[StreamingSession] Final event error: 'b'Stop the streaming session.'u'Stop the streaming session.'b'Pause audio processing (placeholder).'u'Pause audio processing (placeholder).'b'Resume audio processing (placeholder).'u'Resume audio processing (placeholder).'b'[StreamingSession] Force finalize error: 'u'[StreamingSession] Force finalize error: 'b'Get performance metrics.'u'Get performance metrics.'b'[StreamingSession] Metrics error: 'u'[StreamingSession] Metrics error: 'b'Get ASR snapshot for reconnects.'u'Get ASR snapshot for reconnects.'b'[StreamingSession] Snapshot error: 'u'[StreamingSession] Snapshot error: 'b'[StreamingSession] MT status error: 'u'[StreamingSession] MT status error: 'b'-m'u'-m'b'loquilex.cli.live_en_to_zh'b'-1'u'-1'b'nt'u'nt'b'CREATE_NEW_PROCESS_GROUP'u'CREATE_NEW_PROCESS_GROUP'b'CTRL_BREAK_EVENT'u'CTRL_BREAK_EVENT'b'LX_MAX_CUDA_SESSIONS'u'LX_MAX_CUDA_SESSIONS'b'LX_WS_HB_INTERVAL_MS'u'LX_WS_HB_INTERVAL_MS'b'10000'u'10000'b'LX_WS_HB_TIMEOUT_MS'u'LX_WS_HB_TIMEOUT_MS'b'30000'u'30000'b'LX_WS_MAX_IN_FLIGHT'u'LX_WS_MAX_IN_FLIGHT'b'64'u'64'b'LX_WS_MAX_MSG_BYTES'u'LX_WS_MAX_MSG_BYTES'b'131072'u'131072'b'session_manager'u'session_manager'b'supervisor'u'supervisor'b'session_startup_time'u'session_startup_time'b'websocket_message_latency'u'websocket_message_latency'b'SessionManager initialized'u'SessionManager initialized'b'heartbeat_interval_ms'u'heartbeat_interval_ms'b'heartbeat_timeout_ms'u'heartbeat_timeout_ms'b'max_in_flight'u'max_in_flight'b'max_msg_bytes'u'max_msg_bytes'b'GPU busy: maximum concgurrent CUDA sessions reached'u'GPU busy: maximum concgurrent CUDA sessions reached'b'Starting session'u'Starting session'b'session_startup_'u'session_startup_'b'streaming'u'streaming'b'subprocess'u'subprocess'b'sessions_started'u'sessions_started'b'active_sessions'u'active_sessions'b'Session started successfully'u'Session started successfully'b'initializing'u'initializing'b'Failed to start session'u'Failed to start session'b'session_start_failures'u'session_start_failures'b'Stopping session'u'Stopping session'b'Attempted to stop non-existent session'u'Attempted to stop non-existent session'b'sessions_stopped'u'sessions_stopped'b'Session stopped successfully'u'Session stopped successfully'b'Register WebSocket connection with new envelope protocol.'u'Register WebSocket connection with new envelope protocol.'b'Unregister WebSocket connection.'u'Unregister WebSocket connection.'b'Cleanup callback for protocol manager.'u'Cleanup callback for protocol manager.'b'Get session snapshot data for resume functionality.'u'Get session snapshot data for resume functionality.'b'finalized_transcript'u'finalized_transcript'b'mt_status'u'mt_status'b'Handle incoming WebSocket message through protocol manager.'u'Handle incoming WebSocket message through protocol manager.'b'No protocol manager for session 'u'No protocol manager for session 'b'Broadcast message using new envelope protocol.'u'Broadcast message using new envelope protocol.'b'Flow control prevented sending message to 'u'Flow control prevented sending message to 'b'Map legacy message types to envelope message types.'u'Map legacy message types to envelope message types.'b'partial_en'u'partial_en'b'final_en'u'final_en'b'partial_translation'u'partial_translation'b'final_translation'u'final_translation'b'mt_final'u'mt_final'b'Legacy broadcast method for backward compatibility.'u'Legacy broadcast method for backward compatibility.'b'Best-effort schedule of a broadcast without requiring a running loop.
        Drops silently if no event loop is running (e.g., during shutdown or
        when called from sync/test contexts).
        'u'Best-effort schedule of a broadcast without requiring a running loop.
        Drops silently if no event loop is running (e.g., during shutdown or
        when called from sync/test contexts).
        'b'partial_zh'u'partial_zh'b'EN(final):'u'EN(final):'b'ZH:'u'ZH:'b'final_zh'u'final_zh'b'vu'u'vu'b'rms'u'rms'b'peak'u'peak'b'clip_pct'u'clip_pct'u'Ready  start speaking now'b'_download/'u'_download/'b'download_progress'u'download_progress'b'repo_id'u'repo_id'b'pct'u'pct'b'-c'b'from huggingface_hub import snapshot_download; import sys; p = snapshot_download(sys.argv[1], local_dir=None); print(p)'u'from huggingface_hub import snapshot_download; import sys; p = snapshot_download(sys.argv[1], local_dir=None); print(p)'b'--'u'--'b'download_error'u'download_error'b'download_done'u'download_done'b'local_path'u'local_path'b'rc='u'rc='b'Shutdown all sessions and cleanup resources.'u'Shutdown all sessions and cleanup resources.'b'SessionManager shutdown initiated'u'SessionManager shutdown initiated'b'Error stopping session 'u'Error stopping session 'b'Error closing protocol manager: 'u'Error closing protocol manager: 'b'Error canceling download 'u'Error canceling download 'b'Error joining background thread: 'u'Error joining background thread: 'b'SessionManager shutdown completed'u'SessionManager shutdown completed'b'Best-effort, non-async cleanup for tests; no heavy work.'u'Best-effort, non-async cleanup for tests; no heavy work.'u'LoquiLex.loquilex.api.supervisor'u'loquilex.api.supervisor'u'api.supervisor'AsyncClientloquilex.apiservermarktest_clear_cache_no_auth_clienttesttokenhttp://testbase_urlactest_clear_cache_with_authbarfooBearer testtokenj# Ensure admin token is set for this test (set on module to avoid import-time env issues)# Without auth header expect 403# Prime the in-memory cache# Ensure cache clearedb'testtoken'u'testtoken'b'http://test'u'http://test'b'bar'u'bar'b'foo'u'foo'b'Bearer testtoken'u'Bearer testtoken'u'guff.LoquiLex.tests.test_admin_cache'u'LoquiLex.tests.test_admin_cache'u'tests.test_admin_cache'u'test_admin_cache'test_aggregator_partial_debounceemittedhello worldhow are youtest_aggregator_force_finalize_s# Rapid partials inside debounce window should collapse to one emit# Advance time beyond debounce and new text should emitb'hello world'u'hello world'b'how are you'u'how are you'u'guff.LoquiLex.tests.test_aggregator'u'LoquiLex.tests.test_aggregator'u'tests.test_aggregator'u'test_aggregator'Test hardware snapshot API endpoint.fastapi.testclientTestClientloquilex.api.serverTestHardwareEndpointTest hardware snapshot endpoint.clientTest client fixture.test_hardware_snapshot_endpoint_successTest hardware snapshot endpoint returns valid data.test_hardware_snapshot_endpoint_contains_threshold_infoTest hardware snapshot includes threshold validation.# Validate response structure# Validate CPU data# Validate GPU data# Validate audio device data# Validate overall status# Validate memory# Validate platform info# Validate warnings# Check that threshold validation occurred# Overall score should be calculatedb'Test hardware snapshot API endpoint.'u'Test hardware snapshot API endpoint.'b'Test hardware snapshot endpoint.'u'Test hardware snapshot endpoint.'b'Test client fixture.'u'Test client fixture.'b'Test hardware snapshot endpoint returns valid data.'u'Test hardware snapshot endpoint returns valid data.'b'device_id'u'device_id'b'is_available'u'is_available'b'Test hardware snapshot includes threshold validation.'u'Test hardware snapshot includes threshold validation.'u'guff.LoquiLex.tests.test_api_hardware'u'LoquiLex.tests.test_api_hardware'u'tests.test_api_hardware'u'test_api_hardware'test_create_and_stop_minimal_session_httpfake-smallskipSession creation failed due to environment constraints/sessions/b'fake-small'u'fake-small'b'asr_model_id'u'asr_model_id'b'streaming_mode'u'streaming_mode'b'Session creation failed due to environment constraints'u'Session creation failed due to environment constraints'b'/sessions/'u'/sessions/'u'guff.LoquiLex.tests.test_api_minimal_http'u'LoquiLex.tests.test_api_minimal_http'u'tests.test_api_minimal_http'u'test_api_minimal_http'loquilex.api.supervisortest_minimal_session_lifecyclenomanagerpoll_intervalSession  was not cleaned up within  seconds# stop session and ensure cleanup# Poll for session cleanup with timeout to avoid flakinessb'test'u'test'b'no'u'no'b'Session 'u'Session 'b' was not cleaned up within 'u' was not cleaned up within 'b' seconds'u' seconds'u'guff.LoquiLex.tests.test_api_minimal_session'u'LoquiLex.tests.test_api_minimal_session'u'tests.test_api_minimal_session'u'test_api_minimal_session'Tests for model-related API endpoints.test_get_asr_modelsTest /models/asr endpoint.test_get_mt_modelsTest /models/mt endpoint.test_get_model_defaultsTest /settings/defaults GET endpoint.defaultsexpected_fieldstest_update_model_defaultsTest /settings/defaults POST endpoint.nllb-600Mupdate_dataget_responsetest_partial_update_model_defaultsTest partial updates to model defaults.initial_responseinitialtest_update_model_defaults_with_nullsTest that null values in update request are ignored.test_mt_languages_endpointTest /languages/mt/{model_id} endpoint./languages/mt/nllb-600M/languages/mt/unknown-modelresponse2result2# Should be a list of model dicts# Check required fields exist# Update some defaults# Verify by getting defaults again# Get current defaults# Update only ASR model# Other fields should remain unchanged# Send update with some null values# This should be ignored# Null values should be ignored, keeping original values# Test with a simple model name first# Test with unknown model# Should still return something (minimal default)b'Tests for model-related API endpoints.'u'Tests for model-related API endpoints.'b'Test /models/asr endpoint.'u'Test /models/asr endpoint.'b'Test /models/mt endpoint.'u'Test /models/mt endpoint.'b'Test /settings/defaults GET endpoint.'u'Test /settings/defaults GET endpoint.'b'asr_device'u'asr_device'b'asr_compute_type'u'asr_compute_type'b'mt_device'u'mt_device'b'mt_compute_type'u'mt_compute_type'b'tts_model_id'u'tts_model_id'b'tts_device'u'tts_device'b'Test /settings/defaults POST endpoint.'u'Test /settings/defaults POST endpoint.'b'nllb-600M'u'nllb-600M'b'Test partial updates to model defaults.'u'Test partial updates to model defaults.'b'Test that null values in update request are ignored.'u'Test that null values in update request are ignored.'b'Test /languages/mt/{model_id} endpoint.'u'Test /languages/mt/{model_id} endpoint.'b'/languages/mt/nllb-600M'u'/languages/mt/nllb-600M'b'/languages/mt/unknown-model'u'/languages/mt/unknown-model'u'guff.LoquiLex.tests.test_api_model_endpoints'u'LoquiLex.tests.test_api_model_endpoints'u'tests.test_api_model_endpoints'u'test_api_model_endpoints'test_import_api_modules_for_coverageloquilex.api.model_discoveryapiloquilex.api.eventsstarrayalphar1p1# Import FastAPI modules if available; otherwise skip gracefully# Access the modules to avoid unused import warnings# Exercise events and vu helpersb'fastapi'u'fastapi'b'x'u'x'u'guff.LoquiLex.tests.test_api_modules_import'u'LoquiLex.tests.test_api_modules_import'u'tests.test_api_modules_import'u'test_api_modules_import'Tests for ASR performance metrics and structured logging.unittest.mockTestLatencyMetricsTest latency metrics collection.test_empty_metricsTest empty metrics state.test_single_measurementTest single measurement.150.0test_multiple_measurementsTest multiple measurements and percentiles.10150.551.096.0test_bounded_recent_valuesTest that recent values are bounded.150TestASRMetricsTest ASR metrics collection and reporting.test_basic_metricsTest basic ASR metrics functionality.test_streamseg1test_asr_metrics_with_structured_loggingTest ASR metrics with structured logging integration.loquilex.logging.structured.StructuredLoggermock_logger_classreturn_valuemock_loggerassert_calledcall_counttest_initializationTest metrics initialization.test_partial_event_trackingTest partial event tracking.partial1partial2loquilex.asr.metrics.time.monotonicmock_timeloquilex.asr.metrics.time.timemock_wall_timetimesside_effect90.0110.0test_final_event_trackingTest final event tracking.hello world.time.monotonictime.timetest_eou_reason_countingTest EOU reason counting.reasonstext test_summary_generationTest metrics summary generation.final1test_performance_targetsTest performance target evaluation.mock_time_testbase_timeseq_lentimes_for_moduletimes_for_stdlibTestMetricsIntegrationTest metrics integration with aggregator.test_aggregator_with_metricsTest aggregator collecting metrics.events_collectedtest_aggregator_without_metricsTest aggregator with metrics disabled.test_metrics_in_statsTest that metrics are included in aggregator stats.# Add values from 1 to 100# (1+100)/2# Median of 1..100 (0-indexed)# Correct p95 for sorted 1..100# Add more than the max recent values (100)# Recent values should be the last 100# Test partial event# Test final event# Verify logger was used for initialization# Test partial event logging# Test final event logging# Verify structured logging calls# init + events# Mock time to control intervals# Create partial events# Need more mock values to cover all time.monotonic() calls# Enough values# Fixed wall time for logging# Should have recorded interval (approximately 100ms)# Allow some tolerance for timing differences# Add a partial first# Should have recorded finalization latency (gap between calls)# The latency should be around 100ms (0.1s gap)# Add finals with different EOU reasons# Add some simple events without complex mocking# Add measurements that meet targets# Seed with a real float so arithmetic stays numeric (not MagicMock)# Give each patched function its own long sequence (avoid StopIteration)# Should meet targets# < 200ms# < 300ms# < 800ms# Create events# Process events through aggregator# Check that metrics were collected# Initially should be empty performance metricsb'Tests for ASR performance metrics and structured logging.'u'Tests for ASR performance metrics and structured logging.'b'Test latency metrics collection.'u'Test latency metrics collection.'b'Test empty metrics state.'u'Test empty metrics state.'b'Test single measurement.'u'Test single measurement.'b'Test multiple measurements and percentiles.'u'Test multiple measurements and percentiles.'b'Test that recent values are bounded.'u'Test that recent values are bounded.'b'Test ASR metrics collection and reporting.'u'Test ASR metrics collection and reporting.'b'Test basic ASR metrics functionality.'u'Test basic ASR metrics functionality.'b'test_stream'u'test_stream'b'seg1'u'seg1'b'Test ASR metrics with structured logging integration.'u'Test ASR metrics with structured logging integration.'b'loquilex.logging.structured.StructuredLogger'u'loquilex.logging.structured.StructuredLogger'b'Test metrics initialization.'u'Test metrics initialization.'b'Test partial event tracking.'u'Test partial event tracking.'b'loquilex.asr.metrics.time.monotonic'u'loquilex.asr.metrics.time.monotonic'b'loquilex.asr.metrics.time.time'u'loquilex.asr.metrics.time.time'b'Test final event tracking.'u'Test final event tracking.'b'hello world.'u'hello world.'b'time.monotonic'u'time.monotonic'b'time.time'u'time.time'b'Test EOU reason counting.'u'Test EOU reason counting.'b'text 'u'text 'b'Test metrics summary generation.'u'Test metrics summary generation.'b'Test performance target evaluation.'u'Test performance target evaluation.'b'Test metrics integration with aggregator.'u'Test metrics integration with aggregator.'b'Test aggregator collecting metrics.'u'Test aggregator collecting metrics.'b'Test aggregator with metrics disabled.'u'Test aggregator with metrics disabled.'b'Test that metrics are included in aggregator stats.'u'Test that metrics are included in aggregator stats.'u'guff.LoquiLex.tests.test_asr_metrics'u'LoquiLex.tests.test_asr_metrics'u'tests.test_asr_metrics'u'test_asr_metrics'Unit tests for BoundedQueue utility.loquilex.api.bounded_queueTestDropMetricsTest drop metrics tracking.test_record_dropTest drop recording.123.45test_read_and_reset_recentTest reading and resetting recent drop count.TestBoundedQueueTest bounded queue functionality.Test queue initialization.test_invalid_maxsizeTest invalid maxsize raises error.raisesmatchtest_put_get_basicTest basic put/get operations.item1item2test_capacity_and_drop_oldestTest capacity limits and drop-oldest behavior.item3test_peekTest peek functionality.firstsecondtest_clearTest clear functionality.test_drainTest drain functionality.test_telemetryTest telemetry data collection.test_queuetelemetrytest_thread_safety_structureTest that queue has thread safety structure.TestReplayBufferTest replay buffer specialized functionality.Test replay buffer initialization.5.0test_add_message_with_seqTest adding messages with sequence numbers.env1env2test_get_messages_afterTest getting messages after a sequence number.msg1msg2msg3env3messagestest_ttl_cleanupTest TTL-based message cleanup.old101.0103.0test_ttl_disabledTest behavior when TTL is disabled.persistent# First read should return count and reset# Total should remain# Second read should return 0# Put items# Get items (FIFO order)# Empty queue# Fill to capacity# Adding third item should drop oldest# Still at capacity# Verify oldest was dropped# item1 was dropped# Add items and peek# Peek doesn't remove# Get item and peek again# Add items# Clear and check count# Drain all items# Add some items and cause drops# Fill beyond capacity to cause drops# At capacity# Access should trigger lock initialization# Mock envelope objects# Add messages with sequence numbers# Get messages after seq 1 (within the patch context)# Get messages after seq 2# Get messages after seq 3 (none)# Add first message at time 100# Add second message at time 101 (within TTL)# Query at time 103 (first message expired, second still valid)# First message dropped due to TTL# Disabled TTL# Much later time should not affect messages when TTL disabled# No TTL dropsb'Unit tests for BoundedQueue utility.'u'Unit tests for BoundedQueue utility.'b'Test drop metrics tracking.'u'Test drop metrics tracking.'b'Test drop recording.'u'Test drop recording.'b'Test reading and resetting recent drop count.'u'Test reading and resetting recent drop count.'b'Test bounded queue functionality.'u'Test bounded queue functionality.'b'Test queue initialization.'u'Test queue initialization.'b'Test invalid maxsize raises error.'u'Test invalid maxsize raises error.'b'Test basic put/get operations.'u'Test basic put/get operations.'b'item1'u'item1'b'item2'u'item2'b'Test capacity limits and drop-oldest behavior.'u'Test capacity limits and drop-oldest behavior.'b'item3'u'item3'b'Test peek functionality.'u'Test peek functionality.'b'first'u'first'b'second'u'second'b'Test clear functionality.'u'Test clear functionality.'b'Test drain functionality.'u'Test drain functionality.'b'Test telemetry data collection.'u'Test telemetry data collection.'b'test_queue'u'test_queue'b'Test that queue has thread safety structure.'u'Test that queue has thread safety structure.'b'Test replay buffer specialized functionality.'u'Test replay buffer specialized functionality.'b'Test replay buffer initialization.'u'Test replay buffer initialization.'b'Test adding messages with sequence numbers.'u'Test adding messages with sequence numbers.'b'Test getting messages after a sequence number.'u'Test getting messages after a sequence number.'b'msg1'u'msg1'b'msg2'u'msg2'b'msg3'u'msg3'b'Test TTL-based message cleanup.'u'Test TTL-based message cleanup.'b'old'u'old'b'new'u'new'b'Test behavior when TTL is disabled.'u'Test behavior when TTL is disabled.'b'persistent'u'persistent'u'guff.LoquiLex.tests.test_bounded_queue'u'LoquiLex.tests.test_bounded_queue'u'tests.test_bounded_queue'u'test_bounded_queue'tests.util.audio_install_fake_faster_whisperfake_fwtests.fakes.fake_whisper_install_fake_mtgreenfield.mt.translatortests.fakes.fake_mttest_wav_to_vtt_offline_with_fake_asra.wava.vttloquilex.cliwav_to_vttcli--wav--outWEBVTTtest_vtt_to_zh_offline_with_fake_mtvttwrite_textWEBVTT

00:00:00.000 --> 00:00:00.500
hello

00:00:00.500 --> 00:00:01.000
world
zh.txtout_txtzh.srtout_srtvtt_to_zh--vtt--out-text--out-srtzh_text127Unexpected output: test_output_boundary_respectedloquilex.output.pathssub/ok.txtinsideoops.txtoutside_absexpected ValueError for escaping path# Create a tiny VTT# Accept either [zh] or pure Chinese output# Ensure we can guard paths within GF_OUT_DIR in tests using helperb'greenfield.mt.translator'u'greenfield.mt.translator'b'a.wav'u'a.wav'b'a.vtt'u'a.vtt'b'--wav'u'--wav'b'--out'u'--out'b'WEBVTT'u'WEBVTT'b'WEBVTT

00:00:00.000 --> 00:00:00.500
hello

00:00:00.500 --> 00:00:01.000
world
'u'WEBVTT

00:00:00.000 --> 00:00:00.500
hello

00:00:00.500 --> 00:00:01.000
world
'b'zh.txt'u'zh.txt'b'zh.srt'u'zh.srt'b'--vtt'u'--vtt'b'--out-text'u'--out-text'b'--out-srt'u'--out-srt'b'Unexpected output: 'u'Unexpected output: 'b'sub/ok.txt'u'sub/ok.txt'b'oops.txt'u'oops.txt'b'expected ValueError for escaping path'u'expected ValueError for escaping path'u'guff.LoquiLex.tests.test_cli_integration_offline'u'LoquiLex.tests.test_cli_integration_offline'u'tests.test_cli_integration_offline'u'test_cli_integration_offline'test_cli_runs_with_fake_capture_and_translatorcapStopperstopperEchooutdirlive.partial.en.txtlive.partial.zh.txtlive.final.en.txtlive.final.zh.txtlive.final.en.vttlive.final.zh.srtsetenvPYTHONUNBUFFEREDrun_with_args# Patch capture_stream to emit a few silent frames then stop# 200ms per frame# Patch translator to echo quickly# Run CLI main with short seconds and custom output dir# Wrap main to parse our args# Verify outputs exist (some may be empty depending on silence)# VTT only written on finalizationb'capture_stream'u'capture_stream'b'Translator'u'Translator'b'live.partial.en.txt'u'live.partial.en.txt'b'live.partial.zh.txt'u'live.partial.zh.txt'b'live.final.en.txt'u'live.final.en.txt'b'live.final.zh.txt'u'live.final.zh.txt'b'live.final.en.vtt'u'live.final.en.vtt'b'live.final.zh.srt'u'live.final.zh.srt'b'PYTHONUNBUFFERED'u'PYTHONUNBUFFERED'u'guff.LoquiLex.tests.test_cli_smoke'u'LoquiLex.tests.test_cli_smoke'u'tests.test_cli_smoke'u'test_cli_smoke'packaging.versionVersionstarlettetest_starlette_httpx_compat0.470.28httpx>=0.28 breaks older Starlette TestClient (Client(app=...))Compat check applies only to Starlette<0.47; on newer Starlette it's just a deprecation.# Add these to your dev/constraints so fresh checkouts don't hit this again:# pytest-asyncio==0.24.*# pytest-xdist==3.8.*# httpx==0.28.*         # if you want to keep current; test now skips on new Starlette# Only enforce httpx<0.28 for older Starlette where Client(app=...) breaksb'0.47'u'0.47'b'0.28'u'0.28'b'httpx>=0.28 breaks older Starlette TestClient (Client(app=...))'u'httpx>=0.28 breaks older Starlette TestClient (Client(app=...))'b'Compat check applies only to Starlette<0.47; on newer Starlette it's just a deprecation.'u'Compat check applies only to Starlette<0.47; on newer Starlette it's just a deprecation.'u'guff.LoquiLex.tests.test_compat_versions'u'LoquiLex.tests.test_compat_versions'u'tests.test_compat_versions'u'test_compat_versions'importlibtest_env_overrides123loquilex/out/session.flacloquilex.configmodsession.flac# Reload module to pick envb'123'u'123'b'9'u'9'b'loquilex/out/session.flac'u'loquilex/out/session.flac'b'session.flac'u'session.flac'u'guff.LoquiLex.tests.test_config_env'u'LoquiLex.tests.test_config_env'u'tests.test_config_env'u'test_config_env'Test configuration parsing and environment variables.loquilex.api.ws_protocolTestConfigurationParsingTest configuration parsing with unit suffixes.test_time_parsing_with_secondsTest parsing time values with 's' suffix.LX_TEST_TIMEtest_time_parsing_with_millisecondsTest parsing time values with 'ms' suffix.1500mstest_time_parsing_with_minutesTest parsing time values with 'm' suffix.2m120.0test_time_parsing_with_hoursTest parsing time values with 'h' suffix.0.5h1800.0test_time_parsing_plain_numberTest parsing plain numbers (assumed to be seconds).7.5test_time_parsing_invalid_valueTest parsing invalid values falls back to default.invalidtest_time_parsing_no_env_varTest parsing when env var doesn't exist.test_ws_protocol_config_with_time_suffixesTest WSProtocolManager configuration with time suffixes.3sLX_WS_HEARTBEAT_SECLX_WS_HEARTBEAT_TIMEOUT_SEC5sLX_WS_RESUME_TTLLX_WS_RESUME_MAX_EVENTSLX_CLIENT_EVENT_BUFFERenv_varstest_session3000resume_window_replay_buffertest_ws_protocol_config_defaultsTest WSProtocolManager uses default values when env vars not set.env_keysenv_backup500015000test_complex_time_formatsTest parsing various complex time formats.500ms1.5m0.25h900.0  2s  test_casesinput_valexpectedFailed for input: # Check heartbeat config (converted from seconds to milliseconds)# Check resume window config# Check replay buffer config# Ensure relevant env vars are not set# Check defaults match issue requirements# 5 seconds# 15 seconds# Restore env vars# Plain number# Seconds# Milliseconds# Minutes with decimal# Hours with decimal# With whitespaceb'Test configuration parsing and environment variables.'u'Test configuration parsing and environment variables.'b'Test configuration parsing with unit suffixes.'u'Test configuration parsing with unit suffixes.'b'Test parsing time values with 's' suffix.'u'Test parsing time values with 's' suffix.'b'10s'u'10s'b'LX_TEST_TIME'u'LX_TEST_TIME'b'Test parsing time values with 'ms' suffix.'u'Test parsing time values with 'ms' suffix.'b'1500ms'u'1500ms'b'Test parsing time values with 'm' suffix.'u'Test parsing time values with 'm' suffix.'b'2m'u'2m'b'Test parsing time values with 'h' suffix.'u'Test parsing time values with 'h' suffix.'b'0.5h'u'0.5h'b'Test parsing plain numbers (assumed to be seconds).'u'Test parsing plain numbers (assumed to be seconds).'b'7.5'u'7.5'b'Test parsing invalid values falls back to default.'u'Test parsing invalid values falls back to default.'b'invalid'u'invalid'b'Test parsing when env var doesn't exist.'u'Test parsing when env var doesn't exist.'b'Test WSProtocolManager configuration with time suffixes.'u'Test WSProtocolManager configuration with time suffixes.'b'3s'u'3s'b'LX_WS_HEARTBEAT_SEC'u'LX_WS_HEARTBEAT_SEC'b'LX_WS_HEARTBEAT_TIMEOUT_SEC'u'LX_WS_HEARTBEAT_TIMEOUT_SEC'b'5s'u'5s'b'LX_WS_RESUME_TTL'u'LX_WS_RESUME_TTL'b'100'u'100'b'LX_WS_RESUME_MAX_EVENTS'u'LX_WS_RESUME_MAX_EVENTS'b'150'u'150'b'LX_CLIENT_EVENT_BUFFER'u'LX_CLIENT_EVENT_BUFFER'b'test_session'u'test_session'b'Test WSProtocolManager uses default values when env vars not set.'u'Test WSProtocolManager uses default values when env vars not set.'b'Test parsing various complex time formats.'u'Test parsing various complex time formats.'b'10'u'10'b'500ms'u'500ms'b'1.5m'u'1.5m'b'0.25h'u'0.25h'b'  2s  'u'  2s  'b'Failed for input: 'u'Failed for input: 'u'guff.LoquiLex.tests.test_config_parsing'u'LoquiLex.tests.test_config_parsing'u'tests.test_config_parsing'u'test_config_parsing'Contract tests for MT providers.

These tests verify that all providers implement the same behavior.
MTErrorMTProviderContractTestsShared test suite for all MT providers.Override in subclasses to provide the provider under test.Subclasses must implement provider()test_translate_text_basicTest basic text translation.test_translate_text_emptyTest translation of empty/whitespace text.   test_translate_chunkedTest chunked translation.test_quality_modesTest different quality modes.test_capabilitiesTest provider capabilities.capstest_language_variantsTest Chinese language variants.FakeMTProviderFake MT provider for testing without real models.][en]Unsupported direction: fakefake-test-providerTestFakeProviderTest fake provider to verify contract tests work.# Test English to Chinese# Test Chinese to English# Empty chunk stays empty# Both modes should work# Check required fields# Check EN<->ZH directions supported# If provider supports traditional Chinese, test it# Fake provider for unit testing without heavy dependencies# noqa: ARG002b'Contract tests for MT providers.

These tests verify that all providers implement the same behavior.
'u'Contract tests for MT providers.

These tests verify that all providers implement the same behavior.
'b'Shared test suite for all MT providers.'u'Shared test suite for all MT providers.'b'Override in subclasses to provide the provider under test.'u'Override in subclasses to provide the provider under test.'b'Subclasses must implement provider()'u'Subclasses must implement provider()'b'Test basic text translation.'u'Test basic text translation.'u''b'Test translation of empty/whitespace text.'u'Test translation of empty/whitespace text.'b'   'u'   'b'Test chunked translation.'u'Test chunked translation.'b'Test different quality modes.'u'Test different quality modes.'b'Test provider capabilities.'u'Test provider capabilities.'b'Test Chinese language variants.'u'Test Chinese language variants.'b'Fake MT provider for testing without real models.'u'Fake MT provider for testing without real models.'b']'u']'b'[en]'u'[en]'b'Unsupported direction: 'u'Unsupported direction: 'b'fake'u'fake'b'fake-test-provider'u'fake-test-provider'b'Test fake provider to verify contract tests work.'u'Test fake provider to verify contract tests work.'u'loquilex.mt.tests.test_contract_provider'u'mt.tests.test_contract_provider'u'tests.test_contract_provider'u'test_contract_provider'End-to-end test for resume flow with no duplicate finals.AsyncMockloquilex.api.ws_typesSessionResumeDataWSEnvelopeMockWebSocketMock WebSocket for testing.sent_messagessend_textMock send_text method.WebSocket closedMock close method.get_messages_by_typemsg_typeGet all messages of a specific type.msg_strloadsTestE2EResumeFlowEnd-to-end test for resume flow demonstrating no duplicate finals.test_resume_flow_no_duplicate_finalsTest complete resume flow ensuring no duplicate finals and proper sequence ordering.Hello world.seg2How are you?3.5seg3I am finesession_snapshotmock_get_snapshotws1This isThis is newerThis is newer text.initial_messagesinitial_seq_numbersws2last_received_seqSESSION_RESUMEepochresume_requestmodel_dump_jsonresume_messagessnapshot_msgsession.snapshott_mono_nsack_msgsession.ackresumedI am fine, thanks.new_messagesnew_finalget_telemetry_summaryresume_metricsattemptsmisssuccess_rateavg_snapshot_sizetest_ordering_guarantees_after_resumeTest that sequence ordering is maintained after resume.msg3 finalsequencestest_resume_with_expired_windowTest graceful handling when resume window has expired.ResumeWindowshort_windowresume_responsesession.newresume_expired# Mock session data with finalized transcript and sequence ranges# Final covers partial sequences 1,2,3# Final covers partial sequences 4,5# In-progress partial# Phase 1: Initial connection and some events# Send some domain events that would be in replay buffer# seq=1# seq=2# seq=3# Capture what was sent during initial session# Phase 2: Disconnect (simulate network issue)# Phase 3: Reconnect and resume (client sends resume request)# Client sends resume request with last received seq# Phase 4: Validate resume response# Should have: snapshot, potentially replay messages, ack# At least snapshot + ack# First message should be snapshot# Validate snapshot contains expected data# Validate monotonic timing# Last message should be session ack# Phase 5: Continue session with new events (ensure sequence continues properly)# Should get next seq# Sequence should continue from where it left off# Phase 6: Validate metrics# Should have content in snapshot# Initial session# Send some events# Get sequence numbers# Disconnect and resume# Resume from last sequence# Send new events after resume# Should be seq=3# Should be seq=4# Check sequence ordering is maintained# Should be in ascending order# Should continue from where we left off# Check all sequences are strictly increasing# Should be consecutive# Very short resume window (1 second)# Wait for window to expire# Try to resume# Should get session.new (fresh start) instead of snapshot# Check metrics recorded the missb'End-to-end test for resume flow with no duplicate finals.'u'End-to-end test for resume flow with no duplicate finals.'b'Mock WebSocket for testing.'u'Mock WebSocket for testing.'b'Mock send_text method.'u'Mock send_text method.'b'WebSocket closed'u'WebSocket closed'b'Mock close method.'u'Mock close method.'b'Get all messages of a specific type.'u'Get all messages of a specific type.'b't'u't'b'End-to-end test for resume flow demonstrating no duplicate finals.'u'End-to-end test for resume flow demonstrating no duplicate finals.'b'Test complete resume flow ensuring no duplicate finals and proper sequence ordering.'u'Test complete resume flow ensuring no duplicate finals and proper sequence ordering.'b'Hello world.'u'Hello world.'b'seg2'u'seg2'b'How are you?'u'How are you?'b'seg3'u'seg3'b'I am fine'u'I am fine'b'This is'u'This is'b'This is newer'u'This is newer'b'This is newer text.'u'This is newer text.'b'session.snapshot'u'session.snapshot'b't_mono_ns'u't_mono_ns'b'session.ack'u'session.ack'b'resumed'u'resumed'b'I am fine, thanks.'u'I am fine, thanks.'b'resume_metrics'u'resume_metrics'b'attempts'u'attempts'b'success'u'success'b'miss'u'miss'b'success_rate'u'success_rate'b'avg_snapshot_size'u'avg_snapshot_size'b'Test that sequence ordering is maintained after resume.'u'Test that sequence ordering is maintained after resume.'b'msg3 final'u'msg3 final'b'Test graceful handling when resume window has expired.'u'Test graceful handling when resume window has expired.'b'session.new'u'session.new'b'reason'u'reason'b'resume_expired'u'resume_expired'u'guff.LoquiLex.tests.test_e2e_resume_flow'u'LoquiLex.tests.test_e2e_resume_flow'u'tests.test_e2e_resume_flow'u'test_e2e_resume_flow'End-to-end test for LoquiLex WebSocket API live session.

This test launches the FastAPI backend, opens a mock WebSocket client,
and asserts we receive status/partial/final events in the expected order.
pytestmarkimportorskipfastapi not installed; e2e disabled by defaultwebsocketsMockWebSocketSessionMock WebSocket client for testing the live session API.connectConnect to the WebSocket endpoint.api_serverws_urllisten_for_eventsListen for WebSocket events until timeout or specific conditions.WebSocket not connectedwait_forrecvraw_messageConnectionClosedClose the WebSocket connection.test_e2e_websocket_live_sessionTest end-to-end WebSocket live session with mock ASR engine.GF_ASR_MODELGF_DEVICEGF_SAVE_AUDIO/tmp/loquilex_testhttp://localhosttest_enve2e_test_sessionsession_payloadloquilex.api.supervisor.Session.startsubprocess.Popenmock_popenmock_procsession_datawebsocket_connectpingqueue.Queue[object]_recvreceiveelapsedWebSocket receive hung >0.8s (elapsed=s)WS roundtrip exceeded 1.0s (elapsed=test_e2e_session_event_structureTest that session events have the expected structure with stamping.test_eventsstamped_eventstest_session_config_validationTest session configuration validation via REST API.invalid_deviceinvalid_payloadloquilex.api.supervisor.SessionManager.start_sessionmock_startInvalid configurationtest_api_model_endpointsTest model discovery endpoints that support the live session.asr_modelsmt_models# noqa: E402# noqa: E402  # restored import# Wait for message with short timeout# Check for completion conditions# Continue listening# Mock environment to avoid requiring real models and audio devices# Use smallest model# revert to localhost allowed origin# Use FastAPI TestClient (deprecated shortcut warning acceptable; filtered elsewhere)# Step 1: Create a session via REST API# Disable MT to simplify test# Disable VAD to simplify test# Mock the session start to avoid subprocess spawning# Mock the process to avoid actually spawning live_en_to_zh# Process running# Should create session successfully (even with mocked subprocess)# Allow errors due to missing models# Verify we got a session ID# Step 2: Test WebSocket endpoint accessibility# Test that the WebSocket endpoint exists and accepts connections# Note: TestClient WebSocket support is basic but we can verify the endpoint# Send a lightweight ping to exercise server loop# Bounded recv to eliminate any chance of hanging the test# hard cap# In our lightweight test, an exception/timeout is acceptable# Target ~0.50.7s; hard cap 1.0s for safety# Some connection errors are expected in test environment# The important thing is that the endpoint exists# Endpoint should exist# Step 3: Clean up - stop the session# Allow 404 if session was already cleaned up# Test event stamping# Verify stamped structure# Verify sequence numbers are incremental# Verify timestamps are reasonable# Test invalid session config# Invalid empty model# Test ASR models endpoint# Test MT models endpointb'End-to-end test for LoquiLex WebSocket API live session.

This test launches the FastAPI backend, opens a mock WebSocket client,
and asserts we receive status/partial/final events in the expected order.
'u'End-to-end test for LoquiLex WebSocket API live session.

This test launches the FastAPI backend, opens a mock WebSocket client,
and asserts we receive status/partial/final events in the expected order.
'b'fastapi not installed; e2e disabled by default'u'fastapi not installed; e2e disabled by default'b'Mock WebSocket client for testing the live session API.'u'Mock WebSocket client for testing the live session API.'b'Connect to the WebSocket endpoint.'u'Connect to the WebSocket endpoint.'b'ws'u'ws'b'Listen for WebSocket events until timeout or specific conditions.'u'Listen for WebSocket events until timeout or specific conditions.'b'WebSocket not connected'u'WebSocket not connected'b'Close the WebSocket connection.'u'Close the WebSocket connection.'b'Test end-to-end WebSocket live session with mock ASR engine.'u'Test end-to-end WebSocket live session with mock ASR engine.'b'GF_ASR_MODEL'u'GF_ASR_MODEL'b'GF_DEVICE'u'GF_DEVICE'b'GF_SAVE_AUDIO'u'GF_SAVE_AUDIO'b'/tmp/loquilex_test'u'/tmp/loquilex_test'b'http://localhost'u'http://localhost'b'e2e_test_session'u'e2e_test_session'b'vad'u'vad'b'beams'u'beams'b'pause_flush_sec'u'pause_flush_sec'b'segment_max_sec'u'segment_max_sec'b'partial_word_cap'u'partial_word_cap'b'save_audio'u'save_audio'b'loquilex.api.supervisor.Session.start'u'loquilex.api.supervisor.Session.start'b'subprocess.Popen'u'subprocess.Popen'b'ping'u'ping'b'queue.Queue[object]'u'queue.Queue[object]'b'WebSocket receive hung >0.8s (elapsed='u'WebSocket receive hung >0.8s (elapsed='b's)'u's)'b'WS roundtrip exceeded 1.0s (elapsed='u'WS roundtrip exceeded 1.0s (elapsed='b'404'u'404'b'Test that session events have the expected structure with stamping.'u'Test that session events have the expected structure with stamping.'b'Test session configuration validation via REST API.'u'Test session configuration validation via REST API.'b'invalid_device'u'invalid_device'b'loquilex.api.supervisor.SessionManager.start_session'u'loquilex.api.supervisor.SessionManager.start_session'b'Invalid configuration'u'Invalid configuration'b'Test model discovery endpoints that support the live session.'u'Test model discovery endpoints that support the live session.'u'guff.LoquiLex.tests.test_e2e_websocket_api'u'LoquiLex.tests.test_e2e_websocket_api'u'tests.test_e2e_websocket_api'u'test_e2e_websocket_api'_reload_defaultsdelenvtest_lx_onlydd1e-061e-6b'5'u'5'b'0.9'u'0.9'u'LoquiLex.loquilex.tests.test_env_prefix'u'LoquiLex.loquilex.tests'u'loquilex.tests.test_env_prefix'u'loquilex.tests'u'tests.test_env_prefix'u'test_env_prefix'Tests for hardware detection module.MockTestCPUInfoTest CPU information detection.test_get_cpu_info_basicTest basic CPU information retrieval.os.environtest_cpu_threshold_warningTest CPU threshold warnings.minimum recommendedTestGPUInfoTest GPU information detection.test_get_gpu_info_no_torchTest GPU detection when PyTorch is not available.sys.modulestest_get_gpu_info_with_mock_torchTest GPU detection with mocked PyTorch.mock_torchTestAudioDevicesTest audio device detection.test_get_audio_devices_no_sounddeviceTest audio device detection when sounddevice is not available.test_get_audio_devices_with_mock_sounddeviceTest audio device detection with mocked sounddevice.mock_sdTest Microphone44100mock_deviceTestOverallScoreTest overall system scoring.test_calculate_overall_score_excellentTest excellent system score calculation.Test CPU3000.025.0Test GPU614465Test Micaudiotest_calculate_overall_score_poorTest poor system score calculation.Old CPU95.0CPU below thresholdNo GPUNo AudioNo audio deviceTestHardwareSnapshotTest complete hardware snapshot.test_get_hardware_snapshotTest getting complete hardware snapshot.test_hardware_snapshot_to_dictTest hardware snapshot serialization.# Should warn if we have fewer than 8 cores (most systems do)# No exception = available# 8GB# Basic structure validation# Platform info validation# Ensure all nested objects are also dictionariesb'Tests for hardware detection module.'u'Tests for hardware detection module.'b'Test CPU information detection.'u'Test CPU information detection.'b'Test basic CPU information retrieval.'u'Test basic CPU information retrieval.'b'os.environ'u'os.environ'b'8'u'8'b'Test CPU threshold warnings.'u'Test CPU threshold warnings.'b'minimum recommended'u'minimum recommended'b'Test GPU information detection.'u'Test GPU information detection.'b'Test GPU detection when PyTorch is not available.'u'Test GPU detection when PyTorch is not available.'b'sys.modules'u'sys.modules'b'torch'u'torch'b'Test GPU detection with mocked PyTorch.'u'Test GPU detection with mocked PyTorch.'b'Test audio device detection.'u'Test audio device detection.'b'Test audio device detection when sounddevice is not available.'u'Test audio device detection when sounddevice is not available.'b'sounddevice'u'sounddevice'b'Test audio device detection with mocked sounddevice.'u'Test audio device detection with mocked sounddevice.'b'Test Microphone'u'Test Microphone'b'Test overall system scoring.'u'Test overall system scoring.'b'Test excellent system score calculation.'u'Test excellent system score calculation.'b'Test CPU'u'Test CPU'b'Test GPU'u'Test GPU'b'Test Mic'u'Test Mic'b'Test poor system score calculation.'u'Test poor system score calculation.'b'Old CPU'u'Old CPU'b'CPU below threshold'u'CPU below threshold'b'No GPU'u'No GPU'b'No Audio'u'No Audio'b'No audio device'u'No audio device'b'Test complete hardware snapshot.'u'Test complete hardware snapshot.'b'Test getting complete hardware snapshot.'u'Test getting complete hardware snapshot.'b'Test hardware snapshot serialization.'u'Test hardware snapshot serialization.'u'guff.LoquiLex.tests.test_hardware_detection'u'LoquiLex.tests.test_hardware_detection'u'tests.test_hardware_detection'u'test_hardware_detection'test_partial_and_final_filesen zh en_lineszh_linesen 1en 2zh 1zh 2test_append_vtt_and_srtout.vttout.srtsrt1.2vtt_textWEBVTT

oneidx1.3twothreesrt_text1
2
3
# Partials rewritten# Finalization clears partials and appends finals with max_lines enforced# Overlapping inputs; append ensures monotonic# SRT index increments across appends and monotonic timestampsb'en 'u'en 'b'zh 'u'zh 'b'en 1'u'en 1'b'en 2'u'en 2'b'zh 1'u'zh 1'b'zh 2'u'zh 2'b'out.vtt'u'out.vtt'b'out.srt'u'out.srt'b'b'u'b'b'c'u'c'b'WEBVTT

'u'WEBVTT

'b'one'u'one'b'two'u'two'b'three'u'three'b'1
'u'1
'b'2
'u'2
'b'3
'u'3
'u'guff.LoquiLex.tests.test_live_outputs'u'LoquiLex.tests.test_live_outputs'u'tests.test_live_outputs'u'test_live_outputs'Tests for model defaults persistence.test_model_defaults_serializationTest ModelDefaults serialization to/from dict.restoredtest_model_defaults_from_dict_filteringTest that from_dict filters unknown fields gracefully.should_be_ignoredunknown_fieldanother_unknowntest_model_defaults_manager_basicTest basic ModelDefaultsManager functionality.defaults.jsontest_model_defaults_manager_updatesTest updating defaults.saved_datatest_model_defaults_manager_convenience_methodsTest convenience methods for getting/setting specific defaults.nllb-1.3Bespeak-ngtest_model_defaults_manager_env_fallbackTest fallback to environment variables for initial defaults.test_model_defaults_manager_loading_existingTest loading from existing storage file.stored.enstored-mtstored-ttsexisting_datatest_model_defaults_manager_invalid_updatesTest that invalid update fields are handled gracefully.valid.eninvalid_field# Test to_dict# Test from_dict# Unknown fields should be ignored, not cause errors# Get initial defaults# Check storage was created# Clear env vars that might interfere# Verify persistence# Set individual defaults# Get individual defaults# Set some env vars# Create existing storage# Create manager - should load existing data# Try updating with invalid field (should log warning but not crash)# Valid field should be updatedb'Tests for model defaults persistence.'u'Tests for model defaults persistence.'b'Test ModelDefaults serialization to/from dict.'u'Test ModelDefaults serialization to/from dict.'b'Test that from_dict filters unknown fields gracefully.'u'Test that from_dict filters unknown fields gracefully.'b'should_be_ignored'u'should_be_ignored'b'unknown_field'u'unknown_field'b'another_unknown'u'another_unknown'b'Test basic ModelDefaultsManager functionality.'u'Test basic ModelDefaultsManager functionality.'b'defaults.json'u'defaults.json'b'Test updating defaults.'u'Test updating defaults.'b'Test convenience methods for getting/setting specific defaults.'u'Test convenience methods for getting/setting specific defaults.'b'nllb-1.3B'u'nllb-1.3B'b'espeak-ng'u'espeak-ng'b'Test fallback to environment variables for initial defaults.'u'Test fallback to environment variables for initial defaults.'b'Test loading from existing storage file.'u'Test loading from existing storage file.'b'stored.en'u'stored.en'b'stored-mt'u'stored-mt'b'stored-tts'u'stored-tts'b'Test that invalid update fields are handled gracefully.'u'Test that invalid update fields are handled gracefully.'b'valid.en'u'valid.en'u'guff.LoquiLex.tests.test_model_defaults'u'LoquiLex.tests.test_model_defaults'u'tests.test_model_defaults'u'test_model_defaults'Tests for model indexing functionality.loquilex.indexing.workerModelIndextest_model_index_serializationTest ModelIndex serialization to/from dict.1640995200.0last_updatedscan_duration_mstest_model_indexer_basicTest basic ModelIndexer functionality.model_index.jsoncache_pathrefresh_intervalindexerget_indexcached_datatest_model_indexer_refresh_logicTest indexer refresh logic.index1first_timeindex2refresh_indexforceindex3test_model_indexer_convenience_methodsTest convenience methods for getting models.test_model_indexer_background_workerTest background worker start/stop.start_background_worker_worker_threadstop_background_workertest_model_indexer_cache_loadingTest loading from existing cache.cached.enfake_data_index# Fixed timestamp# Get initial index (should trigger scan)# Check cache was created# Verify cached data# Get initial index# Immediate second call should return cached version# Force refresh should update# Start background worker# Brief pause for thread to start# Should have a worker thread# Stop worker# Create a fake cache file# Create indexer - should load from cacheb'Tests for model indexing functionality.'u'Tests for model indexing functionality.'b'Test ModelIndex serialization to/from dict.'u'Test ModelIndex serialization to/from dict.'b'asr_models'u'asr_models'b'mt_models'u'mt_models'b'last_updated'u'last_updated'b'scan_duration_ms'u'scan_duration_ms'b'Test basic ModelIndexer functionality.'u'Test basic ModelIndexer functionality.'b'model_index.json'u'model_index.json'b'Test indexer refresh logic.'u'Test indexer refresh logic.'b'Test convenience methods for getting models.'u'Test convenience methods for getting models.'b'Test background worker start/stop.'u'Test background worker start/stop.'b'Test loading from existing cache.'u'Test loading from existing cache.'b'cached.en'u'cached.en'b'cached'u'cached'u'guff.LoquiLex.tests.test_model_indexing'u'LoquiLex.tests.test_model_indexing'u'tests.test_model_indexing'u'test_model_indexing'Test MT integration with WebSocket API.loquilex.mt.servicetest_mt_integration_disabledTest MT integration when disabled.test-sessionintegrationskipifSkip MT integration tests in offline modetest_mt_integration_enabledTest MT integration when enabled.test_mt_integration_translate_and_emitTest translation and event emission (with mocks).specmock_servicemock-providerseg001assert_called_once_withassert_called_oncecall_argstest_mt_integration_error_handlingTest error handling in MT integration.Translation errortest_mt_integration_statusTest MT status reporting.mock# Should attempt to initialize but may fail without proper models# The important thing is it tries to initialize# Create integration# Mock the service directly (bypass constructor init)# Force enable for test# Mock broadcast function# Test translation and emission# Verify service was called# Verify event was emitted# Create mock service that raises error# Test error handling# Verify error event was emitted# Create mock service# Get statusb'Test MT integration with WebSocket API.'u'Test MT integration with WebSocket API.'b'Test MT integration when disabled.'u'Test MT integration when disabled.'b'test-session'u'test-session'b'Skip MT integration tests in offline mode'u'Skip MT integration tests in offline mode'b'Test MT integration when enabled.'u'Test MT integration when enabled.'b'Test translation and event emission (with mocks).'u'Test translation and event emission (with mocks).'b'mock-provider'u'mock-provider'b'seg001'u'seg001'b'Test error handling in MT integration.'u'Test error handling in MT integration.'b'Translation error'u'Translation error'b'Test MT status reporting.'u'Test MT status reporting.'b'mock'u'mock'u'guff.LoquiLex.tests.test_mt_integration'u'LoquiLex.tests.test_mt_integration'u'tests.test_mt_integration'u'test_mt_integration'Test MT registry and provider loading.loquilex.mt.core.registryloquilex.mt.core.typesMockProviderMock provider for testing registry.mock-mock-modeltest_registry_operationsTest provider registration and lookup.test-mockmock-en-zh-Hans-hellotest_registry_unknown_providerTest error handling for unknown providers.Unknown MT provider: nonexistentnonexistenttest_mt_module_imports_without_heavy_depsTest that MT module can be imported without heavy dependencies.loquilex.mtfailMT module import requires heavy dependencies: Skip MT provider tests in offline modetest_ct2_provider_registrationTest that CT2 providers register correctly (when deps available).loquilex.mt.providersCTranslate2 or transformers not available# Register mock provider# Check it's available# Create instance# Test basic functionality# This tests offline-first principle - importing loquilex.mt should not# require ctranslate2, transformers, etc.# Should be able to access registry functions# Should be able to access core types# If this fails, it means heavy deps are imported at module level# Import providers to trigger registration# Should have registered CT2 providers if dependencies available# This test is gated to run only when not in offline mode# Don't actually create since it requires model files# Dependencies not available, skipb'Test MT registry and provider loading.'u'Test MT registry and provider loading.'b'Mock provider for testing registry.'u'Mock provider for testing registry.'b'mock-'u'mock-'b'mock-model'u'mock-model'b'Test provider registration and lookup.'u'Test provider registration and lookup.'b'test-mock'u'test-mock'b'mock-en-zh-Hans-hello'u'mock-en-zh-Hans-hello'b'Test error handling for unknown providers.'u'Test error handling for unknown providers.'b'Unknown MT provider: nonexistent'u'Unknown MT provider: nonexistent'b'nonexistent'u'nonexistent'b'Test that MT module can be imported without heavy dependencies.'u'Test that MT module can be imported without heavy dependencies.'b'MT module import requires heavy dependencies: 'u'MT module import requires heavy dependencies: 'b'Skip MT provider tests in offline mode'u'Skip MT provider tests in offline mode'b'Test that CT2 providers register correctly (when deps available).'u'Test that CT2 providers register correctly (when deps available).'b'CTranslate2 or transformers not available'u'CTranslate2 or transformers not available'u'guff.LoquiLex.tests.test_mt_registry'u'LoquiLex.tests.test_mt_registry'u'tests.test_mt_registry'u'test_mt_registry'parametrizeenv_vartest_offline_env_vars_setEnsure required offline environment variables are set.Environment variable  is not set.b'env_var'u'env_var'b'Ensure required offline environment variables are set.'u'Ensure required offline environment variables are set.'b'Environment variable 'u'Environment variable 'b' is not set.'u' is not set.'u'guff.LoquiLex.tests.test_offline_env'u'LoquiLex.tests.test_offline_env'u'tests.test_offline_env'u'test_offline_env'Test network isolation and offline behavior in tests.usefixturestest_offline_network_guard_blocks_externalTest that the network guard blocks outbound connections to non-local hosts.Blocked outbound connection toexample.com8.8.8.8test_offline_network_guard_allows_localhostTest that the network guard allows localhost connections.allowed_hosts12345Blocked outbound connectionNetwork guard incorrectly blocked localhost connection to Test that offline environment variables are properly set.expected_offline_varsLX_OFFLINE is not '1'; skipping offline env var test.varexpected_valueExpected # Note: ::1 (IPv6 localhost) is allowed alongside 127.0.0.1 for macOS/Linux loopback compatibility# This should be blocked by the forbid_network fixture# These should be allowed# Try to connect - this will likely fail due to no server listening,# but it should NOT fail with our "Blocked outbound connection" error# Expected - no server listening on that port# Some other RuntimeError is unexpected but not our concern# Only run this test if LX_OFFLINE is '1'b'Test network isolation and offline behavior in tests.'u'Test network isolation and offline behavior in tests.'b'forbid_network'u'forbid_network'b'Test that the network guard blocks outbound connections to non-local hosts.'u'Test that the network guard blocks outbound connections to non-local hosts.'b'Blocked outbound connection to'u'Blocked outbound connection to'b'example.com'u'example.com'b'8.8.8.8'u'8.8.8.8'b'Test that the network guard allows localhost connections.'u'Test that the network guard allows localhost connections.'b'Blocked outbound connection'u'Blocked outbound connection'b'Network guard incorrectly blocked localhost connection to 'u'Network guard incorrectly blocked localhost connection to 'b'Test that offline environment variables are properly set.'u'Test that offline environment variables are properly set.'b'LX_OFFLINE is not '1'; skipping offline env var test.'u'LX_OFFLINE is not '1'; skipping offline env var test.'b'Expected 'u'Expected 'u'guff.LoquiLex.tests.test_offline_isolation'u'LoquiLex.tests.test_offline_isolation'u'tests.test_offline_isolation'u'test_offline_isolation'test_ensure_dir_creates_relativeguardsafe_dirtest_ensure_dir_rejects_escapeotheroutsidetest_ensure_file_rejects_empty_name../b'sessions'u'sessions'b'other'u'other'b'../'u'../'u'guff.LoquiLex.tests.test_path_guard'u'LoquiLex.tests.test_path_guard'u'tests.test_path_guard'u'test_path_guard'loquilex.security.path_guardrootsstorageexport../../abs./././../../sub/..//..//dir/../../..test_resolve_relative_rejects_traversalname,suffix.txtsub-filenested_oksub__name.logtest_ensure_file_accepts_simple_names../etc/passwddir/%2e%2edir\..\file..\dir/...\.\..\..test_ensure_file_sanitizes_and_stays_in_roottest_resolve_relative_allows_non_escaping_cases# Even with traversal chars, sanitisation collapses to safe stem in storage# literal string, not decoded; stays inside base# backslashes are not separators on POSIX# reduces to base, still inside allowed rootb'storage'u'storage'b'export'u'export'b'fragment'u'fragment'b'../..'u'../..'b'/abs'u'/abs'b'./././../../'u'./././../../'b'sub/..//..//'u'sub/..//..//'b'dir/../../..'u'dir/../../..'b'name,suffix'u'name,suffix'b'file'u'file'b'.txt'u'.txt'b'sub-file'u'sub-file'b'nested_ok'u'nested_ok'b'sub__name'u'sub__name'b'.log'u'.log'b'../etc/passwd'u'../etc/passwd'b'dir/%2e%2e'u'dir/%2e%2e'b'dir\..\file'u'dir\..\file'b'..\'u'..\'b'dir/..'u'dir/..'b'.\.\..\..'u'.\.\..\..'u'LoquiLex.tests.security.test_path_guard'u'LoquiLex.tests.security'u'tests.security.test_path_guard'u'tests.security'u'security.test_path_guard'test_storage_info_traversal_rejectedparams# Provide suspicious traversal-ish path; server should return generic 400u'LoquiLex.tests.api.test_path_traversal_rejection'u'LoquiLex.tests.api'u'tests.api.test_path_traversal_rejection'u'tests.api'u'api.test_path_traversal_rejection'u'test_path_traversal_rejection'Unit tests for resilient communications features.SystemHeartbeatDataget_last_messageGet the last sent message as parsed JSON.No messages sentTestResilientCommsTest resilient communications features.test_session_resume_within_windowTest successful session resume within TTL window.temp_wsmock_wsresume_envelopetest_session_resume_expiredTest session resume when TTL has expired.new_msgtest_session_resume_wrong_session_idTest session resume with wrong session ID.wrong_sessionsession_id_mismatchtest_session_resume_wrong_epochTest session resume with wrong epoch.999epoch_mismatchSystem heartbeat causes infinite loop in testsasyncio.sleeptest_system_heartbeat_telemetrymock_sleepTest system heartbeat with telemetry.queue_depthsdrop_counts2025-01-01T00:00:00Ztst_mono_mslatency_metricssystem_hb_data_create_envelopeSYSTEM_HEARTBEATsystem_hb_envelopeheartbeat_msgsystem.heartbeatNeed to fix ReplayBuffer TTL setuptest_bounded_replay_buffer_integrationTest bounded replay buffer with TTL cleanup.LX_WS_RESUME_TTL_SECavailable_msgstest_telemetry_summaryTest telemetry summary collection.test1test1 finaluptime_secondsdrop_totalsconnectionstest_queue_drop_notificationTest queue drop notification emission.emit_queue_dropdrop_msgqueue.droptest_environment_configurationTest environment variable configuration._outbound_queuesoutbound_queue# Add some messages to replay buffer# Resume session# Should receive: snapshot, replay message, ack# Check snapshot response# Very short TTL for testing (1 second)# Add message to replay buffer# Wait for TTL to expire# Should receive session.new due to expiration# Try to resume with wrong session ID# Should receive session.new due to session ID mismatch# Try to resume with wrong epoch# Wrong epoch# Should receive session.new due to epoch mismatch# For type checker# Fast heartbeat for test# Add some data to queues to test telemetry# Mock the sleep and manually create/send heartbeat to avoid infinite loop# Find system heartbeat message# Use very small buffer for testing# Send more messages than buffer capacity# Buffer should be at capacity (2), oldest dropped# Messages after seq 1 should still be available (msg2, msg3)# Add some events to generate telemetry# Get telemetry summary# Emit a queue drop notification# Should have sent a queue.drop message# Test custom environment values using new variable names# Test outbound queue creation uses env var# Check that outbound queue was created with correct sizeb'Unit tests for resilient communications features.'u'Unit tests for resilient communications features.'b'Get the last sent message as parsed JSON.'u'Get the last sent message as parsed JSON.'b'No messages sent'u'No messages sent'b'Test resilient communications features.'u'Test resilient communications features.'b'Test successful session resume within TTL window.'u'Test successful session resume within TTL window.'b'epoch'u'epoch'b'Test session resume when TTL has expired.'u'Test session resume when TTL has expired.'b'Test session resume with wrong session ID.'u'Test session resume with wrong session ID.'b'wrong_session'u'wrong_session'b'session_id_mismatch'u'session_id_mismatch'b'Test session resume with wrong epoch.'u'Test session resume with wrong epoch.'b'epoch_mismatch'u'epoch_mismatch'b'System heartbeat causes infinite loop in tests'u'System heartbeat causes infinite loop in tests'b'asyncio.sleep'u'asyncio.sleep'b'Test system heartbeat with telemetry.'u'Test system heartbeat with telemetry.'b'2025-01-01T00:00:00Z'u'2025-01-01T00:00:00Z'b'system.heartbeat'u'system.heartbeat'b'queue_depths'u'queue_depths'b'drop_counts'u'drop_counts'b'Need to fix ReplayBuffer TTL setup'u'Need to fix ReplayBuffer TTL setup'b'Test bounded replay buffer with TTL cleanup.'u'Test bounded replay buffer with TTL cleanup.'b'LX_WS_RESUME_TTL_SEC'u'LX_WS_RESUME_TTL_SEC'b'Test telemetry summary collection.'u'Test telemetry summary collection.'b'test1'u'test1'b'test1 final'u'test1 final'b'uptime_seconds'u'uptime_seconds'b'drop_totals'u'drop_totals'b'connections'u'connections'b'Test queue drop notification emission.'u'Test queue drop notification emission.'b'queue.drop'u'queue.drop'b'Test environment variable configuration.'u'Test environment variable configuration.'b'20'u'20'b'32'u'32'b'200'u'200'u'guff.LoquiLex.tests.test_resilient_comms'u'LoquiLex.tests.test_resilient_comms'u'tests.test_resilient_comms'u'test_resilient_comms'Resource Management Tests: Ensure clean termination and release of all resources.

This module tests proper cleanup of threads, asyncio tasks, subprocesses,
and other resources across normal and error conditions.
MagicMockTestStreamingSessionResourceManagementTest resource cleanup for StreamingSession.test_context_manager_cleanupTest that async context manager properly cleans up resources./tmp/test_sessiontest_contexttest_destructor_cleanupTest that destructor properly cleans up resources.stop_evtdummy_threadTestSessionResourceManagementTest resource cleanup for Session.test_destructor_handles_subprocess_cleanupTest that destructor properly handles subprocess cleanup.TestSessionManagerResourceManagementTest resource cleanup for SessionManager.test_shutdown_cleans_all_resourcesTest that shutdown method properly cleans up all resources.threading.Threadmock_threadmock_thread_instancemock_sessionmock_protocoltest_jobtest_destructor_sets_stop_flagTest that destructor sets stop flag for background threads.TestBoundedQueueResourceManagementTest resource cleanup for BoundedQueue.test_cleanup_method_clears_resourcesTest that cleanup method properly clears resources.test_destructor_clears_queueTest that destructor clears queue references.TestRollingTextFileResourceManagementTest resource cleanup for RollingTextFile.test_context_manager_supportTest that context manager is properly supported./tmp/test_rolling_file.txttest_pathwritertest lineTestResourceLeakDetectionTest resource leak detection using tracemalloc.test_memory_usage_boundedTest that memory usage remains bounded during normal operations.queuesqueue_item_snapshot1snapshot2statisticsstats1stats2test_thread_cleanup_after_operationsTest that thread count remains bounded after operations.threadsTestWSProtocolManagerResourceCleanupTest resource cleanup for WSProtocolManager.Test that context manager properly cleans up resources._hb_task_hb_timeout_task_system_hb_tasktest_close_method_cleanupTest that close method properly cleans up resources.TestAbruptShutdownScenariosTest resource cleanup during abrupt shutdowns and error conditions.test_session_cleanup_during_exceptionTest that resources are cleaned up even when exceptions occur.test_exception_handlingSimulated errortest_manager_cleanup_with_active_sessionsTest manager cleanup when sessions are still active.mock_session1mock_session2session1session2mock_protocol1mock_protocol2# Session should be initialized# After context exit, cleanup should have been called# Simulate an audio thread. Important note for future maintainers:# Historically this test used a closure that referenced `session` in# the `dummy_thread` function. That pattern caused intermittent# failures and a NameError when sessions were garbage-collected or# when test runners attempted to introspect thread locals. To avoid# capturing the `session` object (and to ensure the thread can# observe the stop condition without keeping the session alive), we# capture only the session's `_stop_evt` and reference that in the# thread. Do not revert this to closing over `session`  automated# edits have reverted this before and reintroduced flakiness.# Delete session - destructor should clean up# Thread should be stopped# Note: We can't directly verify this without the original reference,# but the destructor should have set the stop event# Process should have been terminated# Mock some active sessions and protocols# Mock download process# Verify cleanup was called# Add a mock session# Delete manager - destructor should clean up# Stop should have been called on session# Add some items# Verify items are there# Verify resources are cleared# Delete queue - destructor should clear# No assertions needed - just verify no exceptions# Context manager should exit cleanly# File operations use atomic writes with proper context managers# Simulate some operations# Take snapshot# Cleanup queues# Take another snapshot# Memory should not have grown significantly# (This is a basic check - in practice you'd want more sophisticated leak detection)# Just verify we can take snapshots without errors# Create some threaded operations# Let threads run briefly# Stop all threads# Thread count should return to normal# Allow for some variance in thread count# Manager should be properly initialized# After context exit, tasks should be cleaned up# Simulate some connections and tasks# Close should clean up everything# Verify cleanup# Simulate an error during processing# Expected# Session should still be cleaned up despite the exception# Add mock active sessions# Mock active protocol managers# Shutdown should clean up all sessions# Verify all sessions were stoppedb'Resource Management Tests: Ensure clean termination and release of all resources.

This module tests proper cleanup of threads, asyncio tasks, subprocesses,
and other resources across normal and error conditions.
'u'Resource Management Tests: Ensure clean termination and release of all resources.

This module tests proper cleanup of threads, asyncio tasks, subprocesses,
and other resources across normal and error conditions.
'b'Test resource cleanup for StreamingSession.'u'Test resource cleanup for StreamingSession.'b'Test that async context manager properly cleans up resources.'u'Test that async context manager properly cleans up resources.'b'none'u'none'b'/tmp/test_session'u'/tmp/test_session'b'Test that destructor properly cleans up resources.'u'Test that destructor properly cleans up resources.'b'Test resource cleanup for Session.'u'Test resource cleanup for Session.'b'Test that destructor properly handles subprocess cleanup.'u'Test that destructor properly handles subprocess cleanup.'b'Test resource cleanup for SessionManager.'u'Test resource cleanup for SessionManager.'b'Test that shutdown method properly cleans up all resources.'u'Test that shutdown method properly cleans up all resources.'b'threading.Thread'u'threading.Thread'b'test_job'u'test_job'b'Test that destructor sets stop flag for background threads.'u'Test that destructor sets stop flag for background threads.'b'Test resource cleanup for BoundedQueue.'u'Test resource cleanup for BoundedQueue.'b'Test that cleanup method properly clears resources.'u'Test that cleanup method properly clears resources.'b'Test that destructor clears queue references.'u'Test that destructor clears queue references.'b'Test resource cleanup for RollingTextFile.'u'Test resource cleanup for RollingTextFile.'b'Test that context manager is properly supported.'u'Test that context manager is properly supported.'b'/tmp/test_rolling_file.txt'u'/tmp/test_rolling_file.txt'b'test line'u'test line'b'Test resource leak detection using tracemalloc.'u'Test resource leak detection using tracemalloc.'b'Test that memory usage remains bounded during normal operations.'u'Test that memory usage remains bounded during normal operations.'b'queue_'u'queue_'b'item_'u'item_'b'Test that thread count remains bounded after operations.'u'Test that thread count remains bounded after operations.'b'Test resource cleanup for WSProtocolManager.'u'Test resource cleanup for WSProtocolManager.'b'Test that context manager properly cleans up resources.'u'Test that context manager properly cleans up resources.'b'Test that close method properly cleans up resources.'u'Test that close method properly cleans up resources.'b'Test resource cleanup during abrupt shutdowns and error conditions.'u'Test resource cleanup during abrupt shutdowns and error conditions.'b'Test that resources are cleaned up even when exceptions occur.'u'Test that resources are cleaned up even when exceptions occur.'b'Simulated error'u'Simulated error'b'Test manager cleanup when sessions are still active.'u'Test manager cleanup when sessions are still active.'b'session1'u'session1'b'session2'u'session2'u'guff.LoquiLex.tests.test_resource_management'u'LoquiLex.tests.test_resource_management'u'tests.test_resource_management'u'test_resource_management'test_safe_broadcast_no_loop_does_not_raisedummy# NOTE: This test intentionally avoids creating or querying an asyncio# event loop. On Python 3.12 asyncio's event loop policy will raise a# RuntimeError when `asyncio.get_event_loop()` is called and no loop has# been set for the current thread. Previous automated edits reverted the# defensive check and reintroduced `get_event_loop()` usage which caused# spurious test failures in CI. Keep this test minimal: it only ensures# that `_safe_broadcast` is a no-op when there is no running loop.# Should not raise even if no event loop is setb'dummy'u'dummy'u'guff.LoquiLex.tests.test_safe_broadcast'u'LoquiLex.tests.test_safe_broadcast'u'tests.test_safe_broadcast'u'test_safe_broadcast'Integration tests for SessionState with session storage.SessionStateTestSessionStateIntegrationTest SessionState integration with session storage.test_session_state_storage_initializationTest that SessionState automatically initializes session storage.2023-01-01T00:00:00Zt0_wallsession_statetest_session_state_storage_with_env_configTest that SessionState respects environment configuration.LX_SESSION_MAX_COMMITS512000LX_SESSION_MAX_SIZE_BYTESLX_SESSION_MAX_AGE_SECONDStest_add_session_commitTest adding commits through SessionState.add_session_committest_get_session_snapshotTest getting session storage snapshot.translationprimerocompletecommit_typestest_get_session_storage_statsTest getting session storage statistics.message test_session_state_with_sequence_trackingTest that commits use correct sequence numbers.next_seqtest_session_state_storage_cappingTest that session storage respects capping limits.textsmessage 4message 3message 2message 0message 1test_session_state_without_storageTest graceful handling when storage is not available.# Session storage should be initialized# Add a transcript commit# Should use current session seq# Add some commits# Check that different commit types are present# Advance sequence number# seq = 1# seq = 2# Should match current session seq# Create session with small storage limits# Add more commits than limit# Should be capped at 3 commits# Should keep the most recent commits# Most recent# Oldest dropped# Manually disable storage to test fallback# Should return None gracefullyb'Integration tests for SessionState with session storage.'u'Integration tests for SessionState with session storage.'b'Test SessionState integration with session storage.'u'Test SessionState integration with session storage.'b'Test that SessionState automatically initializes session storage.'u'Test that SessionState automatically initializes session storage.'b'2023-01-01T00:00:00Z'u'2023-01-01T00:00:00Z'b'Test that SessionState respects environment configuration.'u'Test that SessionState respects environment configuration.'b'50'u'50'b'LX_SESSION_MAX_COMMITS'u'LX_SESSION_MAX_COMMITS'b'512000'u'512000'b'LX_SESSION_MAX_SIZE_BYTES'u'LX_SESSION_MAX_SIZE_BYTES'b'1800.0'u'1800.0'b'LX_SESSION_MAX_AGE_SECONDS'u'LX_SESSION_MAX_AGE_SECONDS'b'Test adding commits through SessionState.'u'Test adding commits through SessionState.'b'confidence'u'confidence'b'Test getting session storage snapshot.'u'Test getting session storage snapshot.'b'translation'u'translation'b'primero'u'primero'b'complete'u'complete'b'Test getting session storage statistics.'u'Test getting session storage statistics.'b'message 'u'message 'b'Test that commits use correct sequence numbers.'u'Test that commits use correct sequence numbers.'b'Test that session storage respects capping limits.'u'Test that session storage respects capping limits.'b'message 4'u'message 4'b'message 3'u'message 3'b'message 2'u'message 2'b'message 0'u'message 0'b'message 1'u'message 1'b'Test graceful handling when storage is not available.'u'Test graceful handling when storage is not available.'u'guff.LoquiLex.tests.test_session_state_integration'u'LoquiLex.tests.test_session_state_integration'u'tests.test_session_state_integration'u'test_session_state_integration'Unit tests for SessionStorage with rolling history and capped storage.loquilex.api.session_storageTestStorageConfigTest storage configuration validation.test_default_valuesTest default configuration values.test_validation_successTest valid configuration passes validation.512test_validation_negative_commitsTest validation fails for negative max_commits.test_validation_negative_sizeTest validation fails for negative max_size_bytes.test_validation_negative_ageTest validation fails for negative max_age_seconds.TestSessionCommitTest session commit creation and size calculation.Test commit created with default values.test_custom_valuesTest commit created with custom values.42test_size_calculationTest that size calculation increases with data size.hismall_commithello world large_commitTestSessionStorageTest session storage functionality.Test storage initialization.test_initialization_with_configTest storage initialization with custom config.test_add_commit_basicTest adding a basic commit.test_add_multiple_commitsTest adding multiple commits.test_get_commits_allTest retrieving all commits.102.0thirdtest_get_commits_with_limitTest retrieving commits with limit.test_get_commits_by_typeTest filtering commits by type.transcript1translation1transcript2processingtranscript_commitstranslation_commitstest_get_commits_since_timestampTest filtering commits by timestamp.time_mocktest_count_based_cappingTest that storage caps by number of commits.test_time_based_cappingTest that storage caps by commit age.test_size_based_cappingTest that storage caps by total size.large_datatest_get_snapshotTest snapshot generation.holatest_get_snapshot_with_limitTest snapshot generation with commit limit.test_clear_storageTest clearing all commits.cleared_counttest_thread_safetyTest basic thread safety of storage operations.add_commitsthread message # 1MB# 1 hour# Should not raise# UUID should be generated# Should have current time# Should calculate size# Default# Add several commits# Add commits with different timestamps# Should be ordered by timestamp (most recent first)# Add 5 commits# Create a mock time function# Get commits since 150.0 (should only get the new one)# Add more commits than the limit# Should be capped# 2 oldest dropped# Create a mock time function that we can control# Create storage with mocked time function# Add old commit# Add recent commit and trigger cleanup (10 seconds later)# Old commit should be dropped# Set a very small size limit# Add commits with large data until size limit is exceeded# Large text data# This should trigger size-based dropping# Check commit structure in snapshot# Limited by max_commits# Small delay to increase chance of race conditions# Run multiple threads adding commits# Should not have any errors# Should have all commits (3 threads * 10 commits each)b'Unit tests for SessionStorage with rolling history and capped storage.'u'Unit tests for SessionStorage with rolling history and capped storage.'b'Test storage configuration validation.'u'Test storage configuration validation.'b'Test default configuration values.'u'Test default configuration values.'b'Test valid configuration passes validation.'u'Test valid configuration passes validation.'b'Test validation fails for negative max_commits.'u'Test validation fails for negative max_commits.'b'Test validation fails for negative max_size_bytes.'u'Test validation fails for negative max_size_bytes.'b'Test validation fails for negative max_age_seconds.'u'Test validation fails for negative max_age_seconds.'b'Test session commit creation and size calculation.'u'Test session commit creation and size calculation.'b'Test commit created with default values.'u'Test commit created with default values.'b'Test commit created with custom values.'u'Test commit created with custom values.'b'Test that size calculation increases with data size.'u'Test that size calculation increases with data size.'b'hi'u'hi'b'hello world 'u'hello world 'b'Test session storage functionality.'u'Test session storage functionality.'b'Test storage initialization.'u'Test storage initialization.'b'Test storage initialization with custom config.'u'Test storage initialization with custom config.'b'Test adding a basic commit.'u'Test adding a basic commit.'b'Test adding multiple commits.'u'Test adding multiple commits.'b'Test retrieving all commits.'u'Test retrieving all commits.'b'third'u'third'b'Test retrieving commits with limit.'u'Test retrieving commits with limit.'b'Test filtering commits by type.'u'Test filtering commits by type.'b'transcript1'u'transcript1'b'translation1'u'translation1'b'transcript2'u'transcript2'b'processing'u'processing'b'Test filtering commits by timestamp.'u'Test filtering commits by timestamp.'b'Test that storage caps by number of commits.'u'Test that storage caps by number of commits.'b'Test that storage caps by commit age.'u'Test that storage caps by commit age.'b'Test that storage caps by total size.'u'Test that storage caps by total size.'b'Test snapshot generation.'u'Test snapshot generation.'b'hola'u'hola'b'Test snapshot generation with commit limit.'u'Test snapshot generation with commit limit.'b'Test clearing all commits.'u'Test clearing all commits.'b'Test basic thread safety of storage operations.'u'Test basic thread safety of storage operations.'b'thread message 'u'thread message 'u'guff.LoquiLex.tests.test_session_storage'u'LoquiLex.tests.test_session_storage'u'tests.test_session_storage'u'test_session_storage'Test snapshot rehydrate functionality.TestSnapshotRehydratetest_snapshot_with_finalized_transcriptTest that snapshot includes actual finalized transcript from session.This is a partialmock_snapshot_datamock_ws2test_resume_metrics_trackingTest that resume operations are properly tracked in metrics.avg_replay_duration_mstest_resume_miss_trackingTest that failed resume attempts are tracked as misses.test_monotonic_timing_in_envelopesTest that all envelopes include monotonic timing (t_mono_ns).welcome_msgpartial_msgtest_final_seq_range_in_snapshotTest that final_seq_range is properly included in snapshot data.First segment.Second segment.# Create protocol manager with snapshot callback# Mock session snapshot data# Add connection and some messages to replay buffer# Add some domain events# Remove connection to simulate disconnect# Reconnect and resume# Should have sent: snapshot, replay messages, ack# Check snapshot message contains actual data# Mock session snapshot callback# Simulate resume request# Check metrics# Wrong session ID should be a miss# Welcome message should have monotonic timing# Domain events should have monotonic timing# Should be later# Mock session snapshot with final_seq_range# This final covers partials with seq 1, 2, 3# This final covers partials with seq 4, 5# Check snapshot contains final_seq_rangeb'Test snapshot rehydrate functionality.'u'Test snapshot rehydrate functionality.'b'Test that snapshot includes actual finalized transcript from session.'u'Test that snapshot includes actual finalized transcript from session.'b'This is a partial'u'This is a partial'b'Test that resume operations are properly tracked in metrics.'u'Test that resume operations are properly tracked in metrics.'b'avg_replay_duration_ms'u'avg_replay_duration_ms'b'Test that failed resume attempts are tracked as misses.'u'Test that failed resume attempts are tracked as misses.'b'Test that all envelopes include monotonic timing (t_mono_ns).'u'Test that all envelopes include monotonic timing (t_mono_ns).'b'Test that final_seq_range is properly included in snapshot data.'u'Test that final_seq_range is properly included in snapshot data.'b'First segment.'u'First segment.'b'Second segment.'u'Second segment.'u'guff.LoquiLex.tests.test_snapshot_rehydrate'u'LoquiLex.tests.test_snapshot_rehydrate'u'tests.test_snapshot_rehydrate'u'test_snapshot_rehydrate'Tests for storage API endpoints.Test client for the FastAPI app.test_get_storage_info_default_pathTest getting storage info for default path.test_get_storage_info_custom_pathTest getting storage info for custom path./storage/info?path=/tmptest_get_storage_info_invalid_pathTest getting storage info for invalid path./storage/info?path=/nonexistent/invalid/pathtest_set_base_directory_valid_pathTest setting a valid base directory./tmp/loquilex-testvalid and writabletest_set_base_directory_invalid_pathTest setting an invalid base directory./root/protectedpermission deniedtest_set_base_directory_relative_pathTest setting a relative path (should be rejected).relative/pathtest_set_base_directory_missing_pathTest setting base directory without path parameter.422# Validation errorb'Tests for storage API endpoints.'u'Tests for storage API endpoints.'b'Test client for the FastAPI app.'u'Test client for the FastAPI app.'b'Test getting storage info for default path.'u'Test getting storage info for default path.'b'total_bytes'u'total_bytes'b'free_bytes'u'free_bytes'b'used_bytes'u'used_bytes'b'percent_used'u'percent_used'b'writable'u'writable'b'Test getting storage info for custom path.'u'Test getting storage info for custom path.'b'/storage/info?path=/tmp'u'/storage/info?path=/tmp'b'Test getting storage info for invalid path.'u'Test getting storage info for invalid path.'b'/storage/info?path=/nonexistent/invalid/path'u'/storage/info?path=/nonexistent/invalid/path'b'Test setting a valid base directory.'u'Test setting a valid base directory.'b'/tmp/loquilex-test'u'/tmp/loquilex-test'b'valid'u'valid'b'valid and writable'u'valid and writable'b'Test setting an invalid base directory.'u'Test setting an invalid base directory.'b'/root/protected'u'/root/protected'b'permission denied'u'permission denied'b'Test setting a relative path (should be rejected).'u'Test setting a relative path (should be rejected).'b'relative/path'u'relative/path'b'absolute'u'absolute'b'Test setting base directory without path parameter.'u'Test setting base directory without path parameter.'u'guff.LoquiLex.tests.test_storage_api'u'LoquiLex.tests.test_storage_api'u'tests.test_storage_api'u'test_storage_api'Tests for streaming ASR pipeline and partial/final aggregator.TestPartialFinalAggregatorTest partial/final aggregator functionality.test_partial_event_processingTest basic partial event processing.emitted_eventstest_final_event_processingTest basic final event processing.world.test_duplicate_final_preventionTest that duplicate finals are prevented.final2test_partials_after_final_ignoredTest that partials are ignored after segment is finalized.hello world latelate_partialtest_partial_backpressureTest that partial queue has bounded size with LRU eviction.seg0test_snapshot_generationTest snapshot generation for reconnect scenarios.Final text live_segCurrent partialCurrenttest_stats_trackingTest statistics tracking.TestFakeStreamingASRTest fake streaming ASR for offline testing.test_deterministic_behaviorTest that fake ASR produces deterministic events.fake_asrtest_snapshot_functionalitytest_force_finalizeTest force finalization.TestIntegrationIntegration tests combining components.test_streaming_asr_with_aggregatorTest streaming ASR with aggregator integration.integration_testall_eventsevent_handlerpartial_eventsfinal_eventsseq_numbersTestAsyncBridgeTest thread-safe asyncio bridge in StreamingSession.test_async_bridge_with_event_loopTest that call_soon_threadsafe schedules broadcast on the event loop.MockLoopscheduledmock_looptest_sidmock_aggregatormock_add_partial_partial_eventbroadcast_callstest_segasyncio.get_running_loopNo running looptest_async_bridge_no_event_loop_mock_get_loopTest fallback behavior when no event loop is available.# Create test partial event# Create test final event# Create identical final events# Same segment ID# Add first final - should emit# Add duplicate final - should not emit# No new event# Add partial# Add final# Add another partial for same segment - should be ignored# Same segment, but it's finalized# Add 3 partials for different segments# Should have emitted 3 events but only keep 2 in memory# First segment should be evicted# Add some finals# Add a current partial# Get snapshot# Initial stats# Add partial and final# Check updated stats# seg1 partial still active# seg2 final added# Process several audio chunks# Should get 3 partials and 1 final# Check final event# Should end with punctuation# Process some chunks to generate state# Process a chunk to create partial state# Force finalize# Should get a final event# Use fake ASR for offline testing# Process audio to generate events# Check that events were processed through aggregator# Should have both partials and finals# Check sequence numbers are monotonic# Get snapshot after processing# Create a mock event loop with call_soon_threadsafe# Immediately execute for test# Create session# Mock aggregator to trigger emit_event# Call _on_partial (simulates thread context)# Verify that call_soon_threadsafe was called and broadcast function was triggered# Create session without event loop# No loop stored# Make add_partial call the emit_fn with a dummy event# This should not crash and should handle the RuntimeError gracefully# Should have logged the partial text since broadcast failed# (In real scenario, this would print to console)b'Tests for streaming ASR pipeline and partial/final aggregator.'u'Tests for streaming ASR pipeline and partial/final aggregator.'b'Test partial/final aggregator functionality.'u'Test partial/final aggregator functionality.'b'Test basic partial event processing.'u'Test basic partial event processing.'b'Test basic final event processing.'u'Test basic final event processing.'b'world.'u'world.'b'Test that duplicate finals are prevented.'u'Test that duplicate finals are prevented.'b'Test that partials are ignored after segment is finalized.'u'Test that partials are ignored after segment is finalized.'b'hello world late'u'hello world late'b'Test that partial queue has bounded size with LRU eviction.'u'Test that partial queue has bounded size with LRU eviction.'b'seg0'u'seg0'b'Test snapshot generation for reconnect scenarios.'u'Test snapshot generation for reconnect scenarios.'b'final_seg'u'final_seg'b'Final text 'u'Final text 'b'live_seg'u'live_seg'b'Current partial'u'Current partial'b'Current'u'Current'b'Test statistics tracking.'u'Test statistics tracking.'b'Test fake streaming ASR for offline testing.'u'Test fake streaming ASR for offline testing.'b'Test that fake ASR produces deterministic events.'u'Test that fake ASR produces deterministic events.'b'Test force finalization.'u'Test force finalization.'b'Integration tests combining components.'u'Integration tests combining components.'b'Test streaming ASR with aggregator integration.'u'Test streaming ASR with aggregator integration.'b'integration_test'u'integration_test'b'Test thread-safe asyncio bridge in StreamingSession.'u'Test thread-safe asyncio bridge in StreamingSession.'b'Test that call_soon_threadsafe schedules broadcast on the event loop.'u'Test that call_soon_threadsafe schedules broadcast on the event loop.'b'test_sid'u'test_sid'b'test_seg'u'test_seg'b'asyncio.get_running_loop'u'asyncio.get_running_loop'b'No running loop'u'No running loop'b'Test fallback behavior when no event loop is available.'u'Test fallback behavior when no event loop is available.'u'guff.LoquiLex.tests.test_streaming_asr'u'LoquiLex.tests.test_streaming_asr'u'tests.test_streaming_asr'u'test_streaming_asr'Integration tests for streaming ASR pipeline with WebSocket API.anyioTestStreamingIntegrationTest streaming ASR integration with WebSocket API.test_create_streaming_sessionTest creating a streaming ASR session.test_asr_snapshot_endpointTest ASR snapshot endpoint for streaming sessions./asr/snapshottest_regular_session_no_asr_snapshotTest that regular sessions don't support ASR snapshots.test_websocket_streaming_eventsTest WebSocket events for streaming sessions (mock audio).loquilex.audio.capture.capture_streammock_captureTestStreamingConfigurationTest streaming ASR configuration and validation.test_streaming_config_validationTest validation of streaming configuration parameters.test_model_id_validationTest ASR model ID validation.model_idstest_device_selectionTest device selection for streaming sessions.TestEndToEndStreamingEnd-to-end tests for streaming ASR (heavier tests).test_full_streaming_pipelineTest the full streaming pipeline with realistic simulation.e2e_testevents_receivedTestSnapshotStatusTest snapshot status correctness for streaming sessions.test_streaming_session_status_runningTest that streaming session shows 'running' status while audio thread is alive./snapshottest_streaming_session_status_stoppedTest that streaming session shows 'stopped' status after stopping.TestErrorHygieneTest that HTTP 500 responses don't leak exception details.test_metrics_error_no_exception_leakTest that metrics endpoint doesn't leak exception text in 500 response.original_get_metricstest error/metricserror_detailtest_snapshot_error_no_exception_leakTest that snapshot endpoint doesn't leak exception text in 500 response.original_get_asr_snapshotsnapshot test error# Clean up# Create streaming session# Small delay to let session initialize# Try to get ASR snapshot# Should either succeed with snapshot or fail gracefully# 503 if not ready yet# Create regular (non-streaming) session# Regular session# Try to get ASR snapshot - should fail# Mock the audio capture to avoid needing real microphone# Mock audio capture returns a stop function# Small delay for session initialization# Get the session from the manager to trigger events manually# Manually trigger ASR events to test the pipeline# Trigger the events# Allow events to propagate# Test passed if we reach here without errors# Test with valid streaming config# Test with various model IDs (should all be accepted)# Some model IDs might not be available, that's OK# Test CPU device (should always work)# Test auto device (should work)# This test would use more realistic audio input# For now, just ensure the components integrate properly# Test component integration# Process several chunks of fake audio# 0.1s at 16kHz# Small delay# Should have received some events# With fake ASR, we should get predictable results# May or may not get partials# May or may not get finals# Test snapshot# Get snapshot - should show running status# Stop the session# Get snapshot - session should be gone (404)# Create regular session (not streaming)# Force an internal error by monkeypatching# Call metrics endpoint# No exception text leaked# Restore original method# Call snapshot endpoint# Should still work since ASR snapshot is optionalb'Integration tests for streaming ASR pipeline with WebSocket API.'u'Integration tests for streaming ASR pipeline with WebSocket API.'b'Test streaming ASR integration with WebSocket API.'u'Test streaming ASR integration with WebSocket API.'b'Test creating a streaming ASR session.'u'Test creating a streaming ASR session.'b'Test ASR snapshot endpoint for streaming sessions.'u'Test ASR snapshot endpoint for streaming sessions.'b'/asr/snapshot'u'/asr/snapshot'b'Test that regular sessions don't support ASR snapshots.'u'Test that regular sessions don't support ASR snapshots.'b'Test WebSocket events for streaming sessions (mock audio).'u'Test WebSocket events for streaming sessions (mock audio).'b'loquilex.audio.capture.capture_stream'u'loquilex.audio.capture.capture_stream'b'_on_partial'u'_on_partial'b'Test streaming ASR configuration and validation.'u'Test streaming ASR configuration and validation.'b'Test validation of streaming configuration parameters.'u'Test validation of streaming configuration parameters.'b'Test ASR model ID validation.'u'Test ASR model ID validation.'b'Test device selection for streaming sessions.'u'Test device selection for streaming sessions.'b'End-to-end tests for streaming ASR (heavier tests).'u'End-to-end tests for streaming ASR (heavier tests).'b'Test the full streaming pipeline with realistic simulation.'u'Test the full streaming pipeline with realistic simulation.'b'e2e_test'u'e2e_test'b'Test snapshot status correctness for streaming sessions.'u'Test snapshot status correctness for streaming sessions.'b'Test that streaming session shows 'running' status while audio thread is alive.'u'Test that streaming session shows 'running' status while audio thread is alive.'b'/snapshot'u'/snapshot'b'Test that streaming session shows 'stopped' status after stopping.'u'Test that streaming session shows 'stopped' status after stopping.'b'Test that HTTP 500 responses don't leak exception details.'u'Test that HTTP 500 responses don't leak exception details.'b'Test that metrics endpoint doesn't leak exception text in 500 response.'u'Test that metrics endpoint doesn't leak exception text in 500 response.'b'get_metrics'u'get_metrics'b'test error'u'test error'b'/metrics'u'/metrics'b'Test that snapshot endpoint doesn't leak exception text in 500 response.'u'Test that snapshot endpoint doesn't leak exception text in 500 response.'b'snapshot test error'u'snapshot test error'u'guff.LoquiLex.tests.test_streaming_integration'u'LoquiLex.tests.test_streaming_integration'u'tests.test_streaming_integration'u'test_streaming_integration'Tests for structured logging and performance metrics.48HOURS_48_IN_SECONDSTestDataRedactorTest sensitive data redaction.test_redact_file_pathsTest file path redaction preserves filename./home/user/project/model.pymodel.pyC:\Users\jane\Documents\secret.txtsecret.txtexpected_filenameext.py.yaml/Users/john/.cache/huggingface/models/bert.jsontest_redact_sensitive_fieldsTest sensitive field redaction.abc123def456secret123/home/user/models/bert.binthis is safesafe_fieldtest_nested_redactionTest nested dictionary redaction./home/user/.cache/models/safe datapublic_infojohnuser_token_123janecred_456usersTestStructuredLoggerTest structured logging functionality.test_basic_loggingTest basic log entry creation.w+Test messagetest_valuetest_fieldtest_data_redactionTest automatic data redaction in logs.Test with sensitive data/home/user/model.binfile_pathsafe_datamodel.bintest_create_logger_factoryTest logger factory function.factory_testfactory_sessionFactory test messagefactory_test_factory_session.jsonlexpected_fileTestPerformanceMetricsTest performance metrics collection.test_latency_recordingTest latency metric recording.175.0test_throughput_recordingTest throughput metric recording.requests_per_sec45.052.048.5test_counters_and_gaugesTest counter and gauge metrics.requests75.5memory_usage1024.06.0test_timer_functionalityTest start/end timer functionality.operation50.0test_timer_error_handlingTest timer error handling for non-existent timers.nonexistent_timertest_threshold_monitoringTest performance threshold monitoring.assert_not_called250.0test_metrics_resetTest metrics reset functionality.TestLogRetentionTest log rotation and cleanup functionality.test_log_rotation_by_sizeTest log file rotation when size limit is exceeded.test.jsonlTest message .1.jsonlRotated log file should existCurrent log file should existtest_log_rotation_keeps_max_filesTest that log rotation respects max_log_files limit.test.*.jsonlrotated_filesShould keep at most 3 rotated files, found test_ci_logger_defaultsTest that CI environment sets appropriate log retention defaults.test_ciCI should set log size limitCI should limit number of log filestest_cleanup_old_logsTest log cleanup functionality.old.jsonlold_logrecent.jsonlrecent_log{"message": "old"}
{"message": "recent"}
old_timeutimeShould delete 1 old log fileOld log should be deletedRecent log should remaintest_log_retention_env_varsTest that environment variables control log retention.Should use env var for sizeShould use env var for max files# Test constants# Test various path formats that should preserve filenames# Should preserve filename for supported file types# Test cache directories (these get fully redacted for security)# Check nested redaction# Check list redaction# Read and verify log entry# Read and verify redaction# filename preserved# Test logging works# Check log file was created# Record some latencies# Test counters# Test gauges# Sleep 10ms# Should be roughly 10ms# Use a mock logger to capture threshold violations# Record below threshold# Record warning threshold# Record critical threshold# Add some data# Reset and verify empty# Create logger with tiny size limit for testing# 1KB limit# Write enough logs to trigger rotation# Check that rotation occurred# Create logger with small limits# Write enough logs to trigger multiple rotations# Count rotated files# CI should set rotation limits automatically# Create some log files with different ages# Make old log appear old using os.utime# 48 hours ago# Clean up files older than 24 hoursb'Tests for structured logging and performance metrics.'u'Tests for structured logging and performance metrics.'b'Test sensitive data redaction.'u'Test sensitive data redaction.'b'Test file path redaction preserves filename.'u'Test file path redaction preserves filename.'b'/home/user/project/model.py'u'/home/user/project/model.py'b'model.py'u'model.py'b'C:\Users\jane\Documents\secret.txt'u'C:\Users\jane\Documents\secret.txt'b'secret.txt'u'secret.txt'b'.py'u'.py'b'.yaml'u'.yaml'b'/Users/john/.cache/huggingface/models/bert.json'u'/Users/john/.cache/huggingface/models/bert.json'b'Test sensitive field redaction.'u'Test sensitive field redaction.'b'abc123def456'u'abc123def456'b'secret123'u'secret123'b'/home/user/models/bert.bin'u'/home/user/models/bert.bin'b'this is safe'u'this is safe'b'safe_field'u'safe_field'b'Test nested dictionary redaction.'u'Test nested dictionary redaction.'b'/home/user/.cache/models/'u'/home/user/.cache/models/'b'model_dir'u'model_dir'b'safe data'u'safe data'b'public_info'u'public_info'b'john'u'john'b'user_token_123'u'user_token_123'b'jane'u'jane'b'cred_456'u'cred_456'b'users'u'users'b'Test structured logging functionality.'u'Test structured logging functionality.'b'Test basic log entry creation.'u'Test basic log entry creation.'b'w+'u'w+'b'Test message'u'Test message'b'test_value'u'test_value'b'test_field'u'test_field'b'Test automatic data redaction in logs.'u'Test automatic data redaction in logs.'b'Test with sensitive data'u'Test with sensitive data'b'/home/user/model.bin'u'/home/user/model.bin'b'file_path'u'file_path'b'model.bin'u'model.bin'b'safe_data'u'safe_data'b'Test logger factory function.'u'Test logger factory function.'b'factory_test'u'factory_test'b'factory_session'u'factory_session'b'Factory test message'u'Factory test message'b'factory_test_factory_session.jsonl'u'factory_test_factory_session.jsonl'b'Test performance metrics collection.'u'Test performance metrics collection.'b'Test latency metric recording.'u'Test latency metric recording.'b'Test throughput metric recording.'u'Test throughput metric recording.'b'requests_per_sec'u'requests_per_sec'b'Test counter and gauge metrics.'u'Test counter and gauge metrics.'b'requests'u'requests'b'memory_usage'u'memory_usage'b'Test start/end timer functionality.'u'Test start/end timer functionality.'b'operation'u'operation'b'Test timer error handling for non-existent timers.'u'Test timer error handling for non-existent timers.'b'nonexistent_timer'u'nonexistent_timer'b'Test performance threshold monitoring.'u'Test performance threshold monitoring.'b'Test metrics reset functionality.'u'Test metrics reset functionality.'b'Test log rotation and cleanup functionality.'u'Test log rotation and cleanup functionality.'b'Test log file rotation when size limit is exceeded.'u'Test log file rotation when size limit is exceeded.'b'test.jsonl'u'test.jsonl'b'Test message 'u'Test message 'b'.1.jsonl'u'.1.jsonl'b'Rotated log file should exist'u'Rotated log file should exist'b'Current log file should exist'u'Current log file should exist'b'Test that log rotation respects max_log_files limit.'u'Test that log rotation respects max_log_files limit.'b'test.*.jsonl'u'test.*.jsonl'b'Should keep at most 3 rotated files, found 'u'Should keep at most 3 rotated files, found 'b'Test that CI environment sets appropriate log retention defaults.'u'Test that CI environment sets appropriate log retention defaults.'b'test_ci'u'test_ci'b'CI should set log size limit'u'CI should set log size limit'b'CI should limit number of log files'u'CI should limit number of log files'b'Test log cleanup functionality.'u'Test log cleanup functionality.'b'old.jsonl'u'old.jsonl'b'recent.jsonl'u'recent.jsonl'b'{"message": "old"}
'u'{"message": "old"}
'b'{"message": "recent"}
'u'{"message": "recent"}
'b'Should delete 1 old log file'u'Should delete 1 old log file'b'Old log should be deleted'u'Old log should be deleted'b'Recent log should remain'u'Recent log should remain'b'Test that environment variables control log retention.'u'Test that environment variables control log retention.'b'test_env'u'test_env'b'Should use env var for size'u'Should use env var for size'b'Should use env var for max files'u'Should use env var for max files'u'guff.LoquiLex.tests.test_structured_logging'u'LoquiLex.tests.test_structured_logging'u'tests.test_structured_logging'u'test_structured_logging'test_rewrite_keeps_single_last_linefinal draftfinal draft
test_append_enforces_max_lines7line line 4line 5line 6test_utf8_and_trailing_newline# Should contain only the latest draft + trailing newline# Kept last 3 lines only# Exactly two lines (plus trailing blank from split)b'final draft'u'final draft'b'final draft
'u'final draft
'b'line 'u'line 'b'line 4'u'line 4'b'line 5'u'line 5'b'line 6'u'line 6'u''u''u'guff.LoquiLex.tests.test_text_io'u'LoquiLex.tests.test_text_io'u'tests.test_text_io'u'test_text_io'test_rolling_text_concurrent_appends_and_rewritesout.txtappenderLrewriterdraft 51# Must end with newline and contain at most max_lines + 1 draft line# Count non-empty linesb'out.txt'u'out.txt'b'L'u'L'b'draft 'u'draft 'u'guff.LoquiLex.tests.test_text_io_concurrency'u'LoquiLex.tests.test_text_io_concurrency'u'tests.test_text_io_concurrency'u'test_text_io_concurrency'test_vtt_srt_append_ordert.vttt.srtb't.vtt'u't.vtt'b't.srt'u't.srt'u'guff.LoquiLex.tests.test_timed_outputs'u'LoquiLex.tests.test_timed_outputs'u'tests.test_timed_outputs'u'test_timed_outputs'cfg_defaults_dtype_kwargs_srt_ts_vtt_tsnormalize_punctuationtest_timestamp_formatting_helpers12.345,200test_dtype_kwargs_version_switchSimpleNamespace4.56.0fake_trsetitemtorch_moddevice_strkwf16f32kw2test_pick_device_cpudttest_post_processingHello, world !GPU with RTX 4090, great!s2# Force cpu path# Reload defaults to pick up envb'12.345'u'12.345'b',200'u',200'b'4.56.0'u'4.56.0'b'f16'u'f16'b'f32'u'f32'b'Hello, world !'u'Hello, world !'u''u''b'GPU with RTX 4090, great!'u'GPU with RTX 4090, great!'u'guff.LoquiLex.tests.test_units_extra'u'LoquiLex.tests.test_units_extra'u'tests.test_units_extra'u'test_units_extra'test_vtt_monotonictest_translator_bos_handling# overlapping + zero len# ensure non-overlap by simple search order# We don't download models in test env; ensure fallback works and doesn't throw.u'guff.LoquiLex.tests.test_vtt_and_mt'u'LoquiLex.tests.test_vtt_and_mt'u'tests.test_vtt_and_mt'u'test_vtt_and_mt'Integration tests for WebSocket envelope protocol with existing API.AckDataClientHelloDatastarlette.websocketsType_websockets_HTTPX_AVAILABLE_REQUESTS_AVAILABLE_EXC_TYPES_LISTConnectErrorHTTPStatusErrorRequestException_EXC_TYPEStest_websocket_envelope_integrationTest that the new envelope protocol works with the existing API.

    Uses FastAPI TestClient WebSocket support for reliable testing without
    requiring external server startup.
    openai/whisper-tinySession creation failed - environment limitationNo session ID returnedwelcome_rawwelcomeSERVER_WELCOMECLIENT_HELLOtest-client/1.0hello_envelopeCLIENT_ACKack_seqack_envelopeInvalidStatusCodeWebSocket endpoint not found (HTTP 404): WebSocket connection failed: test_websocket_configuration_from_envTest that WebSocket configuration can be set via environment variables.original_values65536original_valuetest_legacy_message_type_mappingTest that legacy message types are correctly mapped to envelope types.unknown_typetest_broadcast_with_envelope_protocolTest that broadcasting works with the new envelope protocol.test_session_123reset_mockAudio analysis in progresscalledsent_argssent_messagetest_session_cleanup_removes_protocol_managerTest that session cleanup properly removes protocol managers.test_cleanup_session# Optional runtime modules used only in certain environments# httpx (optional)# keep name for runtime checks# requests (optional)# Build the exception tuple used in the except-block dynamically so the# test module can be collected even if `requests` is not installed.# Mock session creation to avoid subprocess spawning# Create a session# Use legacy mode for compatibility# Skip test if session creation fails (expected in some environments)# Test WebSocket connection with envelope protocol# Use FastAPI TestClient WebSocket support# Should receive welcome message# Validate welcome message structure# Welcome uses seq 0# Send client hello# Client hello is processed but doesn't generate a response# No need to wait in synchronous TestClient context# Send acknowledgement for welcome message# Skip known environment/configuration errors instead of failing the# test. These exceptions typically indicate that the test environment# doesn't have a WebSocket endpoint available (HTTP 404) or that# connections to the socket endpoint are blocked/unavailable.# Try to determine an HTTP status code when available# websockets.InvalidStatusCode exposes `status_code` on the exception# httpx.HTTPStatusError contains a response# requests HTTP errors expose response as well# Connection-level failures are often environment-related; skip those too# Otherwise, re-raise so the test fails and surfaces unexpected errors# Clean up session# Set environment variables# Create new session manager to pick up env vars# Restore original environment# Test legacy type mappings# Create mock WebSocket# Register WebSocket connection# Clear welcome message call# Send a legacy broadcast# Should have called send_text# Parse the sent message# Validate envelope structure# First domain message after welcome# Simulate protocol manager creation# Should not raise any exceptionsb'Integration tests for WebSocket envelope protocol with existing API.'u'Integration tests for WebSocket envelope protocol with existing API.'b'Test that the new envelope protocol works with the existing API.

    Uses FastAPI TestClient WebSocket support for reliable testing without
    requiring external server startup.
    'u'Test that the new envelope protocol works with the existing API.

    Uses FastAPI TestClient WebSocket support for reliable testing without
    requiring external server startup.
    'b'openai/whisper-tiny'u'openai/whisper-tiny'b'Session creation failed - environment limitation'u'Session creation failed - environment limitation'b'No session ID returned'u'No session ID returned'b'v'u'v'b'hb'u'hb'b'limits'u'limits'b'test-client/1.0'u'test-client/1.0'b'InvalidStatusCode'u'InvalidStatusCode'b'status_code'u'status_code'b'response'u'response'b'WebSocket endpoint not found (HTTP 404): 'u'WebSocket endpoint not found (HTTP 404): 'b'WebSocket connection failed: 'u'WebSocket connection failed: 'b'Test that WebSocket configuration can be set via environment variables.'u'Test that WebSocket configuration can be set via environment variables.'b'5000'u'5000'b'15000'u'15000'b'65536'u'65536'b'Test that legacy message types are correctly mapped to envelope types.'u'Test that legacy message types are correctly mapped to envelope types.'b'unknown_type'u'unknown_type'b'Test that broadcasting works with the new envelope protocol.'u'Test that broadcasting works with the new envelope protocol.'b'test_session_123'u'test_session_123'b'Audio analysis in progress'u'Audio analysis in progress'b'Test that session cleanup properly removes protocol managers.'u'Test that session cleanup properly removes protocol managers.'b'test_cleanup_session'u'test_cleanup_session'u'guff.LoquiLex.tests.test_ws_integration'u'LoquiLex.tests.test_ws_integration'u'tests.test_ws_integration'u'test_ws_integration'Unit tests for WebSocket protocol manager.TestWSProtocolManagerTest that async context manager calls close and cleans up tasks.filterwarningsignore::ResourceWarningtest_destructor_cancels_tasksTest that __del__ cancels heartbeat tasks if not awaited.new_event_looprun_until_completegatherreturn_exceptionsTest WebSocket protocol manager functionality.Test protocol manager initialization.test_custom_configurationTest protocol manager with custom configuration.test_add_connection_sends_welcomeTest that adding connection sends welcome message.test_remove_connectionTest removing connections.test_client_hello_handlingTest client hello message handling.test_client_ack_handlingTest client acknowledgement handling.last_ack_seqtest_domain_event_sendingTest sending domain events.hello woevent_msgtest_flow_control_prevents_sendingTest that flow control prevents sending when limit is reached.success1success2success3test_resume_request_handlingTest resume request processing.replay_msg1replay_msg2test_resume_expired_errorTest resume request with expired window.response_msgSESSION_NEWtest_heartbeat_sendingTest heartbeat loop functionality.CancelledError_heartbeat_loophb_msgSERVER_HBq_outtest_invalid_message_handlingTest handling of invalid messages.invalid jsonerror_msgSERVER_ERRORinvalid_messagetest_unknown_message_type_handlingTest handling of unknown message types.unknown.typeunknown_envelopetest_connection_failure_handlingTest handling of connection failures during broadcast.failing_wsConnection failedworking_wstest_session_cleanup_on_all_connections_failedTest session cleanup when all connections fail.cleanup_calledtest_graceful_closeTest graceful session closure.test_ack_spoof_protectionClient cannot ack beyond latest delivered seq.errinvalid_acktest_resume_with_gapsOn resume, server delivers only missing frames once, ignores duplicates.# Heartbeat tasks should be running# After context exit, tasks should be None# Create manager and start tasks# Create a fresh loop for this synchronous test instead of relying on# asyncio.get_event_loop(), which may raise when no loop is set.# Manually start heartbeat tasks on the temporary loop# Delete manager and allow its destructor to attempt cleanup# Run the temporary loop until the tasks complete/cancel to ensure# their coroutines are awaited and do not trigger ResourceWarnings.# Should have a valid epoch# New default from environment# Should have sent welcome message# Create client hello message# Check that session state was updated# Should be min(16, 64)# Send some messages first to populate replay buffer# Check both the state and bounded replay buffer got populated# Send ack for first message# Should have processed the ack# In cumulative mode, message 1 should be removed from state replay buffer# Clear welcome message# Send ASR partial event# First domain event should be seq 1# Set low limit# Clear welcome# Send messages up to limit# Third message should be blocked by flow control# Still only 2 messages# Pre-populate replay buffer with temporary connection# Remove temporary connection# New connection with resume request using new protocol# Import the new resume data type# Should have sent:# 1. Session snapshot response# 2. Replayed message 2# 3. Replayed message 3# 4. Session ack# Check replayed messages# Check session ack# Expire immediately# Try to resume with new protocol# Should have sent session.new with resume_expired reason# 1 second for test# Configure mock sleep to run once then raise CancelledError# Start heartbeat loop manually (normally started by add_connection)# Should have sent one heartbeat# Send invalid JSON# Should have sent error message# Send message with unknown type (this will fail validation)# Invalid message type# Should have sent error for validation failure# Create failing WebSocket# Add both connections# Send message# Failing connection should be removed# Working connection should have received message# Set up disconnect callback# Send message - this should trigger cleanup# Cleanup callback should have been called# Close session# Connection should be closed and removed# Send two domain events# Try to ack seq beyond latest delivered (should trigger error)# Send 3 domain events# Resume from seq=1 (should get 2,3 only)# 1. Session snapshot# Skip snapshot and ack, check the replayed messagesb'Unit tests for WebSocket protocol manager.'u'Unit tests for WebSocket protocol manager.'b'Test that async context manager calls close and cleans up tasks.'u'Test that async context manager calls close and cleans up tasks.'b'ignore::ResourceWarning'u'ignore::ResourceWarning'b'Test that __del__ cancels heartbeat tasks if not awaited.'u'Test that __del__ cancels heartbeat tasks if not awaited.'b'Test WebSocket protocol manager functionality.'u'Test WebSocket protocol manager functionality.'b'Test protocol manager initialization.'u'Test protocol manager initialization.'b'Test protocol manager with custom configuration.'u'Test protocol manager with custom configuration.'b'Test that adding connection sends welcome message.'u'Test that adding connection sends welcome message.'b'resume_window'u'resume_window'b'Test removing connections.'u'Test removing connections.'b'Test client hello message handling.'u'Test client hello message handling.'b'Test client acknowledgement handling.'u'Test client acknowledgement handling.'b'Test sending domain events.'u'Test sending domain events.'b'hello wo'u'hello wo'b'Test that flow control prevents sending when limit is reached.'u'Test that flow control prevents sending when limit is reached.'b'Test resume request processing.'u'Test resume request processing.'b'Test resume request with expired window.'u'Test resume request with expired window.'b'Test heartbeat loop functionality.'u'Test heartbeat loop functionality.'b'ts'u'ts'b'q_out'u'q_out'b'Test handling of invalid messages.'u'Test handling of invalid messages.'b'invalid json'u'invalid json'b'code'u'code'b'invalid_message'u'invalid_message'b'Test handling of unknown message types.'u'Test handling of unknown message types.'b'unknown.type'u'unknown.type'b'Test handling of connection failures during broadcast.'u'Test handling of connection failures during broadcast.'b'Connection failed'u'Connection failed'b'Test session cleanup when all connections fail.'u'Test session cleanup when all connections fail.'b'Test graceful session closure.'u'Test graceful session closure.'b'Client cannot ack beyond latest delivered seq.'u'Client cannot ack beyond latest delivered seq.'b'invalid_ack'u'invalid_ack'b'On resume, server delivers only missing frames once, ignores duplicates.'u'On resume, server delivers only missing frames once, ignores duplicates.'u'guff.LoquiLex.tests.test_ws_protocol'u'LoquiLex.tests.test_ws_protocol'u'tests.test_ws_protocol'u'test_ws_protocol'Unit tests for WebSocket types and envelope schema.datetimetimezoneASRFinalDataASRPartialDataAckModeMTFinalDataResumeInfoServerWelcomeDataStatusDataTestWSEnvelopeTest WebSocket envelope validation and serialization.test_minimal_envelopeTest minimal envelope creation.test_full_envelopeTest envelope with all fields populated.sess_123msg_abcmsg_prevcorrt_wall1500000test_auto_message_id_generationTest that message ID is auto-generated when session ID is provided.msg_test_no_auto_id_without_sidTest that message ID is not auto-generated without session ID.test_json_serializationTest envelope can be serialized to/from JSON.sess_testoriginaljson_strmodel_validate_jsonloadedTestDomainEventDataTest domain event payload validation.test_asr_partial_dataTest ASR partial data validation.test_asr_final_dataTest ASR final data validation.start_ms1500end_mstest_mt_final_dataTest machine translation final data.test_status_dataTest status data validation.Processing audioTestControlMessagesTest control message payloads.test_client_helloTest client hello data.loquilex-ui/0.3.0CUMULATIVEack_modetest_client_hello_with_resumeTest client hello with resume info.sess_oldresume_infotest-clienttest_server_welcomeTest server welcome data structure.600resume_tokenTestSessionStateTest session state management.test_session_initializationTest session state initialization.utcisoformattest_sequence_generationTest sequence number generation.test_monotonic_time_calculationTest monotonic time calculation.get_monotonic_nsmono_ns10000000001_000_000_000test_flow_control_limitsTest flow control checking.can_send_messagetest_replay_buffer_managementTest replay buffer operations.envelope1envelope2add_to_replay_buffertest_replay_message_retrievalTest getting messages for replay.get_replay_messagesreplay_msgstest_cumulative_ack_processingTest cumulative acknowledgement processing.process_acktest_per_message_ack_processingTest per-message acknowledgement processing.PER_MESSAGE# Optional fields should be None/default# ID should be auto-generated# "msg_" + 8 hex chars# ID should remain None when no session ID# Serialize to JSON# Deserialize back# Get monotonic time# Should be >= 0 and reasonable# Less than 1 second since creation# Initially can send# After sending 3 messages without acks# After ack, can send again# Add messages to replay buffer# Add messages# seq 3, 4, 5# Process cumulative ack for seq 3# Messages 1, 2, 3 should be removed from replay buffer# Process per-message ack for seq 3# Only message 3 should be removedb'Unit tests for WebSocket types and envelope schema.'u'Unit tests for WebSocket types and envelope schema.'b'Test WebSocket envelope validation and serialization.'u'Test WebSocket envelope validation and serialization.'b'Test minimal envelope creation.'u'Test minimal envelope creation.'b'Test envelope with all fields populated.'u'Test envelope with all fields populated.'b'sess_123'u'sess_123'b'msg_abc'u'msg_abc'b'msg_prev'u'msg_prev'b'Test that message ID is auto-generated when session ID is provided.'u'Test that message ID is auto-generated when session ID is provided.'b'msg_'u'msg_'b'Test that message ID is not auto-generated without session ID.'u'Test that message ID is not auto-generated without session ID.'b'Test envelope can be serialized to/from JSON.'u'Test envelope can be serialized to/from JSON.'b'sess_test'u'sess_test'b'Test domain event payload validation.'u'Test domain event payload validation.'b'Test ASR partial data validation.'u'Test ASR partial data validation.'b'Test ASR final data validation.'u'Test ASR final data validation.'b'Test machine translation final data.'u'Test machine translation final data.'u''b'Test status data validation.'u'Test status data validation.'b'Processing audio'u'Processing audio'b'Test control message payloads.'u'Test control message payloads.'b'Test client hello data.'u'Test client hello data.'b'loquilex-ui/0.3.0'u'loquilex-ui/0.3.0'b'Test client hello with resume info.'u'Test client hello with resume info.'b'sess_old'u'sess_old'b'test-client'u'test-client'b'Test server welcome data structure.'u'Test server welcome data structure.'b'resume_token'u'resume_token'b'Test session state management.'u'Test session state management.'b'Test session state initialization.'u'Test session state initialization.'b'Test sequence number generation.'u'Test sequence number generation.'b'Test monotonic time calculation.'u'Test monotonic time calculation.'b'Test flow control checking.'u'Test flow control checking.'b'Test replay buffer operations.'u'Test replay buffer operations.'b'Test getting messages for replay.'u'Test getting messages for replay.'b'msg'u'msg'b'Test cumulative acknowledgement processing.'u'Test cumulative acknowledgement processing.'b'Test per-message acknowledgement processing.'u'Test per-message acknowledgement processing.'u'guff.LoquiLex.tests.test_ws_types'u'LoquiLex.tests.test_ws_types'u'tests.test_ws_types'u'test_ws_types'_ensure_parent_dir_write_atomicnewlineText writer that supports atomic single-line rewrites and rolling append with max_lines.

    Contract:
    - rewrite_current_line(line): replaces file contents with all finalized lines + one draft line (no timestamps).
    - append_final_line(line): appends a finalized line to internal buffer and writes file atomically; enforces max_lines by truncating from top.
    - reset(): truncates file and clears internal state.
    _final_linesSupport context manager for automatic cleanup.Cleanup when exiting context manager._serializeoverflow# stored without trailing \n# For file-based operations, no explicit cleanup needed# as we use atomic writes with proper context managers# No explicit cleanup needed for file operations# Utilities# Ensure trailing newline and \n newlines# API# Replace entire file with finalized lines + one draft line# Don't mutate file for empty finalized lines# Drop oldest lines (ring buffer behavior)b'Text writer that supports atomic single-line rewrites and rolling append with max_lines.

    Contract:
    - rewrite_current_line(line): replaces file contents with all finalized lines + one draft line (no timestamps).
    - append_final_line(line): appends a finalized line to internal buffer and writes file atomically; enforces max_lines by truncating from top.
    - reset(): truncates file and clears internal state.
    'u'Text writer that supports atomic single-line rewrites and rolling append with max_lines.

    Contract:
    - rewrite_current_line(line): replaces file contents with all finalized lines + one draft line (no timestamps).
    - append_final_line(line): appends a finalized line to internal buffer and writes file atomically; enforces max_lines by truncating from top.
    - reset(): truncates file and clears internal state.
    'b'Support context manager for automatic cleanup.'u'Support context manager for automatic cleanup.'b'Cleanup when exiting context manager.'u'Cleanup when exiting context manager.'u'LoquiLex.loquilex.output.text_io'u'loquilex.output.text_io'u'output.text_io'u'text_io'CLOCK_BOOTTIMECLOCK_MONOTONICCLOCK_MONOTONIC_RAWCLOCK_PROCESS_CPUTIME_IDCLOCK_REALTIMECLOCK_TAICLOCK_THREAD_CPUTIME_ID_STRUCT_TM_ITEMSu'This module provides various functions to manipulate time values.

There are two standard representations of time.  One is the number
of seconds since the Epoch, in UTC (a.k.a. GMT).  It may be an integer
or a floating point number (to represent fractions of seconds).
The Epoch is system-defined; on Unix, it is generally January 1st, 1970.
The actual value can be retrieved by calling gmtime(0).

The other representation is a tuple of 9 integers giving local time.
The tuple items are:
  year (including century, e.g. 1998)
  month (1-12)
  day (1-31)
  hours (0-23)
  minutes (0-59)
  seconds (0-59)
  weekday (0-6, Monday is 0)
  Julian day (day in the year, 1-366)
  DST (Daylight Savings Time) flag (-1, 0 or 1)
If the DST flag is 0, the time is given in the regular time zone;
if it is 1, the time is given in the DST time zone;
if it is -1, mktime() should guess based on the date and time.
'18000altzoneasctimeclock_getresclock_gettimeclock_gettime_nsclock_settimeclock_settime_nsctimedaylightget_clock_infolocaltimemktimemonotonic_nsperf_counter_nsprocess_timeprocess_time_nspthread_getcpuclockidstrptimeu'The time value as returned by gmtime(), localtime(), and strptime(), and
 accepted by asctime(), mktime() and strftime().  May be considered as a
 sequence of 9 integers.

 Note that several fields' values are not the same as those defined by
 the C language standard for struct tm.  For example, the value of the
 field tm_year is the actual year, not year - 1900.  See individual
 fields' descriptions for details.'u'tm_year'u'tm_mon'u'tm_mday'u'tm_hour'u'tm_min'u'tm_sec'u'tm_wday'u'tm_yday'u'tm_isdst'tm_gmtofftm_hourtm_isdsttm_mdaytm_mintm_montm_sectm_wdaytm_ydaytm_yeartm_zonetime.struct_timestruct_timethread_timethread_time_nstime_ns21600u'CST'u'CDT'tznametzsetcontextlibTYPE_CHECKING[mt] Return a version-aware dtype kwarg for transformers.from_pretrained.

    Newer transformers deprecate torch_dtype in favor of dtype. Choose based on version.
    56torch_dtypevalis_cudatorch_device_nllb_m2mmt_translatortranslation_latency1500.0model_load_time10000.030000.0Translator initialized_load_nllbLoading NLLB modelmodel_load_nllbuse_safetensorstokdevice_mapload_time_msNLLB model loaded successfullyloaded=Failed to load NLLB model_load_m2mLoading M2M modelmodel_load_m2mM2M model loaded successfullyFailed to load M2M modelStarting translationptreturn_tensorstruncationinputsno_gradnullcontextcmforced_bos_token_idgenbatch_decodetranslations_successTranslation completed successfullyinput_lengthoutput_lengthNLLB translation failed, trying M2Mnllb_failuresget_lang_idBoth NLLB and M2M translation failedtranslations_failedLow-latency 'draft' translation for live partials.

        Prioritize speed: beam_size=1, shorter max_new_tokens, minimal constraints.
        Try M2M first (often faster on CPU), then NLLB, then echo.
        pad_token_id:draftm2m draft failed: nllb draft failed: # optional dependency# torch might not be installed in test env# only for typing; avoid runtime hard dep# soft dependency# Let HF default dtype if torch isn't available# Set performance thresholds for MT latency# Try NLLB first# Fallback M2M# Echo fallback# Draft via M2M# Draft via NLLBb'[mt] 'u'[mt] 'b'Return a version-aware dtype kwarg for transformers.from_pretrained.

    Newer transformers deprecate torch_dtype in favor of dtype. Choose based on version.
    'u'Return a version-aware dtype kwarg for transformers.from_pretrained.

    Newer transformers deprecate torch_dtype in favor of dtype. Choose based on version.
    'b'torch_dtype'u'torch_dtype'b'mt_translator'u'mt_translator'b'translation_latency'u'translation_latency'b'model_load_time'u'model_load_time'b'Translator initialized'u'Translator initialized'b'Loading NLLB model'u'Loading NLLB model'b'model_load_nllb'u'model_load_nllb'b'NLLB model loaded successfully'u'NLLB model loaded successfully'b'loaded='u'loaded='b'Failed to load NLLB model'u'Failed to load NLLB model'b'Loading M2M model'u'Loading M2M model'b'model_load_m2m'u'model_load_m2m'b'M2M model loaded successfully'u'M2M model loaded successfully'b'Failed to load M2M model'u'Failed to load M2M model'b'Starting translation'u'Starting translation'b'pt'u'pt'b'translations_success'u'translations_success'b'Translation completed successfully'u'Translation completed successfully'b'NLLB translation failed, trying M2M'u'NLLB translation failed, trying M2M'b'nllb_failures'u'nllb_failures'b'Both NLLB and M2M translation failed'u'Both NLLB and M2M translation failed'b'translations_failed'u'translations_failed'b'Low-latency 'draft' translation for live partials.

        Prioritize speed: beam_size=1, shorter max_new_tokens, minimal constraints.
        Try M2M first (often faster on CPU), then NLLB, then echo.
        'u'Low-latency 'draft' translation for live partials.

        Prioritize speed: beam_size=1, shorter max_new_tokens, minimal constraints.
        Try M2M first (often faster on CPU), then NLLB, then echo.
        'b'pad_token_id'u'pad_token_id'b':draft'u':draft'b'm2m draft failed: 'u'm2m draft failed: 'b'nllb draft failed: 'u'nllb draft failed: 'u'LoquiLex.loquilex.mt.translator'u'loquilex.mt.translator'u'mt.translator'u'translator'MT core types and constants.LiteralBase MT error.Provider-specific error.Model loading error.# Language codes# Quality modes for translation# Error typesb'MT core types and constants.'u'MT core types and constants.'b'Base MT error.'u'Base MT error.'b'Provider-specific error.'u'Provider-specific error.'b'Model loading error.'u'Model loading error.'u'loquilex.mt.core.types'u'mt.core.types'u'core.types'u'types'/usr/lib/python3.12/unittest/usr/lib/python3.12/urllibMT utilities and helpers.resolve_zh_variantResolve Chinese variant from environment.variantHantNormalize language code to supported Lang type.zhoUnsupported language: # Default to Hans for unknown variants# Map generic zh to environment-specified variantb'MT utilities and helpers.'u'MT utilities and helpers.'b'Resolve Chinese variant from environment.'u'Resolve Chinese variant from environment.'b'Hant'u'Hant'b'Normalize language code to supported Lang type.'u'Normalize language code to supported Lang type.'b'zho'u'zho'b'Unsupported language: 'u'Unsupported language: 'u'loquilex.mt.core.util'u'mt.core.util'u'core.util'Append a single VTT cue, creating file+header if needed.

    Applies epsilon bump and monotonic enforcement by checking the last cue in file if present.
    text_data# Ensure file exists with header# Read last end time by scanning backwards a bit (cheap for typical files)# Append atomically: write tmp then concatenate with existing file content would be heavy; instead# for appends we can open in append mode which is atomic at OS-level for writes.b'Append a single VTT cue, creating file+header if needed.

    Applies epsilon bump and monotonic enforcement by checking the last cue in file if present.
    'u'Append a single VTT cue, creating file+header if needed.

    Applies epsilon bump and monotonic enforcement by checking the last cue in file if present.
    'u'LoquiLex.loquilex.output.vtt'u'loquilex.output.vtt'u'output.vtt'u'vtt'parse_vttrestloquilex/out/asr_en.vttmissing non-monotonic at non-positive duration at OK  cues monotonicb'loquilex/out/asr_en.vtt'u'loquilex/out/asr_en.vtt'b'missing 'u'missing 'b'non-monotonic at 'u'non-monotonic at 'b'non-positive duration at 'u'non-positive duration at 'b'OK 'u'OK 'b' cues monotonic'u' cues monotonic'u'guff.LoquiLex.scripts.vtt_smoke_test'u'LoquiLex.scripts.vtt_smoke_test'u'scripts.vtt_smoke_test'u'vtt_smoke_test'parse_tsrequiredout_text[cli] wrote  and  ( cues)b'[cli] wrote 'u'[cli] wrote 'b' and 'u' and 'b' ('u' ('b' cues)'u' cues)'u'LoquiLex.loquilex.cli.vtt_to_zh'u'loquilex.cli.vtt_to_zh'u'cli.vtt_to_zh'u'vtt_to_zh'Compute RMS and peak of a mono float32 array clipped to [0,1] domain for display.

    Input samples are expected in [-1, 1]. We return positive scalars in [0, 1].
    sqrtSimple EMA smoother for VU meters.

    alpha: smoothing factor in (0,1]. Higher is snappier.
    _rms_peak# Clip to avoid NaNs from over/underflow# Bound to [0,1]b'Compute RMS and peak of a mono float32 array clipped to [0,1] domain for display.

    Input samples are expected in [-1, 1]. We return positive scalars in [0, 1].
    'u'Compute RMS and peak of a mono float32 array clipped to [0,1] domain for display.

    Input samples are expected in [-1, 1]. We return positive scalars in [0, 1].
    'b'Simple EMA smoother for VU meters.

    alpha: smoothing factor in (0,1]. Higher is snappier.
    'u'Simple EMA smoother for VU meters.

    alpha: smoothing factor in (0,1]. Higher is snappier.
    'u'LoquiLex.loquilex.api.vu'u'loquilex.api.vu'u'api.vu'read_wav_mono_16kgetframerategetnchannelschgetnframesreadframes32768.0axis[asr] device=without_timestamps# simple fallback resample using numpy (linear), prefer  ffmpeg externally for quality# Offline path: use faster-whisper directly for stability# Prefer int8_float32 on CPU for better quality; fallback handled by faster-whisper if unsupportedb'[asr] device='u'[asr] device='u'LoquiLex.loquilex.cli.wav_to_vtt'u'loquilex.cli.wav_to_vtt'u'cli.wav_to_vtt'u'wav_to_vtt'faster-whisper runner with VAD and segmentation.

Emits partial text quickly and final segments on end-of-speech or max length.
Word[asr] buf_last_partial_last_partial_at_last_decode_at_last_seg_end_last_seg_end_wall_words_emitteddevice= dtype=zressamples_iteron_segmentStateful streaming with ring buffer, debounced partials, and EoS heuristic.

        Emits partials frequently and finalizes when segment end hasn't advanced for RT.pause_flush_sec.
        max_keeppartial_textflat_wordsnew_wsmax_len_hitstart_tend_t# Use monotonic clock for durations/latency math# word-level tracking# Prefer int8_float32 on CPU (weights int8, activations fp32) for better quality; fallback to int8# exhaust generator quickly# Optional word-level callbacks (rolling window support)# Flatten words across segments in order# update before callback to avoid reentrancy issues# filter empty# Debounced partials# Track last end# Finalize on pause or segment max length (engine is the single source of truth for finals)# reset buffer/state for next clauseb'faster-whisper runner with VAD and segmentation.

Emits partial text quickly and final segments on end-of-speech or max length.
'u'faster-whisper runner with VAD and segmentation.

Emits partial text quickly and final segments on end-of-speech or max length.
'b'[asr] 'u'[asr] 'b'device='u'device='b' dtype='u' dtype='b'Stateful streaming with ring buffer, debounced partials, and EoS heuristic.

        Emits partials frequently and finalizes when segment end hasn't advanced for RT.pause_flush_sec.
        'u'Stateful streaming with ring buffer, debounced partials, and EoS heuristic.

        Emits partials frequently and finalizes when segment end hasn't advanced for RT.pause_flush_sec.
        'u'LoquiLex.loquilex.asr.whisper_engine'u'loquilex.asr.whisper_engine'u'asr.whisper_engine'u'whisper_engine'Model indexing worker for caching discovered models.api.model_discoveryconfig.pathsCached model index with metadata.Background worker for indexing and caching locally available models.STOP_TIMEOUT_SEC30.0ERROR_RETRY_SLEEP_SECInitialize indexer.

        Args:
            cache_path: Path to cache file. Defaults to `<OUT_DIR>/model_index.json`,
                where `OUT_DIR` comes from `LX_OUT_DIR` (or legacy `LLX_OUT_DIR`) and
                falls back to `loquilex/out`.
            refresh_interval: Seconds between automatic re-indexing (default 5 minutes)
        _stop_event_load_cacheLoad cached index from disk.Loaded model index from Failed to load model index cache: _save_cacheSave current index to disk.Saved model index to Failed to save model index cache: _scan_modelsScan for available models and create index.Scanning for available models...Model scan complete:  ASR,  MT models (took " MT models ""(took "ms)Refresh the model index.

        Args:
            force: Force refresh even if cache is recent

        Returns:
            Updated model index
        ageIndex is recent (s old), skipping refreshGet current model index, refreshing if stale.

        Returns:
            Current model index
        Index is stale (s old), refreshingGet cached ASR models.Get cached MT models.Start background worker thread for automatic refreshing.Background worker already running_background_workerStarted model indexing background workerStop background worker thread.Background worker did not stop cleanlyStopped model indexing background workerBackground worker loop.Error in background model indexing: _default_indexerGet the default model indexer instance.# Ensure cache directory exists# Load existing index if available# Check if refresh is needed# Perform scan# Check staleness# Wait for refresh interval or stop event# Stop requested# Refresh if we haven't been stopped# Continue running despite errors# Brief pause before retryingb'Model indexing worker for caching discovered models.'u'Model indexing worker for caching discovered models.'b'Cached model index with metadata.'u'Cached model index with metadata.'b'Background worker for indexing and caching locally available models.'u'Background worker for indexing and caching locally available models.'b'Initialize indexer.

        Args:
            cache_path: Path to cache file. Defaults to `<OUT_DIR>/model_index.json`,
                where `OUT_DIR` comes from `LX_OUT_DIR` (or legacy `LLX_OUT_DIR`) and
                falls back to `loquilex/out`.
            refresh_interval: Seconds between automatic re-indexing (default 5 minutes)
        'u'Initialize indexer.

        Args:
            cache_path: Path to cache file. Defaults to `<OUT_DIR>/model_index.json`,
                where `OUT_DIR` comes from `LX_OUT_DIR` (or legacy `LLX_OUT_DIR`) and
                falls back to `loquilex/out`.
            refresh_interval: Seconds between automatic re-indexing (default 5 minutes)
        'b'Load cached index from disk.'u'Load cached index from disk.'b'Loaded model index from 'u'Loaded model index from 'b'Failed to load model index cache: 'u'Failed to load model index cache: 'b'Save current index to disk.'u'Save current index to disk.'b'Saved model index to 'u'Saved model index to 'b'Failed to save model index cache: 'u'Failed to save model index cache: 'b'Scan for available models and create index.'u'Scan for available models and create index.'b'Scanning for available models...'u'Scanning for available models...'b'Model scan complete: 'u'Model scan complete: 'b' ASR, 'u' ASR, 'b' MT models (took 'u' MT models (took 'b'ms)'u'ms)'b'Refresh the model index.

        Args:
            force: Force refresh even if cache is recent

        Returns:
            Updated model index
        'u'Refresh the model index.

        Args:
            force: Force refresh even if cache is recent

        Returns:
            Updated model index
        'b'Index is recent ('u'Index is recent ('b's old), skipping refresh'u's old), skipping refresh'b'Get current model index, refreshing if stale.

        Returns:
            Current model index
        'u'Get current model index, refreshing if stale.

        Returns:
            Current model index
        'b'Index is stale ('u'Index is stale ('b's old), refreshing'u's old), refreshing'b'Get cached ASR models.'u'Get cached ASR models.'b'Get cached MT models.'u'Get cached MT models.'b'Start background worker thread for automatic refreshing.'u'Start background worker thread for automatic refreshing.'b'Background worker already running'u'Background worker already running'b'Started model indexing background worker'u'Started model indexing background worker'b'Stop background worker thread.'u'Stop background worker thread.'b'Background worker did not stop cleanly'u'Background worker did not stop cleanly'b'Stopped model indexing background worker'u'Stopped model indexing background worker'b'Background worker loop.'u'Background worker loop.'b'Error in background model indexing: 'u'Error in background model indexing: 'b'Get the default model indexer instance.'u'Get the default model indexer instance.'u'LoquiLex.loquilex.indexing.worker'u'loquilex.indexing.worker'u'indexing.worker'u'worker'WebSocket Protocol Manager: envelope handling, heartbeats, and acknowledgements.

This module implements the core WebSocket protocol logic including:
- Envelope creation and validation
- Heartbeat scheduling and monitoring
- Acknowledgement tracking and flow control
- Resume/reconnect with replay buffer
- Session lifecycle management
FlowControlDataHeartbeatDataQueueDropDataSessionSnapshotDataSessionNewDataSessionAckDataManages WebSocket protocol for a single session.config.defaults15.0default_hb_configdefault_resume_windowdefault_limitsTask_on_disconnect_session_snapshot_callbackbounded_queuemax_replay_eventssnapshot_sizesreplay_durations_metricsSet callback for when session should be cleaned up.Set callback for getting session snapshot data for resume.Add a new WebSocket connection._send_to_connection_start_heartbeat_start_system_heartbeatclient_buffer_sizeoutbound_Remove a WebSocket connection._stop_heartbeat_stop_system_heartbeatHandle incoming WebSocket message.model_validate_handle_client_hello_handle_session_resume_handle_client_ackCLIENT_HB_handle_client_heartbeatCLIENT_FLOW_handle_client_flowUnknown message type: Error handling WebSocket message: _send_errorHandle client hello message.hello_data_handle_resume_requestClient hello processed for session invalid_helloProcess a resume request coming from a ClientHello.resume field.

        This is a small shim so both explicit SESSION_RESUME messages and
        embedded resume requests in ClientHello share the same resume handling
        implemented in `_handle_session_resume`.
        Handle session resume request.resume_data_send_session_newreplay_messages_send_session_snapshot resumed, replayed  messages in Error handling session resume: invalid_resumeSend session snapshot for successful resume.Failed to get session snapshot for current_seqsnapshot_sizeSESSION_SNAPSHOTsnapshot_envelopeack_dataSESSION_ACKSend session new response for failed resume.new_datanew_envelopeHandle client acknowledgement.Client ack beyond latest seq:  > Ack  beyond latest delivered seq Processed ack for seq Error processing ack: Handle client heartbeat.last_hb_recvcancel_heartbeat_timeoutHandle client flow control update.flow_datanew_limitUpdated flow control limit to Error processing flow control: Send a domain event (ASR, MT, status) to all connections.

        Returns True if message was sent, False if flow control prevented it.
        Flow control prevents sending Create a properly formatted envelope.Broadcast envelope to all connections.failed_connectionsFailed to send to connection: _cleanup_sessionSend envelope to specific connection.retry_after_msSend error message to specific connection.ErrorCodeServerErrorDatacode_enumINTERNALerror_envelopeStart heartbeat scheduling.Start system heartbeat for resilient comms._system_heartbeat_loopStop heartbeat scheduling and await tasks.tasksStop system heartbeat.Send periodic heartbeats.q_inlatency_ms_esthb_datahb_envelopelast_hb_sentHeartbeat loop error: Monitor heartbeat timeout.Heartbeat timeout for session Heartbeat timeout error: Send system heartbeats with comprehensive metrics.replay_telemetryqueue_telemetrySystem heartbeat loop error: Clean up session resources.

        Resource Lifecycle Management:
        - Stops heartbeat tasks (heartbeat and system heartbeat)
        - Closes all WebSocket connections gracefully
        - Clears outbound message queues
        - Calls disconnect callback to notify parent manager

        This method ensures all tasks are cancelled and connections
        are properly closed to prevent resource leaks.
        Gracefully close the session.Destructor: best-effort cleanup of background tasks.

        __del__ cannot be async; schedule `_cleanup_session` on the running
        event loop if available, otherwise attempt a best-effort cancellation
        of known tasks. This prevents coroutine objects left pending when
        the object is garbage-collected in tests or short-lived contexts.
        is_runningdoneEmit queue drop notification.drop_dataQUEUE_DROPdrop_envelopeGet comprehensive telemetry summary.replay_telqueue_teluptimeavg_replay_duration# Note: do not create a new event loop here. Creating and setting a# loop inside an initializer can attach background tasks to a loop# that isn't the test runner's active loop and can lead to# 'coroutine was never awaited' warnings during garbage collection.# Callers are expected to construct this manager from an async# context (or manage their own event loop) when scheduling tasks.# Simple epoch based on timestamp# Configuration with environment variable support# Default configuration with unit suffix support# WebSocket connections# Heartbeat tracking# System heartbeat for resilient comms# Callbacks# Bounded queues and telemetry# Replace simple replay buffer with bounded replay buffer# Outbound event queue for each connection# Telemetry# Lifecycle guard# Ignore late connections after close# Send welcome message# Welcome message uses seq 0, domain events start from 1# Start heartbeat if this is the first connection# Create bounded outbound queue for this connection# Clean up outbound queue for this connection# Stop heartbeat if no connections remain# Route based on message type# Handle resume request# Update session state based on client preferences# Construct a minimal envelope-like object to reuse existing handler# Check session ID match# Check epoch if provided# Check if resume is within window# Get replay messages# Send session snapshot with replay data# Record success metrics# Keep only recent durations (last 100)# Get actual finalized transcript and active partials from session# Record snapshot metrics# Keep only recent sizes (last 100)# Send replay messages# Send session ack to complete handshake# Reset session state for fresh start# Protect against ack spoofing: client cannot ack beyond latest delivered seq# Send structured error back to client# Find a connection to reply on (use first connection)# Reset heartbeat timeout# Add to both state and bounded replay buffer for compatibility# For specific seq (like welcome message), update state if needed# Convert to JSON once# Send to all connections# Remove failed connections# If all connections failed, cleanup session# Accept code as str or ErrorCode# Await cancelled tasks to ensure proper cleanup# Send heartbeat# We don't track inbound queue depth# Could be calculated from round-trip# Check if we've received a heartbeat recently# Collect telemetry# Replay buffer metrics# Outbound queue metrics# System heartbeat# Close all connections# Clear outbound queues and explicitly cleanup# Cleanup replay buffer as well# Notify parent to remove session# Schedule cleanup as a background task on the loop# Last-resort: cancel tasks directly if scheduling failed# No running loop: best-effort cancel tasks# Replay buffer# Outbound queues# Calculate resume metrics statisticsb'WebSocket Protocol Manager: envelope handling, heartbeats, and acknowledgements.

This module implements the core WebSocket protocol logic including:
- Envelope creation and validation
- Heartbeat scheduling and monitoring
- Acknowledgement tracking and flow control
- Resume/reconnect with replay buffer
- Session lifecycle management
'u'WebSocket Protocol Manager: envelope handling, heartbeats, and acknowledgements.

This module implements the core WebSocket protocol logic including:
- Envelope creation and validation
- Heartbeat scheduling and monitoring
- Acknowledgement tracking and flow control
- Resume/reconnect with replay buffer
- Session lifecycle management
'b'Manages WebSocket protocol for a single session.'u'Manages WebSocket protocol for a single session.'b'latency_metrics'u'latency_metrics'b'snapshot_sizes'u'snapshot_sizes'b'replay_durations'u'replay_durations'b'Set callback for when session should be cleaned up.'u'Set callback for when session should be cleaned up.'b'Set callback for getting session snapshot data for resume.'u'Set callback for getting session snapshot data for resume.'b'Add a new WebSocket connection.'u'Add a new WebSocket connection.'b'outbound_'u'outbound_'b'Remove a WebSocket connection.'u'Remove a WebSocket connection.'b'Handle incoming WebSocket message.'u'Handle incoming WebSocket message.'b'Unknown message type: 'u'Unknown message type: 'b'Error handling WebSocket message: 'u'Error handling WebSocket message: 'b'Handle client hello message.'u'Handle client hello message.'b'Client hello processed for session 'u'Client hello processed for session 'b'invalid_hello'u'invalid_hello'b'Process a resume request coming from a ClientHello.resume field.

        This is a small shim so both explicit SESSION_RESUME messages and
        embedded resume requests in ClientHello share the same resume handling
        implemented in `_handle_session_resume`.
        'u'Process a resume request coming from a ClientHello.resume field.

        This is a small shim so both explicit SESSION_RESUME messages and
        embedded resume requests in ClientHello share the same resume handling
        implemented in `_handle_session_resume`.
        'b'Handle session resume request.'u'Handle session resume request.'b' resumed, replayed 'u' resumed, replayed 'b' messages in 'u' messages in 'b'Error handling session resume: 'u'Error handling session resume: 'b'invalid_resume'u'invalid_resume'b'Send session snapshot for successful resume.'u'Send session snapshot for successful resume.'b'Failed to get session snapshot for 'u'Failed to get session snapshot for 'b'Send session new response for failed resume.'u'Send session new response for failed resume.'b'Handle client acknowledgement.'u'Handle client acknowledgement.'b'Client ack beyond latest seq: 'u'Client ack beyond latest seq: 'b' > 'u' > 'b'Ack 'u'Ack 'b' beyond latest delivered seq 'u' beyond latest delivered seq 'b'Processed ack for seq 'u'Processed ack for seq 'b'Error processing ack: 'u'Error processing ack: 'b'Handle client heartbeat.'u'Handle client heartbeat.'b'Handle client flow control update.'u'Handle client flow control update.'b'Updated flow control limit to 'u'Updated flow control limit to 'b'Error processing flow control: 'u'Error processing flow control: 'b'Send a domain event (ASR, MT, status) to all connections.

        Returns True if message was sent, False if flow control prevented it.
        'u'Send a domain event (ASR, MT, status) to all connections.

        Returns True if message was sent, False if flow control prevented it.
        'b'Flow control prevents sending 'u'Flow control prevents sending 'b'Create a properly formatted envelope.'u'Create a properly formatted envelope.'b'Broadcast envelope to all connections.'u'Broadcast envelope to all connections.'b'Failed to send to connection: 'u'Failed to send to connection: 'b'Send envelope to specific connection.'u'Send envelope to specific connection.'b'Send error message to specific connection.'u'Send error message to specific connection.'b'Start heartbeat scheduling.'u'Start heartbeat scheduling.'b'Start system heartbeat for resilient comms.'u'Start system heartbeat for resilient comms.'b'Stop heartbeat scheduling and await tasks.'u'Stop heartbeat scheduling and await tasks.'b'Stop system heartbeat.'u'Stop system heartbeat.'b'Send periodic heartbeats.'u'Send periodic heartbeats.'b'Heartbeat loop error: 'u'Heartbeat loop error: 'b'Monitor heartbeat timeout.'u'Monitor heartbeat timeout.'b'Heartbeat timeout for session 'u'Heartbeat timeout for session 'b'Heartbeat timeout error: 'u'Heartbeat timeout error: 'b'Send system heartbeats with comprehensive metrics.'u'Send system heartbeats with comprehensive metrics.'b'System heartbeat loop error: 'u'System heartbeat loop error: 'b'Clean up session resources.

        Resource Lifecycle Management:
        - Stops heartbeat tasks (heartbeat and system heartbeat)
        - Closes all WebSocket connections gracefully
        - Clears outbound message queues
        - Calls disconnect callback to notify parent manager

        This method ensures all tasks are cancelled and connections
        are properly closed to prevent resource leaks.
        'u'Clean up session resources.

        Resource Lifecycle Management:
        - Stops heartbeat tasks (heartbeat and system heartbeat)
        - Closes all WebSocket connections gracefully
        - Clears outbound message queues
        - Calls disconnect callback to notify parent manager

        This method ensures all tasks are cancelled and connections
        are properly closed to prevent resource leaks.
        'b'Gracefully close the session.'u'Gracefully close the session.'b'Destructor: best-effort cleanup of background tasks.

        __del__ cannot be async; schedule `_cleanup_session` on the running
        event loop if available, otherwise attempt a best-effort cancellation
        of known tasks. This prevents coroutine objects left pending when
        the object is garbage-collected in tests or short-lived contexts.
        'u'Destructor: best-effort cleanup of background tasks.

        __del__ cannot be async; schedule `_cleanup_session` on the running
        event loop if available, otherwise attempt a best-effort cancellation
        of known tasks. This prevents coroutine objects left pending when
        the object is garbage-collected in tests or short-lived contexts.
        'b'Emit queue drop notification.'u'Emit queue drop notification.'b'Get comprehensive telemetry summary.'u'Get comprehensive telemetry summary.'u'LoquiLex.loquilex.api.ws_protocol'u'loquilex.api.ws_protocol'u'api.ws_protocol'u'ws_protocol'WebSocket API Types: versioned envelope schema and control protocol.

This module defines the structured envelope format for all WebSocket messages
including control types (hello, welcome, heartbeats, acks) and domain events
(ASR partials/finals, MT finals, status updates).

Envelope design supports:
- Versioned schema for forward/backward compatibility
- Session management with server-issued IDs
- Sequence numbering for acknowledgements and replay
- Monotonic timing for latency measurement
- Correlation IDs for request/response linking
Standard message types for the WebSocket protocol.client.helloserver.welcomeserver.errorclient.hbserver.hbclient.ackserver.ackSERVER_ACKclient.flowMT_PARTIALsession.resumesystem.metricsSYSTEM_METRICSMessageTypeLiteralinternalbad_requestBAD_REQUESTunauthorizedUNAUTHORIZEDnot_foundNOT_FOUNDrate_limitRATE_LIMITINVALID_ACKresume_gapRESUME_GAPUNKNOWNinvalid_typeINVALID_TYPEinvalid_seqINVALID_SEQinvalid_corrINVALID_CORRINVALID_MESSAGERESUME_EXPIREDErrorPayloadVersioned envelope for all WebSocket messages.

    All messages use this shared envelope structure with type-specific
    payloads in the 'data' field.
    Schema versionMessage type (namespaced)Session ID (server-issued)Message ID (server-unique)Sequence number per sessionCorrelation ID for responsesISO8601 timestampMonotonic nanoseconds since session startType-specific payloadafter_post_validateallowedcorr is only allowed on replies/acks, got t=seq must be non-negativeAcknowledgement modes for flow control.cumulativeper-messageClient hello payload - announces capabilities and preferences.Client agent stringAccepted message typesAcknowledgement modeRequested sliding window sizeResume informationResume information for reconnection.Previous session IDLast acknowledged sequence numberServer welcome payload - provides session config and limits.Heartbeat configurationResume window policyServer-imposed limitsHeartbeat timing configuration.Heartbeat interval in millisecondsHeartbeat timeout in millisecondsResume window policy for reconnections.Resume window in secondsResume tokenServer-imposed limits for flow control.Maximum sliding window sizeMaximum message size in bytesHeartbeat payload with metrics.Outbound queue depthInbound queue depthEstimated latency in millisecondsAcknowledgement payload.Acknowledged sequence numberFlow control payload to adjust window size.New maximum in-flight messagesServer error payload (inherits structured ErrorPayload).Error codeError detail messageOptional retry-after in msASR partial transcription payload.Partial textWhether this is finalSegment identifierStability score 0.0-1.0Segment detailsASR final transcription payload.Final transcribed textSegment start time in millisecondsSegment end time in millisecondsSequence range covered by this final: {from: seq, to: seq}MTPartialDataMachine translation partial payload.Partial translated textSource language codeTarget language codeSource segment identifierTranslation stability scoreMachine translation final payload.Translated textStatus update payload.Status stageOptional status detailSession state for managing WebSocket connections.resume_window_secinitInitialize session storage after dataclass creation.storage_configGet next sequence number.Get nanoseconds since session start (monotonic).Add message to replay buffer with retention policy.to_remove1000000000.01_000_000_000.0msg_timeGet messages for replay after reconnect.Check if we can send a message within flow control limits.in_flightProcess acknowledgement and update flow control state.Add a finalized commit to session storage.

        Args:
            commit_type: Type of commit ("transcript", "translation", "status")
            data: Commit data payload

        Returns:
            SessionCommit object if storage is available, None otherwise
        Get session storage snapshot for rehydration.

        Args:
            max_commits: Maximum number of recent commits to include

        Returns:
            Snapshot data or None if storage not available
        Get session storage statistics.

        Returns:
            Storage stats or None if storage not available
        Session resume request payload.Session ID to resumeExpected session epochSession snapshot response payload for rehydration.Session IDCurrent session epochCurrent sequence numberFinal transcript segmentsActive partial segmentsMT state if enabledSession new response payload for fresh start.New session IDNew session epochReason for new session (e.g., 'resume_expired')Session acknowledgement payload.Acknowledgement statusSystem heartbeat payload with comprehensive metrics.Monotonic milliseconds since session startQueue depths by nameDrop counts by queueLatency metrics in msQueue drop notification payload.Queue/path where drop occurredNumber of items droppedDrop reason (capacity, ttl_expired, backpressure)Total items dropped on this pathSystemMetricsDataSystem metrics payload for telemetry.Current queue depthsTotal drops by queue95th percentile latencieslatency_p95_msSession uptime in secondsMemory usage in MBmemory_usage_mb# New resilient comms message types# Strict type for envelope 't' field (v1 surface)# ErrorCode enum for structured error payloads# Additional codes used elsewhere# Codes expected by tests and protocol# Structured error payload# Ensure message id exists for server messages when sid provided# 1. corr present only on replies/acks# 2. seq non-negative for server-emitted messages# Note: `sid` is not strictly required when constructing envelopes in# unit tests or for client-side messages. Session enforcement is handled# at the protocol layer where connections and welcome messages are managed.# Control message payloads# Domain event payloads# Session start time (monotonic)# Session start time (wall clock, ISO8601)# Session epoch for reconnect detection# Rolling session storage for transcript/event history# Import here to avoid circular dependency# Configure storage based on environment or defaults# Cleanup old messages outside replay window# Remove all messages <= ack_seq from replay buffer# Per-message mode: only remove the specific message# New resilient comms payload typesb'WebSocket API Types: versioned envelope schema and control protocol.

This module defines the structured envelope format for all WebSocket messages
including control types (hello, welcome, heartbeats, acks) and domain events
(ASR partials/finals, MT finals, status updates).

Envelope design supports:
- Versioned schema for forward/backward compatibility
- Session management with server-issued IDs
- Sequence numbering for acknowledgements and replay
- Monotonic timing for latency measurement
- Correlation IDs for request/response linking
'u'WebSocket API Types: versioned envelope schema and control protocol.

This module defines the structured envelope format for all WebSocket messages
including control types (hello, welcome, heartbeats, acks) and domain events
(ASR partials/finals, MT finals, status updates).

Envelope design supports:
- Versioned schema for forward/backward compatibility
- Session management with server-issued IDs
- Sequence numbering for acknowledgements and replay
- Monotonic timing for latency measurement
- Correlation IDs for request/response linking
'b'Standard message types for the WebSocket protocol.'u'Standard message types for the WebSocket protocol.'b'client.hello'u'client.hello'b'server.welcome'u'server.welcome'b'server.error'u'server.error'b'client.hb'u'client.hb'b'server.hb'u'server.hb'b'client.ack'u'client.ack'b'server.ack'u'server.ack'b'client.flow'u'client.flow'b'session.resume'u'session.resume'b'system.metrics'u'system.metrics'b'internal'u'internal'b'bad_request'u'bad_request'b'unauthorized'u'unauthorized'b'not_found'u'not_found'b'rate_limit'u'rate_limit'b'resume_gap'u'resume_gap'b'invalid_type'u'invalid_type'b'invalid_seq'u'invalid_seq'b'invalid_corr'u'invalid_corr'b'Versioned envelope for all WebSocket messages.

    All messages use this shared envelope structure with type-specific
    payloads in the 'data' field.
    'u'Versioned envelope for all WebSocket messages.

    All messages use this shared envelope structure with type-specific
    payloads in the 'data' field.
    'b'Schema version'u'Schema version'b'Message type (namespaced)'u'Message type (namespaced)'b'Session ID (server-issued)'u'Session ID (server-issued)'b'Message ID (server-unique)'u'Message ID (server-unique)'b'Sequence number per session'u'Sequence number per session'b'Correlation ID for responses'u'Correlation ID for responses'b'ISO8601 timestamp'u'ISO8601 timestamp'b'Monotonic nanoseconds since session start'u'Monotonic nanoseconds since session start'b'Type-specific payload'u'Type-specific payload'b'after'u'after'b'WSEnvelope'u'WSEnvelope'b'corr is only allowed on replies/acks, got t='u'corr is only allowed on replies/acks, got t='b'seq must be non-negative'u'seq must be non-negative'b'Acknowledgement modes for flow control.'u'Acknowledgement modes for flow control.'b'cumulative'u'cumulative'b'per-message'u'per-message'b'Client hello payload - announces capabilities and preferences.'u'Client hello payload - announces capabilities and preferences.'b'Client agent string'u'Client agent string'b'Accepted message types'u'Accepted message types'b'Acknowledgement mode'u'Acknowledgement mode'b'Requested sliding window size'u'Requested sliding window size'b'Resume information'u'Resume information'b'Resume information for reconnection.'u'Resume information for reconnection.'b'Previous session ID'u'Previous session ID'b'Last acknowledged sequence number'u'Last acknowledged sequence number'b'Server welcome payload - provides session config and limits.'u'Server welcome payload - provides session config and limits.'b'Heartbeat configuration'u'Heartbeat configuration'b'Resume window policy'u'Resume window policy'b'Server-imposed limits'u'Server-imposed limits'b'Heartbeat timing configuration.'u'Heartbeat timing configuration.'b'Heartbeat interval in milliseconds'u'Heartbeat interval in milliseconds'b'Heartbeat timeout in milliseconds'u'Heartbeat timeout in milliseconds'b'Resume window policy for reconnections.'u'Resume window policy for reconnections.'b'Resume window in seconds'u'Resume window in seconds'b'Resume token'u'Resume token'b'Server-imposed limits for flow control.'u'Server-imposed limits for flow control.'b'Maximum sliding window size'u'Maximum sliding window size'b'Maximum message size in bytes'u'Maximum message size in bytes'b'Heartbeat payload with metrics.'u'Heartbeat payload with metrics.'b'Outbound queue depth'u'Outbound queue depth'b'Inbound queue depth'u'Inbound queue depth'b'Estimated latency in milliseconds'u'Estimated latency in milliseconds'b'Acknowledgement payload.'u'Acknowledgement payload.'b'Acknowledged sequence number'u'Acknowledged sequence number'b'Flow control payload to adjust window size.'u'Flow control payload to adjust window size.'b'New maximum in-flight messages'u'New maximum in-flight messages'b'Server error payload (inherits structured ErrorPayload).'u'Server error payload (inherits structured ErrorPayload).'b'Error code'u'Error code'b'Error detail message'u'Error detail message'b'Optional retry-after in ms'u'Optional retry-after in ms'b'ASR partial transcription payload.'u'ASR partial transcription payload.'b'Partial text'u'Partial text'b'Whether this is final'u'Whether this is final'b'Segment identifier'u'Segment identifier'b'Stability score 0.0-1.0'u'Stability score 0.0-1.0'b'Segment details'u'Segment details'b'ASR final transcription payload.'u'ASR final transcription payload.'b'Final transcribed text'u'Final transcribed text'b'Segment start time in milliseconds'u'Segment start time in milliseconds'b'Segment end time in milliseconds'u'Segment end time in milliseconds'b'Sequence range covered by this final: {from: seq, to: seq}'u'Sequence range covered by this final: {from: seq, to: seq}'b'Machine translation partial payload.'u'Machine translation partial payload.'b'Partial translated text'u'Partial translated text'b'Source language code'u'Source language code'b'Target language code'u'Target language code'b'Source segment identifier'u'Source segment identifier'b'Translation stability score'u'Translation stability score'b'Machine translation final payload.'u'Machine translation final payload.'b'Translated text'u'Translated text'b'Status update payload.'u'Status update payload.'b'Status stage'u'Status stage'b'Optional status detail'u'Optional status detail'b'Session state for managing WebSocket connections.'u'Session state for managing WebSocket connections.'b'Initialize session storage after dataclass creation.'u'Initialize session storage after dataclass creation.'b'3600.0'u'3600.0'b'Get next sequence number.'u'Get next sequence number.'b'Get nanoseconds since session start (monotonic).'u'Get nanoseconds since session start (monotonic).'b'Add message to replay buffer with retention policy.'u'Add message to replay buffer with retention policy.'b'Get messages for replay after reconnect.'u'Get messages for replay after reconnect.'b'Check if we can send a message within flow control limits.'u'Check if we can send a message within flow control limits.'b'Process acknowledgement and update flow control state.'u'Process acknowledgement and update flow control state.'b'Add a finalized commit to session storage.

        Args:
            commit_type: Type of commit ("transcript", "translation", "status")
            data: Commit data payload

        Returns:
            SessionCommit object if storage is available, None otherwise
        'u'Add a finalized commit to session storage.

        Args:
            commit_type: Type of commit ("transcript", "translation", "status")
            data: Commit data payload

        Returns:
            SessionCommit object if storage is available, None otherwise
        'b'Get session storage snapshot for rehydration.

        Args:
            max_commits: Maximum number of recent commits to include

        Returns:
            Snapshot data or None if storage not available
        'u'Get session storage snapshot for rehydration.

        Args:
            max_commits: Maximum number of recent commits to include

        Returns:
            Snapshot data or None if storage not available
        'b'Get session storage statistics.

        Returns:
            Storage stats or None if storage not available
        'u'Get session storage statistics.

        Returns:
            Storage stats or None if storage not available
        'b'Session resume request payload.'u'Session resume request payload.'b'Session ID to resume'u'Session ID to resume'b'Expected session epoch'u'Expected session epoch'b'Session snapshot response payload for rehydration.'u'Session snapshot response payload for rehydration.'b'Session ID'u'Session ID'b'Current session epoch'u'Current session epoch'b'Current sequence number'u'Current sequence number'b'Final transcript segments'u'Final transcript segments'b'Active partial segments'u'Active partial segments'b'MT state if enabled'u'MT state if enabled'b'Session new response payload for fresh start.'u'Session new response payload for fresh start.'b'New session ID'u'New session ID'b'New session epoch'u'New session epoch'b'Reason for new session (e.g., 'resume_expired')'u'Reason for new session (e.g., 'resume_expired')'b'Session acknowledgement payload.'u'Session acknowledgement payload.'b'Acknowledgement status'u'Acknowledgement status'b'System heartbeat payload with comprehensive metrics.'u'System heartbeat payload with comprehensive metrics.'b'Monotonic milliseconds since session start'u'Monotonic milliseconds since session start'b'Queue depths by name'u'Queue depths by name'b'Drop counts by queue'u'Drop counts by queue'b'Latency metrics in ms'u'Latency metrics in ms'b'Queue drop notification payload.'u'Queue drop notification payload.'b'Queue/path where drop occurred'u'Queue/path where drop occurred'b'Number of items dropped'u'Number of items dropped'b'Drop reason (capacity, ttl_expired, backpressure)'u'Drop reason (capacity, ttl_expired, backpressure)'b'Total items dropped on this path'u'Total items dropped on this path'b'System metrics payload for telemetry.'u'System metrics payload for telemetry.'b'Current queue depths'u'Current queue depths'b'Total drops by queue'u'Total drops by queue'b'95th percentile latencies'u'95th percentile latencies'b'Session uptime in seconds'u'Session uptime in seconds'b'Memory usage in MB'u'Memory usage in MB'u'LoquiLex.loquilex.api.ws_types'u'loquilex.api.ws_types'u'api.ws_types'u'ws_types'!;PUNCT_MAP\s+\s*([])\s*\1apply_glossarydont_translatetermglossary# Collapse spaces around CJK# Replace with same token to prevent later MT (in our pipeline, MT already done).# Here it's mainly for consistent casing/spaces cleanup.u''u''b'!'u'!'u''u''b';'u';'b'\s+'u'\s+'u'\s*([])\s*'b'\1'u'\1'u'LoquiLex.loquilex.post.zh_text'u'LoquiLex.loquilex.post'u'loquilex.post.zh_text'u'loquilex.post'u'post.zh_text'u'post'u'zh_text'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  .    G0    